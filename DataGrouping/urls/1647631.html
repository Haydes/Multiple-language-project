<!DOCTYPE html>


    <html itemscope itemtype="http://schema.org/QAPage" class="html__responsive">

    <head>

        <title>c++ - C state-machine design - Stack Overflow</title>
        <link rel="shortcut icon" href="https://cdn.sstatic.net/Sites/stackoverflow/Img/favicon.ico?v=ec617d715196">
        <link rel="apple-touch-icon" href="https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon.png?v=c78bd457575a">
        <link rel="image_src" href="https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon.png?v=c78bd457575a"> 
        <link rel="search" type="application/opensearchdescription+xml" title="Stack Overflow" href="/opensearch.xml">
        <link rel="canonical" href="https://stackoverflow.com/questions/1647631/c-state-machine-design" />
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0">
        <meta property="og:type" content= "website" />
        <meta property="og:url" content="https://stackoverflow.com/questions/1647631/c-state-machine-design"/>
        <meta property="og:site_name" content="Stack Overflow" />
        <meta property="og:image" itemprop="image primaryImageOfPage" content="https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded" />
        <meta name="twitter:card" content="summary"/>
        <meta name="twitter:domain" content="stackoverflow.com"/>
        <meta name="twitter:title" property="og:title" itemprop="name" content="C state-machine design" />
        <meta name="twitter:description" property="og:description" itemprop="description" content="I am crafting a small project in mixed C and C&#x2B;&#x2B;.  I am building one small-ish state-machine at the heart of one of my worker thread.&#xA;&#xA;I was wondering if you gurus on SO would share your state-mach..." />

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://cdn.sstatic.net/Js/stub.en.js?v=ae62f735acf1"></script>
    
        <link rel="stylesheet" type="text/css" href="https://cdn.sstatic.net/Shared/stacks.css?v=3b16a418cc4c" >
        <link rel="stylesheet" type="text/css" href="https://cdn.sstatic.net/Sites/stackoverflow/primary.css?v=4b037b48ce20" >

    
            <meta name="twitter:app:country" content="US" />
            <meta name="twitter:app:name:iphone" content="Stack Exchange iOS" />
            <meta name="twitter:app:id:iphone" content="871299723" />
            <meta name="twitter:app:url:iphone" content="se-zaphod://stackoverflow.com/questions/1647631/c-state-machine-design" />
            <meta name="twitter:app:name:ipad" content="Stack Exchange iOS" />
            <meta name="twitter:app:id:ipad" content="871299723" />
            <meta name="twitter:app:url:ipad" content="se-zaphod://stackoverflow.com/questions/1647631/c-state-machine-design" />
            <meta name="twitter:app:name:googleplay" content="Stack Exchange Android">
            <meta name="twitter:app:url:googleplay" content="http://stackoverflow.com/questions/1647631/c-state-machine-design">
            <meta name="twitter:app:id:googleplay" content="com.stackexchange.marvin">
        <script>
            StackExchange.ready(function () {

                    StackExchange.using("snippets", function () {
                        StackExchange.snippets.initSnippetRenderer();
                    });
                    
                StackExchange.using("postValidation", function () {
                    StackExchange.postValidation.initOnBlurAndSubmit($('#post-form'), 2, 'answer');
                });


                StackExchange.question.init({showAnswerHelp:true,totalCommentCount:4,shownCommentCount:4,questionId:1647631});

                styleCode();

                    StackExchange.realtime.subscribeToQuestion('1', '1647631');
                    StackExchange.using("gps", function () { StackExchange.gps.trackOutboundClicks('#content', '.js-post-body'); });



            });
        </script>

        
        
        
        
        
        
        


    <script>
        StackExchange.init({"locale":"en","serverTime":1601618601,"routeName":"Questions/Show","stackAuthUrl":"https://stackauth.com","networkMetaHostname":"meta.stackexchange.com","site":{"name":"Stack Overflow","description":"Q&A for professional and enthusiast programmers","isNoticesTabEnabled":true,"enableNewTagCreationWarning":true,"insertSpaceAfterNameTabCompletion":false,"id":1,"childUrl":"https://meta.stackoverflow.com","styleCodeWithHighlightjs":true,"negativeVoteScoreFloor":null,"enableSocialMediaInSharePopup":true,"protocol":"https"},"user":{"fkey":"acaa8363082ae571f816400824bcd96ed9822d17e4aec02ff3f29c0aa945e180","tid":"fd19fc30-1fcc-02d8-3048-ea895734f734","rep":0,"isAnonymous":true,"isAnonymousNetworkWide":true},"events":{"postType":{"question":1},"postEditionSection":{"title":1,"body":2,"tags":3}},"story":{"minCompleteBodyLength":75,"likedTagsMaxLength":300,"dislikedTagsMaxLength":300},"jobPreferences":{"maxNumDeveloperRoles":2,"maxNumIndustries":4},"svgIconPath":"https://cdn.sstatic.net/Img/svg-icons","svgIconHash":"e06df390d347"}, {"userProfile":{"openGraphAPIKey":"4a307e43-b625-49bb-af15-ffadf2bda017"},"userMessaging":{"showNewFeatureNotice":true},"tags":{},"subscriptions":{"defaultMaxTrueUpSeats":1000},"snippets":{"renderDomain":"stacksnippets.net","snippetsEnabled":true},"slack":{"sidebarAdDismissCookie":"slack-sidebar-ad","sidebarAdDismissCookieExpirationDays":60.0},"site":{"allowImageUploads":true,"enableImgurHttps":true,"enableUserHovercards":true,"forceHttpsImages":true,"styleCode":true},"paths":{},"monitoring":{"clientTimingsAbsoluteTimeout":30000,"clientTimingsDebounceTimeout":1000},"mentions":{"maxNumUsersInDropdown":50},"markdown":{},"flags":{"allowRetractingCommentFlags":true,"allowRetractingFlags":true},"comments":{},"accounts":{"currentPasswordRequiredForChangingStackIdPassword":true}});
        StackExchange.using.setCacheBreakers({"js/adops.en.js":"22a9bd59b1e9","js/ask.en.js":"83cc8cb596d5","js/begin-edit-event.en.js":"cb9965ad8784","js/events.en.js":"6e9e3a9eadd5","js/explore-qlist.en.js":"5c7424c271ef","js/full-anon.en.js":"e3f9224ea608","js/full.en.js":"5a7e62255b1b","js/help.en.js":"ff3f6f73f7d3","js/highlightjs-loader.en.js":"74545b69b9b8","js/inline-tag-editing.en.js":"64af4cae422c","js/keyboard-shortcuts.en.js":"6cd3d27e48d3","js/markdown-it-loader.en.js":"e8730cf897c1","js/mobile.en.js":"e8e35effc1e7","js/moderator.en.js":"bbf04f8ec966","js/postCollections-transpiled.en.js":"927c6fd07d62","js/post-validation.en.js":"eb5a773dcdd8","js/prettify-full.en.js":"d57ef3d3792b","js/question-editor.en.js":"","js/review.en.js":"e50724b071c6","js/revisions.en.js":"21da4c377f56","js/stacks-editor.en.js":"c0b43a848550","js/tageditor.en.js":"0ffdcf3fc9c4","js/tageditornew.en.js":"eb3ac5f3125c","js/tagsuggestions.en.js":"9b2c5d9791d2","js/wmd.en.js":"68bc6cc98f0c","js/snippet-javascript-codemirror.en.js":"979bb2449ae8"});
        StackExchange.using("gps", function() {
             StackExchange.gps.init(true);
        });
    </script>
    <noscript id="noscript-css"><style>body,.top-bar{margin-top:1.9em}</style></noscript>
    </head>
    <body class="question-page unified-theme">
    <div id="notify-container"></div>
    <div id="custom-header"></div>
        
<header class="top-bar js-top-bar top-bar__network _fixed">
    <div class="wmx12 mx-auto grid ai-center h100" role="menubar">
        <div class="-main grid--cell">
                <a href="#" class="left-sidebar-toggle p0 ai-center jc-center js-left-sidebar-toggle" role="menuitem" aria-haspopup="true" aria-controls="left-sidebar" aria-expanded="false"><span class="ps-relative"></span></a>
                <div class="topbar-dialog leftnav-dialog js-leftnav-dialog dno">
                    <div class="left-sidebar js-unpinned-left-sidebar" data-can-be="left-sidebar" data-is-here-when="sm"></div>
                </div>
                    <a href="https://stackoverflow.com" class="-logo js-gps-track"
                        data-gps-track="top_nav.click({is_current:false, location:2, destination:8})">
                        <span class="-img _glyph">Stack Overflow</span>
                    </a>



        </div>

            <ol class="list-reset grid gs4" role="presentation">

                    <li class="grid--cell md:d-none">
                        <a href="/company" class="-marketing-link js-gps-track"
                           data-gps-track="top_nav.products.click({location:2, destination:7})"
                            data-ga="[&quot;top navigation&quot;,&quot;about menu click&quot;,null,null,null]">About</a>
                    </li>

                <li class="grid--cell">
                    <a href="#"
                        class="-marketing-link js-gps-track js-products-menu"
                        aria-controls="products-popover"
                        data-controller="s-popover"
                        data-action="s-popover#toggle"
                        data-s-popover-placement="bottom"
                        data-s-popover-toggle-class="is-selected"
                        data-gps-track="top_nav.products.click({location:2, destination:1})"
                        data-ga="[&quot;top navigation&quot;,&quot;products menu click&quot;,null,null,null]">
                        Products
                    </a>
                </li>

                    <li class="grid--cell md:d-none">
                        <a href="/teams" class="-marketing-link js-gps-track"
                           data-gps-track="top_nav.products.click({location:2, destination:7})"
                            data-ga="[&quot;top navigation&quot;,&quot;learn more - teams&quot;,null,null,null]">For Teams</a>
                    </li>
            </ol>
            <div class="s-popover ws2 mtn2 p0"
                    id="products-popover"
                    role="menu"
                    aria-hidden="true">
                <div class="s-popover--arrow"></div>
                <ol class="list-reset s-anchors s-anchors__inherit">
                    <li class="m6">
                        <a href="/questions" class="bar-sm p6 d-block h:bg-black-100 js-gps-track"
                           data-gps-track="top_nav.products.click({location:2, destination:2})"
                           data-ga="[&quot;top navigation&quot;,&quot;public qa submenu click&quot;,null,null,null]">
                            <span class="fs-body1 d-block">Stack Overflow</span>
                            <span class="fs-caption d-block fc-light">Public questions &amp; answers</span>
                        </a>
                    </li>
                    <li class="m6">
                        <a href="/teams" class="bar-sm p6 d-block h:bg-black-100 js-gps-track"
                           data-gps-track="top_nav.products.click({location:2, destination:3})"
                           data-ga="[&quot;top navigation&quot;,&quot;teams submenu click&quot;,null,null,null]">
                            <span class="fs-body1 d-block">Stack Overflow for Teams</span>
                            <span class="fs-caption d-block fc-light">Where developers &amp; technologists share private knowledge with coworkers</span>
                        </a>
                    </li>
                    <li class="m6">
                        <a href="/jobs?so_source=ProductsMenu&so_medium=StackOverflow" class="bar-sm p6 d-block h:bg-black-100 js-gps-track"
                            data-gps-track="top_nav.products.click({location:2, destination:9})"
                            data-ga="[&quot;top navigation&quot;,&quot;jobs submenu click&quot;,null,null,null]">
                            <span class="fs-body1 d-block">Jobs</span>
                            <span class="fs-caption d-block fc-light">Programming &amp; related technical career opportunities</span>
                        </a>
                    </li>
                    <li class="m6">
                        <a href="https://stackoverflow.com/talent" class="bar-sm p6 d-block h:bg-black-100 js-gps-track"
                           data-gps-track="top_nav.products.click({location:2, destination:5})"
                           data-ga="[&quot;top navigation&quot;,&quot;talent submenu click&quot;,null,null,null]">
                            <span class="fs-body1 d-block">Talent</span>
                            <span class="fs-caption d-block fc-light">Recruit tech talent &amp; build your employer brand</span>
                        </a>
                    </li>
                    <li class="m6">
                        <a href="https://stackoverflow.com/advertising" class="bar-sm p6 d-block h:bg-black-100 js-gps-track"
                           data-gps-track="top_nav.products.click({location:2, destination:6})"
                           data-ga="[&quot;top navigation&quot;,&quot;advertising submenu click&quot;,null,null,null]">
                            <span class="fs-body1 d-block">Advertising</span>
                            <span class="fs-caption d-block fc-light">Reach developers &amp; technologists worldwide</span>
                        </a>
                    </li>
                    <li class="bg-black-025 bt bc-black-2 py6 px6 bbr-sm">
                        <a href="/company" class="fc-light d-block py6 px6 h:fc-black-800 js-gps-track"
                            data-gps-track="top_nav.products.click({location:2, destination:7})"
                            data-ga="[&quot;top navigation&quot;,&quot;about submenu click&quot;,null,null,null]">About the company</a>
                    </li>
                </ol>
            </div>

            <form id="search" role="search" action=/search class="grid--cell fl-grow1 searchbar px12 js-searchbar " autocomplete="off">
                    <div class="ps-relative">
                        <input name="q"
                               type="text"
                               placeholder="Search&#x2026;"
                               value=""
                               autocomplete="off"
                               maxlength="240"
                               class="s-input s-input__search js-search-field "
                               aria-label="Search"
                               aria-controls="top-search" 
                               data-controller="s-popover"
                               data-action="focus->s-popover#show"
                               data-s-popover-placement="bottom-start"/>
                        <svg aria-hidden="true" class="s-input-icon s-input-icon__search svg-icon iconSearch" width="18" height="18" viewBox="0 0 18 18"><path d="M18 16.5l-5.14-5.18h-.35a7 7 0 10-1.19 1.19v.35L16.5 18l1.5-1.5zM12 7A5 5 0 112 7a5 5 0 0110 0z"/></svg>
                        <div class="s-popover p0 wmx100 wmn4 sm:wmn-initial js-top-search-popover s-popover--arrow__tl" id="top-search" role="menu">
    <div class="js-spinner p24 grid ai-center jc-center d-none">
        <div class="s-spinner s-spinner__sm fc-orange-400">
            <div class="v-visible-sr">Loading&#x2026;</div>
        </div>
    </div>

    <span class="v-visible-sr js-screen-reader-info"></span>
    <div class="js-ac-results overflow-y-auto hmx3 d-none"></div>

    <div class="js-search-hints" aria-describedby="Tips for searching"></div>
</div>
                    </div>
            </form>
        
        

<ol class="overflow-x-auto ml-auto -secondary grid ai-center list-reset h100 user-logged-out" role="presentation">
        <li class="-item searchbar-trigger"><a href="#" class="-link js-searchbar-trigger" role="button" aria-label="Search" aria-haspopup="true" aria-controls="search" title="Click to show search"><svg aria-hidden="true" class="svg-icon iconSearch" width="18" height="18" viewBox="0 0 18 18"><path d="M18 16.5l-5.14-5.18h-.35a7 7 0 10-1.19 1.19v.35L16.5 18l1.5-1.5zM12 7A5 5 0 112 7a5 5 0 0110 0z"/></svg></a></li>

            <li class="-ctas">
                            <a href="https://stackoverflow.com/users/login?ssrc=head&returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f1647631%2fc-state-machine-design" class="login-link s-btn s-btn__filled py8 js-gps-track" rel="nofollow"
                               data-gps-track="login.click" data-ga="[&quot;top navigation&quot;,&quot;login button click&quot;,null,null,null]">Log in</a>
                            <a href="https://stackoverflow.com/users/signup?ssrc=head&returnurl=%2fusers%2fstory%2fcurrent" class="login-link s-btn s-btn__primary py8" rel="nofollow" data-ga="[&quot;sign up&quot;,&quot;Sign Up Navigation&quot;,&quot;Header&quot;,null,null]">Sign up</a>

            </li>

    <li class="js-topbar-dialog-corral" role="presentation">
            

    <div class="topbar-dialog siteSwitcher-dialog dno" role="menu">
        <div class="header">
            <h3>
                <a href="https://stackoverflow.com">current community</a>
            </h3>
        </div>
        <div class="modal-content bg-powder-050">
            <ul class="current-site">
                    <li class="grid">
                            <div class="fl1">
                <a href="https://stackoverflow.com"
       class="current-site-link site-link js-gps-track grid gs8 gsx"
       data-id="1"
       data-gps-track="site_switcher.click({ item_type:3 })">
        <div class="favicon favicon-stackoverflow site-icon grid--cell" title="Stack Overflow"></div>
        <span class="grid--cell fl1">
            Stack Overflow
        </span>
    </a>

    </div>
    <div class="related-links">
            <a href="https://stackoverflow.com/help" class="js-gps-track" data-gps-track="site_switcher.click({ item_type:14 })">help</a>
            <a href="https://chat.stackoverflow.com/?tab=site&amp;host=stackoverflow.com" class="js-gps-track" data-gps-track="site_switcher.click({ item_type:6 })">chat</a>
    </div>

                    </li>
                    <li class="related-site grid">
                            <div class="L-shaped-icon-container">
        <span class="L-shaped-icon"></span>
    </div>

                            <a href="https://meta.stackoverflow.com"
       class=" site-link js-gps-track grid gs8 gsx"
       data-id="552"
       data-gps-track="site.switch({ target_site:552, item_type:3 }),site_switcher.click({ item_type:4 })">
        <div class="favicon favicon-stackoverflowmeta site-icon grid--cell" title="Meta Stack Overflow"></div>
        <span class="grid--cell fl1">
            Meta Stack Overflow
        </span>
    </a>

                    </li>
            </ul>
        </div>

        <div class="header" id="your-communities-header">
            <h3>
your communities            </h3>

        </div>
        <div class="modal-content" id="your-communities-section">

                <div class="call-to-login">
<a href="https://stackoverflow.com/users/signup?ssrc=site_switcher&amp;returnurl=%2fusers%2fstory%2fcurrent" class="login-link js-gps-track" data-gps-track="site_switcher.click({ item_type:10 })">Sign up</a> or <a href="https://stackoverflow.com/users/login?ssrc=site_switcher&amp;returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f1647631%2fc-state-machine-design" class="login-link js-gps-track" data-gps-track="site_switcher.click({ item_type:11 })">log in</a> to customize your list.                </div>
        </div>

        <div class="header">
            <h3><a href="https://stackexchange.com/sites">more stack exchange communities</a>
            </h3>
            <a href="https://stackoverflow.blog" class="fr">company blog</a>
        </div>
        <div class="modal-content">
                <div class="child-content"></div>
        </div>        
    </div>

    </li>
</ol>
    </div>
</header>
    <div id="js-gdpr-consent-banner" class="p8 ff-sans ps-fixed b0 l0 r0 z-banner" role="banner" aria-hidden="false" style="background-color: #3b4045; color: white;"> 
        <div class="wmx8 mx-auto grid grid__center" role="alertdialog" aria-describedby="notice-message">
            <div class="grid--cell mr12" aria-label="notice-message">
                <p class="mb0 lh-lg">
                    By using our site, you acknowledge that you have read and understand our <a class="s-link s-link__inherit td-underline fc-white" target="_blank" href="https://stackoverflow.com/legal/cookie-policy">Cookie Policy</a>, <a class="s-link s-link__inherit td-underline fc-white" target="_blank" href="https://stackoverflow.com/legal/privacy-policy">Privacy Policy</a>, and our <a class="s-link s-link__inherit td-underline fc-white" target="_blank" href="https://stackoverflow.com/legal/terms-of-service/public">Terms of Service</a>.
                </p>
            </div>
            <div class="grid--cell">
                <a class="s-btn s-btn__muted s-btn__icon js-notice-close" aria-label="notice-dismiss">
                    <svg aria-hidden="true" class="svg-icon iconClear" width="18" height="18" viewBox="0 0 18 18"><path d="M15 4.41L13.59 3 9 7.59 4.41 3 3 4.41 7.59 9 3 13.59 4.41 15 9 10.41 13.59 15 15 13.59 10.41 9 15 4.41z"/></svg>
                </a>
            </div>
        </div>
    </div>

    <script>
        StackExchange.ready(function () { StackExchange.topbar.init(); });
StackExchange.scrollPadding.setPaddingTop(50, 10);    </script>


                
    <div id="announcement-banner" class="js-announcement-banner bg-black-700 fc-white ff-sans fs-body2 py2"
         data-campaign="2020-09-30.podcast-promotion-2020" data-cookie="notice-den" data-expire-date="1602460800000">
        <div class="grid jc-space-between wmx12 mx-auto px16 py8">
            <div class="grid--cell mr12">
                What&#x27;s the deal with Deno? We talk with a major contributor to find out. <a target="_blank"
                   class="s-link js-link js-gps-track fw-bold fc-blue-400" href="https://stackoverflow.blog/2020/05/29/podcast-239-brian-leruox-begin-aws-lambda-deno-rust-typescript//?utm_source=so-owned&amp;utm_medium=announcement-banner&amp;utm_campaign=so-podcast&amp;utm_content=ep237" data-ga="[&quot;podcast-promotion-2020&quot;,&quot;Announcement Banner&quot;,&quot;https://stackoverflow.blog/2020/05/29/podcast-239-brian-leruox-begin-aws-lambda-deno-rust-typescript//?utm_source=so-owned&amp;utm_medium=announcement-banner&amp;utm_campaign=so-podcast&amp;utm_content=ep237&quot;,null,{&quot;dimension4&quot;:&quot;podcast-promotion-2020&quot;}]"
                   data-gps-track="announcement_banner.click({campaign: &#x27;2020-09-30.podcast-promotion-2020&#x27;, location: 2, action: 2})">Listen now</a>.
            </div>
            <a class="grid-cell fc-white js-dismiss js-gps-track" href="#" title="dismiss"
               data-gps-track="announcement_banner.click({campaign: &#x27;2020-09-30.podcast-promotion-2020&#x27;, location: 2, action: 1})"><svg aria-hidden="true" class="m0 svg-icon iconClear" width="18" height="18" viewBox="0 0 18 18"><path d="M15 4.41L13.59 3 9 7.59 4.41 3 3 4.41 7.59 9 3 13.59 4.41 15 9 10.41 13.59 15 15 13.59 10.41 9 15 4.41z"/></svg></a>
        </div>
    </div>
    <script>
        StackExchange.ready(function () {
            StackExchange.Notice.announcementBannerInit();
        });
    </script>




    <div class="container">
            


<div id="left-sidebar" data-is-here-when="md lg" class="left-sidebar js-pinned-left-sidebar ps-relative">
    <div class="left-sidebar--sticky-container js-sticky-leftnav">
        <nav role="navigation">
            <ol class="nav-links">
        <li class="">
            <a
                href="/"
                class="pl8 js-gps-track nav-links--link"
                
                data-gps-track="top_nav.click({is_current:false, location:2, destination:8})">
Home            </a>
        </li>
                <li>
                    <ol class="nav-links">
                            <li class="fs-fine tt-uppercase ml8 mt16 mb4 fc-light">Public</li>
                                <li class=" youarehere">
            <a id="nav-questions"
                href="/questions"
                class="pl8 js-gps-track nav-links--link -link__with-icon"
                
                data-gps-track="top_nav.click({is_current:true, location:2, destination:1})">
<svg aria-hidden="true" class="svg-icon iconGlobe" width="18" height="18" viewBox="0 0 18 18"><path d="M9 1a8 8 0 100 16A8 8 0 009 1zM8 15.32a6.4 6.4 0 01-5.23-7.75L7 11.68v.8c0 .88.12 1.32 1 1.32v1.52zm5.72-2c-.2-.66-1-1.32-1.72-1.32h-1v-2c0-.44-.56-1-1-1H6V7h1c.44 0 1-.56 1-1V5h2c.88 0 1.4-.72 1.4-1.6v-.33a6.4 6.4 0 012.32 10.24v.01z"/></svg>                    <span class="-link--channel-name">Stack Overflow</span>
            </a>
        </li>

        <li class="">
            <a id="nav-tags"
                href="/tags"
                class=" js-gps-track nav-links--link"
                
                data-gps-track="top_nav.click({is_current:false, location:2, destination:2})">
Tags            </a>
        </li>
        <li class="">
            <a id="nav-users"
                href="/users"
                class=" js-gps-track nav-links--link"
                
                data-gps-track="top_nav.click({is_current:false, location:2, destination:3})">
Users            </a>
        </li>
                            <li class="fs-fine tt-uppercase ml8 mt16 mb4 fc-light">Find a Job</li>
        <li class="">
            <a id="nav-jobs"
                href="/jobs?so_medium=StackOverflow&amp;so_source=SiteNav"
                class=" js-gps-track nav-links--link"
                
                data-gps-track="top_nav.click({is_current:false, location:2, destination:6})">
Jobs            </a>
        </li>
        <li class="">
            <a id="nav-companies"
                href="/jobs/companies?so_medium=StackOverflow&amp;so_source=SiteNav"
                class=" js-gps-track nav-links--link"
                
                data-gps-track="top_nav.click({is_current:false, location:2, destination:12})">
Companies            </a>
        </li>
                    </ol>
                </li>
                    <li>
                        <ol class="nav-links">
                                <li class="grid ai-center jc-space-between ml8 mt24 mb4">
                                    <div class="grid--cell tt-uppercase fs-fine fc-light">Teams</div>
                                    <div class="grid--cell fs-fine fc-light mr4">
                                        <a href="javascript:void(0)" class="s-link s-link__inherit js-gps-track"
                                            role="button"
                                            aria-controls="popover-teams-create-cta"
                                            data-controller="s-popover"
                                            data-action="s-popover#toggle"
                                            data-s-popover-placement="bottom-start"
                                            data-s-popover-toggle-class="is-selected"
                                            data-gps-track="teams.create.left-sidenav.click({ Action: ShowInfo })"
                                            data-ga="[&quot;teams left navigation - anonymous&quot;,&quot;left nav show teams info&quot;,null,null,null]">
                                            What&#x2019;s this?
                                        </a>

                                    </div>
                                </li>
                                <li class="ps-relative">
                                    <a href="https://stackoverflow.com/teams"
                                        class="pl8 js-gps-track nav-links--link"
                                        title="Stack Overflow for Teams is a private, secure spot for your organization's questions and answers."
                                        data-gps-track="teams.create.left-sidenav.click({ Action: TeamsClick })"
                                        data-ga="[&quot;teams left navigation - anonymous&quot;,&quot;left nav team click&quot;,&quot;stackoverflow.com/teams&quot;,null,null]">
                                        <div class="grid ai-center">
                                            <div class="grid--cell s-avatar va-middle bg-orange-400">
                                                <div class="s-avatar--letter mtn1">
                                                    <svg aria-hidden="true" class="svg-icon iconBriefcaseSm" width="14" height="14" viewBox="0 0 14 14"><path d="M4 3a1 1 0 011-1h4a1 1 0 011 1v1h.5c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5h-7A1.5 1.5 0 012 10.5v-5C2 4.67 2.67 4 3.5 4H4V3zm5 1V3H5v1h4z"/></svg>
                                                </div>
                                                <svg aria-hidden="true" class="native s-avatar--badge svg-icon iconShieldXSm" width="9" height="10" viewBox="0 0 9 10"><path d="M0 1.84L4.5 0 9 1.84v3.17C9 7.53 6.3 10 4.5 10 2.7 10 0 7.53 0 5.01V1.84z" fill="var(--white)"/><path d="M1 2.5L4.5 1 8 2.5v2.51C8 7.34 5.34 9 4.5 9 3.65 9 1 7.34 1 5.01V2.5zm2.98 3.02L3.2 7h2.6l-.78-1.48a.4.4 0 01.15-.38c.34-.24.73-.7.73-1.14 0-.71-.5-1.23-1.41-1.23-.92 0-1.39.52-1.39 1.23 0 .44.4.9.73 1.14.12.08.18.23.15.38z" fill="var(--black-500)"/></svg>
                                            </div>
                                            <div class="grid--cell pl6">
Free 30 Day Trial                                            </div>
                                        </div>
                                    </a>
                                </li>
                        </ol>
                    </li>
            </ol>
        </nav>
    </div>


        <div class="s-popover w-auto p16"
             id="popover-teams-create-cta"
             role="menu"
             aria-hidden="true">
            <div class="s-popover--arrow"></div>

            <div class="ps-relative overflow-hidden">
                <p class="mb2"><strong>Teams</strong></p>
                <p class="mb16 fs-caption fc-medium">Q&amp;A for Work</p>
                <p class="mb8 fs-caption fc-medium">

                            Stack Overflow for Teams is a private, secure spot for you and
                            your coworkers to find and share information.
                                        </p>
                <a href="https://stackoverflow.com/teams"
                   class="js-gps-track ws-nowrap d-block"
                   data-gps-track="teams.create.left-sidenav.click({ Action: CtaClick })"
                   data-ga="[&quot;teams left navigation - anonymous&quot;,&quot;left nav cta&quot;,&quot;stackoverflow.com/teams&quot;,null,null]">
Learn more                </a>
            </div>

            <div class="ps-absolute t8 r8">
                <svg width="53" height="49" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M49 11l.2 31H18.9L9 49v-7H4V8h31" fill="#CCEAFF" /><path d="M44.5 19v-.3l-.2-.1-18-13-.1-.1H.5v33h4V46l.8-.6 9.9-6.9h29.3V19z" stroke="#1060E1" stroke-miterlimit="10" /><path d="M31 2l6-1.5 7 2V38H14.9L5 45v-7H1V6h25l5-4z" fill="#fff" /><path d="M7 16.5h13m-13 6h14m-14 6h18" stroke="#1060E1" stroke-miterlimit="10" /><path d="M39 30a14 14 0 1 0 0-28 14 14 0 0 0 0 28z" fill="#FFB935" /><path d="M50.5 14a13.5 13.5 0 1 1-27 0 13.5 13.5 0 0 1 27 0z" stroke="#F48024" stroke-miterlimit="10" /><path d="M32.5 21.5v-8h9v8h-9zm2-9.5V9.3A2.5 2.5 0 0 1 37 6.8a2.5 2.5 0 0 1 2.5 2.5V12h-5zm2 3v2m1-2v2" stroke="#fff" stroke-miterlimit="10" /></svg>
            </div>
        </div>

</div>



        <div id="content" class="snippet-hidden">

            
<div itemprop="mainEntity" itemscope itemtype="http://schema.org/Question">
    <link itemprop="image" href="https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon.png?v=c78bd457575a">

    <div class="inner-content clearfix">

        

            <div id="question-header" class="grid sm:fd-column">
                        <h1 itemprop="name" class="grid--cell fs-headline1 fl1 ow-break-word mb8"><a href="/questions/1647631/c-state-machine-design" class="question-hyperlink">C state-machine design [closed]</a></h1>

                <div class="ml12 aside-cta grid--cell print:d-none sm:ml0 sm:mb12 sm:order-first sm:as-end">
                        <a href="/questions/ask" class="ws-nowrap s-btn s-btn__primary" >
        Ask Question
    </a>

                </div>
            </div>
            <div class="grid fw-wrap pb8 mb16 bb bc-black-2">
                    <div class="grid--cell ws-nowrap mr16 mb8" title="2009-10-30 02:08:33Z">
                        <span class="fc-light mr2">Asked</span>
                        <time itemprop="dateCreated" datetime="2009-10-30T02:08:33">10 years, 11 months ago</time>
                    </div>
                        <div class="grid--cell ws-nowrap mr16 mb8">
                            <span class="fc-light mr2">Active</span>
                            <a href="?lastactivity" class="s-link s-link__inherit" title="2020-08-02 21:04:25Z">2 months ago</a>
                        </div>
                    <div class="grid--cell ws-nowrap mb8" title="Viewed 84,270 times">
                        <span class="fc-light mr2">Viewed</span>
                        84k times
                    </div>
            </div>
            <div id="mainbar" role="main" aria-label="question and answers">

                
<div class="question" data-questionid="1647631"  id="question">
    <style>
    </style>
<div class="js-zone-container zone-container-main">
    <div id="dfp-tlb" class="everyonelovesstackoverflow everyoneloves__top-leaderboard everyoneloves__leaderboard"></div>
    <div class="js-report-ad-button-container " style="width: 728px"></div>
</div>

    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1647631">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This question shows research effort; it is useful and clear" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="193">193</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This question does not show any research effort; it is unclear or not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

        <button class="js-bookmark-btn s-btn s-btn__unset c-pointer py4 js-gps-track" 
                data-controller="s-tooltip" data-s-tooltip-placement="right" title="Bookmark this question."
                aria-pressed="false" aria-label="Bookmark (263)" data-selected-classes="fc-yellow-600"
                data-gps-track="post.click({ item: 1, priv: 0, post_type: 1 })">
            <svg aria-hidden="true" class="svg-icon iconBookmark" width="18" height="18" viewBox="0 0 18 18"><path d="M6 1a2 2 0 00-2 2v14l5-4 5 4V3a2 2 0 00-2-2H6zm3.9 3.83h2.9l-2.35 1.7.9 2.77L9 7.59l-2.35 1.7.9-2.76-2.35-1.7h2.9L9 2.06l.9 2.77z"/></svg>
            <div class="js-bookmark-count mt4" data-value="263">263</div>
        </button>
    

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1647631/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="postcell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
                        <div>
            <aside class="s-notice s-notice__info js-post-notice mb16" role="status">
        <div class="grid fd-column fw-nowrap">
            <div class="grid fw-nowrap">
                <div class="grid--cell fl1 lh-lg">
                    <div class="grid--cell fl1 lh-lg">
                        <b>Closed</b>. This question needs to be more <a href="/help/closed-questions">focused</a>. It is not currently accepting answers.
                        
                    </div>
                </div>
            </div>
        </div>
            <hr class="my12 outline-none baw0 bb bc-powder-2" />
        <div class="grid fw-nowrap fc-black-600">
                <div class="grid--cell mr8">
                    <svg aria-hidden="true" class="svg-icon iconLightbulb" width="18" height="18" viewBox="0 0 18 18"><path d="M15 6.38A6.48 6.48 0 007.78.04h-.02A6.49 6.49 0 002.05 5.6a6.31 6.31 0 002.39 5.75c.49.39.76.93.76 1.5v.24c0 1.07.89 1.9 1.92 1.9h2.75c1.04 0 1.92-.83 1.92-1.9v-.2c0-.6.26-1.15.7-1.48A6.32 6.32 0 0015 6.37zM4.03 5.85A4.49 4.49 0 018 2.02a4.48 4.48 0 015 4.36 4.3 4.3 0 01-1.72 3.44c-.98.74-1.5 1.9-1.5 3.08v.1H7.2v-.14c0-1.23-.6-2.34-1.53-3.07a4.32 4.32 0 01-1.64-3.94zM10 18a1 1 0 000-2H7a1 1 0 100 2h3z"/></svg>
                </div>
            <div class="grid--cell lh-md">
                <p class="mb0">
                    <b>Want to improve this question?</b> Update the question so it focuses on one problem only by <a href="/posts/1647631/edit">editing this post</a>.
                </p>
                    <p class="mb0 mt6">Closed <span title="2020-03-22 22:35:32Z" class="relativetime">6 months ago</span>.</p>
            </div>
        </div>
            <div class="mt24 grid gsx gs8">
                    <a class="s-btn s-btn__outlined grid--cell js-post-notice-edit-post" href="/posts/1647631/edit">
                        Improve this question
                    </a>
            </div>
</aside>

    </div>

<p>I am crafting a small project in mixed C and C++.  I am building one small-ish state-machine at the heart of one of my worker thread.</p>

<p>I was wondering if you gurus on SO would share your state-machine design techniques.</p>

<p><strong>NOTE:</strong> I am primarily after tried &amp; tested implementation techniques.</p>

<p><strong>UPDATED:</strong> Based on all the great input gathered on SO, I've settled on this architecture:</p>

<p><a href="https://i.stack.imgur.com/l9jGt.png" rel="noreferrer"><img src="https://i.stack.imgur.com/l9jGt.png" alt="An event pump points to an event integrator which points to a dispatcher. The dispatcher points to 1 through n actions which point back to the event integrator. A transition table with wildcards points to the dispatcher."></a></p>
    </div>

        <div class="mt24 mb12">
            <div class="post-taglist grid gs4 gsy fd-column">
                <div class="grid ps-relative">
                    <a href="/questions/tagged/c%2b%2b" class="post-tag" title="show questions tagged &#39;c++&#39;" rel="tag">c++</a> <a href="/questions/tagged/c" class="post-tag" title="show questions tagged &#39;c&#39;" rel="tag">c</a> <a href="/questions/tagged/architecture" class="post-tag" title="show questions tagged &#39;architecture&#39;" rel="tag">architecture</a> <a href="/questions/tagged/state-machine" class="post-tag" title="show questions tagged &#39;state-machine&#39;" rel="tag">state-machine</a> 
                </div>
            </div>
        </div>

    <div class="mb0 ">
        <div class="mt16 grid gs8 gsy fw-wrap jc-end ai-start pt4">
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/q/1647631"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this question"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 1 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this question"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="question"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="1"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f4.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 4.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1647631/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 1 })" title="">improve this question</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1647631" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-question js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 1 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this question to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>

                <div class="post-signature grid--cell">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="/posts/1647631/revisions" title="show all edits to this post"
                         class="js-gps-track"
                         data-gps-track="post.click({ item: 4, priv: 0, post_type: 1 })">edited <span title="2018-11-02 12:38:49Z" class="relativetime">Nov 2 '18 at 12:38</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="/users/2370483/machavity"><div class="gravatar-wrapper-32"><img src="https://i.stack.imgur.com/Y0oJ0.jpg?s=32&amp;g=1" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/2370483/machavity">Machavity</a><span class="mod-flair " title="moderator">&#9830;</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 27,568" dir="ltr">27.6k</span><span title="16 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">16</span></span><span class="v-visible-sr">16 gold badges</span><span title="71 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">71</span></span><span class="v-visible-sr">71 silver badges</span><span title="87 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">87</span></span><span class="v-visible-sr">87 bronze badges</span>
        </div>
    </div>
</div>                </div>
            <div class="post-signature owner grid--cell">
                <div class="user-info user-hover">
    <div class="user-action-time">
        asked <span title="2009-10-30 02:08:33Z" class="relativetime">Oct 30 '09 at 2:08</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/171461/jldupont"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/26eb5bb9dd2ccd72e2ccdc112ad1d050?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/171461/jldupont">jldupont</a><span class="d-none" itemprop="name">jldupont</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 78,686" dir="ltr">78.7k</span><span title="48 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">48</span></span><span class="v-visible-sr">48 gold badges</span><span title="187 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">187</span></span><span class="v-visible-sr">187 silver badges</span><span title="298 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">298</span></span><span class="v-visible-sr">298 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1647631" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="1647631" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-1518534" class="comment js-comment " data-comment-id="1518534">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">4</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">The answers here are very good. Also look at this duplicate question that has several good answers, too: <a href="http://stackoverflow.com/questions/1371460/state-machines-tutorials" title="state machines tutorials">stackoverflow.com/questions/1371460/state-machines-tutorials</a></span>
                
&ndash;&nbsp;<a href="/users/12711/michael-burr"
                       title="304,647 reputation"
                       class="comment-user">Michael Burr</a>
                <span class="comment-date" dir="ltr"><span title="2009-10-30 03:53:15Z, License: CC BY-SA 2.5" class="relativetime-clean">Oct 30 '09 at 3:53</span></span>
            </div>
        </div>
    </li>
    <li id="comment-1519236" class="comment js-comment " data-comment-id="1519236">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">2</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">This is also interesting: <a href="http://stackoverflow.com/questions/133214/is-there-a-typical-state-machine-implementation-pattern" title="is there a typical state machine implementation pattern">stackoverflow.com/questions/133214/&hellip;</a></span>
                
&ndash;&nbsp;<a href="/users/96780/daniel-daranas"
                       title="21,395 reputation"
                       class="comment-user">Daniel Daranas</a>
                <span class="comment-date" dir="ltr"><span title="2009-10-30 08:31:27Z, License: CC BY-SA 2.5" class="relativetime-clean">Oct 30 '09 at 8:31</span></span>
            </div>
        </div>
    </li>
    <li id="comment-2035786" class="comment js-comment " data-comment-id="2035786">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">1</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">related: <a href="http://stackoverflow.com/questions/2101961/python-state-machine-design" title="python state machine design">stackoverflow.com/questions/2101961/python-state-machine-design</a></span>
                
&ndash;&nbsp;<a href="/users/171461/jldupont"
                       title="78,686 reputation"
                       class="comment-user owner">jldupont</a>
                <span class="comment-date" dir="ltr"><span title="2010-01-20 14:37:19Z, License: CC BY-SA 2.5" class="relativetime-clean">Jan 20 '10 at 14:37</span></span>
            </div>
        </div>
    </li>
    <li id="comment-48690496" class="comment js-comment " data-comment-id="48690496">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">See also <a href="http://stackoverflow.com/q/3507148/96780">this question</a>.</span>
                
&ndash;&nbsp;<a href="/users/96780/daniel-daranas"
                       title="21,395 reputation"
                       class="comment-user">Daniel Daranas</a>
                <span class="comment-date" dir="ltr"><span title="2015-05-18 07:15:50Z, License: CC BY-SA 3.0" class="relativetime-clean">May 18 '15 at 7:15</span></span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-1647631" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid answering questions in comments."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>


<div class="js-zone-container zone-container-responsive">
    <div id="dfp-isb" class="everyonelovesstackoverflow everyoneloves__inline-sidebar mx-auto"></div>
    <div class="js-report-ad-button-container mx-auto" style="width: 300px"></div>
</div>

                <div id="answers">

                    <a name="tab-top"></a>
                    <div id="answers-header">
                        <div class="answers-subheader grid ai-center mb8">
                            <div class="grid--cell fl1">
                                <h2 class="mb0" data-answercount="27">
                                        27 Answers
                                    <span style="display:none;" itemprop="answerCount">27</span>
                                </h2>
                            </div>
                            <div class="grid--cell">
                                <div class=" grid s-btn-group js-filter-btn">
        <a class="grid--cell s-btn s-btn__muted s-btn__outlined" href="/questions/1647631/c-state-machine-design?answertab=active#tab-top" data-nav-xhref="" title="Answers with the latest activity first" data-value="active" data-shortcut="A">
            Active</a>
        <a class="grid--cell s-btn s-btn__muted s-btn__outlined" href="/questions/1647631/c-state-machine-design?answertab=oldest#tab-top" data-nav-xhref="" title="Answers in the order they were provided" data-value="oldest" data-shortcut="O">
            Oldest</a>
        <a class="youarehere is-selected grid--cell s-btn s-btn__muted s-btn__outlined" href="/questions/1647631/c-state-machine-design?answertab=votes#tab-top" data-nav-xhref="" title="Answers with the highest score first" data-value="votes" data-shortcut="V">
            Votes</a>
</div>

                            </div>
                        </div>
                            
                    </div>


                                          
<a name="1647679"></a>
<div id="answer-1647679" class="answer accepted-answer" data-answerid="1647679"  itemprop="acceptedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1647679">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="171">171</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1647679/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>State machines that I've designed before (C, not C++) have all come down to a <code>struct</code> array and a loop. The structure basically consists of a state and event (for look-up) and a function that returns the new state, something like:</p>

<pre><code>typedef struct {
    int st;
    int ev;
    int (*fn)(void);
} tTransition;
</code></pre>

<p>Then you define your states and events with simple defines (the <code>ANY</code> ones are special markers, see below):</p>

<pre><code>#define ST_ANY              -1
#define ST_INIT              0
#define ST_ERROR             1
#define ST_TERM              2
: :
#define EV_ANY              -1
#define EV_KEYPRESS       5000
#define EV_MOUSEMOVE      5001
</code></pre>

<p>Then you define all the functions that are called by the transitions:</p>

<pre><code>static int GotKey (void) { ... };
static int FsmError (void) { ... };
</code></pre>

<p>All these function are written to take no variables and return the new state for the state machine. In this example global variables are used for passing any information into the state functions where necessary.</p>

<p>Using globals isn't as bad as it sounds since the FSM is usually locked up inside a single compilation unit and all variables are static to that unit (which is why I used quotes around "global" above - they're more shared within the FSM, than truly global). As with all globals, it requires care.</p>

<p>The transitions array then defines all possible transitions and the functions that get called for those transitions (including the catch-all last one):</p>

<pre><code>tTransition trans[] = {
    { ST_INIT, EV_KEYPRESS, &amp;GotKey},
    : :
    { ST_ANY, EV_ANY, &amp;FsmError}
};
#define TRANS_COUNT (sizeof(trans)/sizeof(*trans))
</code></pre>

<p>What that means is: if you're in the <code>ST_INIT</code> state and you receive the <code>EV_KEYPRESS</code> event, make a call to <code>GotKey</code>.</p>

<p>The workings of the FSM then become a relatively simple loop:</p>

<pre><code>state = ST_INIT;
while (state != ST_TERM) {
    event = GetNextEvent();
    for (i = 0; i &lt; TRANS_COUNT; i++) {
        if ((state == trans[i].st) || (ST_ANY == trans[i].st)) {
            if ((event == trans[i].ev) || (EV_ANY == trans[i].ev)) {
                state = (trans[i].fn)();
                break;
            }
        }
    }
}
</code></pre>

<p>As alluded to above, note the use of <code>ST_ANY</code> as wild-cards, allowing an event to call a function no matter the current state. <code>EV_ANY</code> also works similarly, allowing any event at a specific state to call a function.</p>

<p>It can also guarantee that, if you reach the end of the transitions array, you get an error stating your FSM hasn't been built correctly (by using the <code>ST_ANY/EV_ANY</code> combination.</p>

<p>I've used code similar for this on a great many communications projects, such as an early implementation of communications stacks and protocols for embedded systems. The big advantage was its simplicity and relative ease in changing the transitions array.</p>

<p>I've no doubt there will be higher-level abstractions which may be more suitable nowadays but I suspect they'll all boil down to this same sort of structure. </p>

<hr>

<p>And, as <code>ldog</code> states in a comment, you can avoid the globals altogether by passing a structure pointer to all functions (and using that in the event loop). This will allow multiple state machines to run side-by-side without interference.</p>

<p>Just create a structure type which holds the machine-specific data (state at a bare minimum) and use that instead of the globals.</p>

<p>The reason I've rarely done that is simply because most of the state machines I've written have been singleton types (one-off, at-process-start, configuration file reading for example), not needing to run more than one instance. But it has value if you need to run more than one.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-10-30T02:25:21"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1647679"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f3.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 3.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1647679/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1647679" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>
            <div class="post-signature grid--cell fl0">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/1647679/revisions" title="show all edits to this post"
                         class="js-gps-track"
                         data-gps-track="post.click({ item: 4, priv: 0, post_type: 2 })">edited <span title="2017-01-01 14:05:32Z" class="relativetime">Jan 1 '17 at 14:05</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="/users/16432/joakim"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/bbbab6ce78c8eefe949983ecb09063c5?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/16432/joakim">Joakim</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">9,293</span><span title="8 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">8</span></span><span class="v-visible-sr">8 gold badges</span><span title="40 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">40</span></span><span class="v-visible-sr">40 silver badges</span><span title="48 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">48</span></span><span class="v-visible-sr">48 bronze badges</span>
        </div>
    </div>
</div>            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-10-30 02:25:21Z" class="relativetime">Oct 30 '09 at 2:25</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/14860/paxdiablo"><div class="gravatar-wrapper-32"><img src="https://i.stack.imgur.com/vXG1F.png?s=32&amp;g=1" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/14860/paxdiablo">paxdiablo</a><span class="d-none" itemprop="name">paxdiablo</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 737,280" dir="ltr">737k</span><span title="199 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">199</span></span><span class="v-visible-sr">199 gold badges</span><span title="1424 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">1424</span></span><span class="v-visible-sr">1424 silver badges</span><span title="1794 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">1794</span></span><span class="v-visible-sr">1794 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1647679" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="1647679" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="10"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-1518725" class="comment js-comment " data-comment-id="1518725">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="hot">24</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">A giant switch mixes code in with the FSM. Even if there&#39;s only a function call per transition, there&#39;s still <i>some</i> code, and it&#39;s easy for someone to abuse that by just adding a small 4-line transition inline. hen a ten-line one. Then it gets out of hand. With the struct array, the FSM stays clean - you can see every transition and the effect (function). And I started when enums were a twinkle in ISO&#39;s eye, writing code for 6809 embedded platforms with compilers that were, shall we say, less than perfect :-)</span>
                
&ndash;&nbsp;<a href="/users/14860/paxdiablo"
                       title="737,280 reputation"
                       class="comment-user">paxdiablo</a>
                <span class="comment-date" dir="ltr"><span title="2009-10-30 05:18:07Z, License: CC BY-SA 2.5" class="relativetime-clean">Oct 30 '09 at 5:18</span></span>
            </div>
        </div>
    </li>
    <li id="comment-1518728" class="comment js-comment " data-comment-id="1518728">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="warm">5</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">You&#39;re right, enums would be better, but I still prefer having the FSM as a struct array. Then it&#39;s all run by data rather than code (well, there&#39;s some code but the chance of stuffing up that FSM loop I gave is slim).</span>
                
&ndash;&nbsp;<a href="/users/14860/paxdiablo"
                       title="737,280 reputation"
                       class="comment-user">paxdiablo</a>
                <span class="comment-date" dir="ltr"><span title="2009-10-30 05:19:43Z, License: CC BY-SA 2.5" class="relativetime-clean">Oct 30 '09 at 5:19</span></span>
            </div>
        </div>
    </li>
    <li id="comment-1519913" class="comment js-comment " data-comment-id="1519913">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">2</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">This is good, for process controle state machines I used to always add three (possibly empty) substates for every state, so that the call for a state function would become GotKey(substate), where substate would be: - SS_ENTRY - SS_RUN - SS_EXIT  Basically, the state function gets called with a SS_ENTRY substate on entry, so that the state can reconstruct a status (e.g. actuators positions). While there&#39;s no transition, the SS_RUN substate value gets passed. Upon transition, the state function gets called with the SS_EXIT substate, so that it can do any cleanups (e.g. deallocate resources).</span>
                
&ndash;&nbsp;<a href="/users/107969/metiu"
                       title="1,557 reputation"
                       class="comment-user">Metiu</a>
                <span class="comment-date" dir="ltr"><span title="2009-10-30 11:07:31Z, License: CC BY-SA 2.5" class="relativetime-clean">Oct 30 '09 at 11:07</span></span>
            </div>
        </div>
    </li>
    <li id="comment-5092375" class="comment js-comment " data-comment-id="5092375">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="warm">13</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">You mentioned that you share data by using globals, but it would probably be cleaner if you define the state functions to be <code>int (*fn)(void*);</code> where <code>void*</code> is the pointer to the data that each state function takes in as a parameter. Then the state functions can either use the data or ignore them.</span>
                
&ndash;&nbsp;<a href="/users/177931/ldog"
                       title="9,984 reputation"
                       class="comment-user">ldog</a>
                <span class="comment-date" dir="ltr"><span title="2011-01-07 19:15:00Z, License: CC BY-SA 2.5" class="relativetime-clean">Jan 7 '11 at 19:15</span></span>
            </div>
        </div>
    </li>
    <li id="comment-5718886" class="comment js-comment " data-comment-id="5718886">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="warm">13</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">I use the same data/code separation for writing FSMs, except that it never occurred to me to introduce &#39;wildcard&#39; states. Interesting idea! However, iterating the array of transitions might become expensive if you have a lot of states (which was the case for me since the C code was automatically generated). In such situations, it would be more efficient to have one array of transitions per state. So a state is no longer an enum value, but a transition table. That way, you don&#39;t have to iterate over <i>all</i> transitions in the machine but just those which are relevant to the current state.</span>
                
&ndash;&nbsp;<a href="/users/91757/frerich-raabe"
                       title="78,501 reputation"
                       class="comment-user">Frerich Raabe</a>
                <span class="comment-date" dir="ltr"><span title="2011-02-24 08:19:39Z, License: CC BY-SA 2.5" class="relativetime-clean">Feb 24 '11 at 8:19</span></span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-1647679" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link dno" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button"></a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link " title="expand to show all comments on this post" href=# onclick="" role="button">show <b>10</b> more comments</a>
        </div>         
    </div>
    </div>
</div>

<div class="js-zone-container zone-container-main">
    <div id="dfp-mlb" class="everyonelovesstackoverflow everyoneloves__mid-leaderboard everyoneloves__leaderboard"></div>
    <div class="js-report-ad-button-container " style="width: 728px"></div>
</div>
                                          
<a name="1648098"></a>
<div id="answer-1648098" class="answer" data-answerid="1648098"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1648098">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="79">79</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1648098/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>The other answers are good, but a very "lightweight" implementation I've used when the state machine is very simple looks like:</p>

<pre><code>enum state { ST_NEW, ST_OPEN, ST_SHIFT, ST_END };

enum state current_state = ST_NEW;

while (current_state != ST_END)
{
    input = get_input();

    switch (current_state)
    {
        case ST_NEW:
        /* Do something with input and set current_state */
        break;

        case ST_OPEN:
        /* Do something different and set current_state */
        break;

        /* ... etc ... */
    }
}
</code></pre>

<p>I would use this when the state machine is simple enough that the function pointer &amp; state transition table approach is overkill.  This is often useful for character-by-character or word-by-word parsing.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-10-30T05:04:36"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1648098"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f2.5%2f"
       data-se-share-sheet-license-name="CC BY-SA 2.5"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1648098/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1648098" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2009-10-30 05:04:36Z" class="relativetime">Oct 30 '09 at 5:04</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/134633/caf"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/134633/caf">caf</a><span class="d-none" itemprop="name">caf</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 210,293" dir="ltr">210k</span><span title="34 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">34</span></span><span class="v-visible-sr">34 gold badges</span><span title="276 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">276</span></span><span class="v-visible-sr">276 silver badges</span><span title="423 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">423</span></span><span class="v-visible-sr">423 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1648098" class="comments js-comments-container bt bc-black-2 mt12  dno" data-post-id="1648098" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

            </ul>
	    </div>

        <div id="comments-link-1648098" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="1653317"></a>
<div id="answer-1653317" class="answer" data-answerid="1653317"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1653317">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="38">38</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1653317/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>Pardon me for breaking every rule in computer science, but a state machine is one of the few (I can count only two off hand) places where a <code>goto</code> statement is not only more efficient, but also makes your code cleaner and easier to read. Because <code>goto</code> statements are based on labels, you can name your states instead of having to keep track of a mess of numbers or use an enum. It also makes for much cleaner code since you don't need all the extra cruft of function pointers or huge switch statements and while loops. Did I mention it's more efficient too?</p>

<p>Here's what a state machine might look like:</p>

<pre><code>void state_machine() {
first_state:
    // Do some stuff here
    switch(some_var) {
    case 0:
        goto first_state;
    case 1:
        goto second_state;
    default:
        return;
    }

second_state:
    // Do some stuff here
    switch(some_var) {
    case 0:
        goto first_state;
    case 1:
        goto second_state;
    default:
        return;
    }
}
</code></pre>

<p>You get the general idea. The point is that you can implement the state machine in an efficient way and one that is relatively easy to read and screams at the reader that they are looking at a state machine. Note that if you are using <code>goto</code> statements, you must still be careful as it is very easy to shoot yourself in the foot while doing so.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-10-31T03:33:31"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1653317"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f4.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 4.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1653317/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1653317" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>
            <div class="post-signature grid--cell fl0">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="/posts/1653317/revisions" title="show all edits to this post"
                         class="js-gps-track"
                         data-gps-track="post.click({ item: 4, priv: 0, post_type: 2 })">edited <span title="2018-11-03 04:50:38Z" class="relativetime">Nov 3 '18 at 4:50</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="/users/15168/jonathan-leffler"><div class="gravatar-wrapper-32"><img src="https://i.stack.imgur.com/WtEI9.png?s=32&amp;g=1" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/15168/jonathan-leffler">Jonathan Leffler</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 641,640" dir="ltr">642k</span><span title="111 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">111</span></span><span class="v-visible-sr">111 gold badges</span><span title="777 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">777</span></span><span class="v-visible-sr">777 silver badges</span><span title="1149 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">1149</span></span><span class="v-visible-sr">1149 bronze badges</span>
        </div>
    </div>
</div>            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2009-10-31 03:33:31Z" class="relativetime">Oct 31 '09 at 3:33</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/193325/jason-e"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/c6988b7ea6112e3e892765a0d4287e0c?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/193325/jason-e">Jason E</a><span class="d-none" itemprop="name">Jason E</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">643</span><span title="4 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">4</span></span><span class="v-visible-sr">4 silver badges</span><span title="5 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">5</span></span><span class="v-visible-sr">5 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1653317" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="1653317" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="1"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-3427071" class="comment js-comment " data-comment-id="3427071">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">4</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">This only works if the state machine is in the top-level object. The moment some other object that is occasionally polled / sent messages to, needs to have state, you&#39;re stuck with this approach (that, or you have to make it much more complicated)</span>
                
&ndash;&nbsp;<a href="/users/103395/skrebbel"
                       title="9,427 reputation"
                       class="comment-user">skrebbel</a>
                <span class="comment-date" dir="ltr"><span title="2010-07-22 09:25:29Z, License: CC BY-SA 2.5" class="relativetime-clean">Jul 22 '10 at 9:25</span></span>
            </div>
        </div>
    </li>
    <li id="comment-10644393" class="comment js-comment " data-comment-id="10644393">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">1</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">This really forces you to use preemptive multitasking in all but the simplest of cases.</span>
                
&ndash;&nbsp;<a href="/users/60075/craig-mcqueen"
                       title="35,752 reputation"
                       class="comment-user">Craig McQueen</a>
                <span class="comment-date" dir="ltr"><span title="2011-12-20 22:38:26Z, License: CC BY-SA 3.0" class="relativetime-clean">Dec 20 '11 at 22:38</span></span>
            </div>
        </div>
    </li>
    <li id="comment-16549125" class="comment js-comment " data-comment-id="16549125">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">1</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">Those gotos could be replaced with function calls. And if a profiler tells you that your program is drowning because of function call overhead, then you could replace the calls with gotos as needed.</span>
                
&ndash;&nbsp;<a href="/users/52515/abtin-forouzandeh"
                       title="4,751 reputation"
                       class="comment-user">Abtin Forouzandeh</a>
                <span class="comment-date" dir="ltr"><span title="2012-09-08 09:29:49Z, License: CC BY-SA 3.0" class="relativetime-clean">Sep 8 '12 at 9:29</span></span>
            </div>
        </div>
    </li>
    <li id="comment-18654668" class="comment js-comment " data-comment-id="18654668">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="warm">7</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">@AbtinForouzandeh simply replacing the gotos with function calls would cause a stackoverflow since the call stack is only cleared in case of an error.</span>
                
&ndash;&nbsp;<a href="/users/191733/justmaximumpower"
                       title="1,117 reputation"
                       class="comment-user">JustMaximumPower</a>
                <span class="comment-date" dir="ltr"><span title="2012-11-28 14:13:35Z, License: CC BY-SA 3.0" class="relativetime-clean">Nov 28 '12 at 14:13</span></span>
            </div>
        </div>
    </li>
    <li id="comment-77668433" class="comment js-comment " data-comment-id="77668433">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">I agree with the goto method. Here is a set of macros that illustrate that. And the macros make your code structured as if you had coded it like you normally would. It also works at interrupt level which is usually where state machines are needed <a href="https://www.codeproject.com/Articles/37037/Macros-to-simulate-multi-tasking-blocking-code-at" rel="nofollow noreferrer">codeproject.com/Articles/37037/&hellip;</a></span>
                
&ndash;&nbsp;<a href="/users/215779/eddyq"
                       title="725 reputation"
                       class="comment-user">eddyq</a>
                <span class="comment-date" dir="ltr"><span title="2017-07-27 14:22:17Z, License: CC BY-SA 3.0" class="relativetime-clean">Jul 27 '17 at 14:22</span></span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-1653317" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link dno" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button"></a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link " title="expand to show all comments on this post" href=# onclick="" role="button">show <b>1</b> more comment</a>
        </div>         
    </div>
    </div>
</div>

<div class="js-zone-container zone-container-main">
    <div id="dfp-smlb" class="everyonelovesstackoverflow everyoneloves__mid-second-leaderboard everyoneloves__leaderboard"></div>
    <div class="js-report-ad-button-container " style="width: 728px"></div>
</div>
                                          
<a name="1651187"></a>
<div id="answer-1651187" class="answer" data-answerid="1651187"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1651187">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="30">30</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1651187/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>You might consider the State Machine Compiler <a href="http://smc.sourceforge.net/" rel="noreferrer" title="State Machine Compiler on SourceForge">http://smc.sourceforge.net/</a></p>

<p>This splendid open source utility accepts a description of a state machine in a simple language and compiles it to any one of a dozen or so languages - including C and C++. The utility itself is written in Java, and can be included as part of a build.</p>

<p>The reason to do this, rather than hand coding using GoF State pattern or any other approach, is that once your state machine is expressed as code, the underlying structure tends to disappear under the weight of boilerplate that needs to be generated to support it. Using this approach gives you an excellent separation of concerns, and you keep the structure of your state machine 'visible'. The auto-generated code goes into modules that you don't need to touch, so that you can go back and fiddle with the state machine's structure without impacting the supporting code that you have written.</p>

<p>Sorry, I am being over-enthusiastic, and doubtless putting everyone off. But it is a top notch utility, and well-documented too.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-10-30T17:21:16"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1651187"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f2.5%2f"
       data-se-share-sheet-license-name="CC BY-SA 2.5"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1651187/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1651187" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-10-30 17:21:16Z" class="relativetime">Oct 30 '09 at 17:21</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/66081/willw"><div class="gravatar-wrapper-32"><img src="https://i.stack.imgur.com/O5xEp.jpg?s=32&amp;g=1" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/66081/willw">willw</a><span class="d-none" itemprop="name">willw</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">1,298</span><span title="11 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">11</span></span><span class="v-visible-sr">11 silver badges</span><span title="23 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">23</span></span><span class="v-visible-sr">23 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1651187" class="comments js-comments-container bt bc-black-2 mt12  dno" data-post-id="1651187" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

            </ul>
	    </div>

        <div id="comments-link-1651187" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="1648612"></a>
<div id="answer-1648612" class="answer" data-answerid="1648612"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1648612">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="20">20</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1648612/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>Be sure to check the work of Miro Samek (blog <a href="https://web.archive.org/web/20100107034144/http://www.embeddedgurus.net/state-space/" rel="nofollow noreferrer">State Space</a>, website <a href="http://www.state-machine.com/" rel="nofollow noreferrer">State Machines &amp; Tools</a>), whose articles at the <em>C/C++ Users Journal</em> were great.</p>
<p>The website contains a complete (C/C++) implementation in both open source and commercial license of a <strong>state machine framework (QP Framework)</strong>, an <strong>event handler (QEP)</strong>, a <strong>basic modeling tool (QM)</strong> and a <strong>tracing tool (QSpy)</strong> which allow to draw state machines, create code and debug them.</p>
<p>The book contains an extensive explanation on the what/why of the implementation and how to use it and is also great material to gain understanding of the fundamentals of hierachical and finite state machines.</p>
<p>The website also contains links to several board support packages for use of the software with embedded platforms.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-10-30T08:29:07"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1648612"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f4.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 4.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1648612/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1648612" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>
            <div class="post-signature grid--cell fl0">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="/posts/1648612/revisions" title="show all edits to this post"
                         class="js-gps-track"
                         data-gps-track="post.click({ item: 4, priv: 0, post_type: 2 })">edited <span title="2020-08-02 21:04:25Z" class="relativetime">Aug 2 at 21:04</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="/users/-1/community"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/-1/community">Community</a><span class="mod-flair " title="moderator">&#9830;</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">1</span><span title="1 silver badge" aria-hidden="true"><span class="badge2"></span><span class="badgecount">1</span></span><span class="v-visible-sr">1 silver badge</span>
        </div>
    </div>
</div>            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-10-30 08:29:07Z" class="relativetime">Oct 30 '09 at 8:29</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/96780/daniel-daranas"><div class="gravatar-wrapper-32"><img src="https://i.stack.imgur.com/PPilI.jpg?s=32&amp;g=1" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/96780/daniel-daranas">Daniel Daranas</a><span class="d-none" itemprop="name">Daniel Daranas</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 21,395" dir="ltr">21.4k</span><span title="9 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">9</span></span><span class="v-visible-sr">9 gold badges</span><span title="59 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">59</span></span><span class="v-visible-sr">59 silver badges</span><span title="106 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">106</span></span><span class="v-visible-sr">106 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1648612" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="1648612" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-1519853" class="comment js-comment " data-comment-id="1519853">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">I modified the question&#39;s title according following your pun.</span>
                
&ndash;&nbsp;<a href="/users/171461/jldupont"
                       title="78,686 reputation"
                       class="comment-user owner">jldupont</a>
                <span class="comment-date" dir="ltr"><span title="2009-10-30 10:55:08Z, License: CC BY-SA 2.5" class="relativetime-clean">Oct 30 '09 at 10:55</span></span>
            </div>
        </div>
    </li>
    <li id="comment-1520702" class="comment js-comment " data-comment-id="1520702">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">@jldupont: I just meant that it was better to clarify. I have deleted the irrelevant parts of my answer now.</span>
                
&ndash;&nbsp;<a href="/users/96780/daniel-daranas"
                       title="21,395 reputation"
                       class="comment-user">Daniel Daranas</a>
                <span class="comment-date" dir="ltr"><span title="2009-10-30 13:37:00Z, License: CC BY-SA 2.5" class="relativetime-clean">Oct 30 '09 at 13:37</span></span>
            </div>
        </div>
    </li>
    <li id="comment-10281454" class="comment js-comment " data-comment-id="10281454">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">1</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">I&#39;ve added what to expect on website/book, having used the software succesfully myself; it is the best book on my book shelf.</span>
                
&ndash;&nbsp;<a href="/users/147820/adriaan"
                       title="3,202 reputation"
                       class="comment-user">Adriaan</a>
                <span class="comment-date" dir="ltr"><span title="2011-12-01 08:22:33Z, License: CC BY-SA 3.0" class="relativetime-clean">Dec 1 '11 at 8:22</span></span>
            </div>
        </div>
    </li>
    <li id="comment-10281759" class="comment js-comment " data-comment-id="10281759">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">@Adriann, great explanation! I just modified the home of the website, the previous link had stopped working.</span>
                
&ndash;&nbsp;<a href="/users/96780/daniel-daranas"
                       title="21,395 reputation"
                       class="comment-user">Daniel Daranas</a>
                <span class="comment-date" dir="ltr"><span title="2011-12-01 08:45:05Z, License: CC BY-SA 3.0" class="relativetime-clean">Dec 1 '11 at 8:45</span></span>
            </div>
        </div>
    </li>
    <li id="comment-32198191" class="comment js-comment " data-comment-id="32198191">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">2</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">The links are either dead or point to the homepage of the site that seems to have changed its direction to embedded software. You can still see some of the content on <a href="http://www.state-machine.com/resources/articles.php" rel="nofollow noreferrer">state-machine.com/resources/articles.php</a>, but even there most of the state machine-related links are dead.  This is one of the only good links there: <a href="http://www.state-machine.com/resources/A_Crash_Course_in_UML_State_Machines.pdf" rel="nofollow noreferrer">state-machine.com/resources/&hellip;</a></span>
                
&ndash;&nbsp;<a href="/users/132042/tatiana-racheva"
                       title="1,088 reputation"
                       class="comment-user">Tatiana Racheva</a>
                <span class="comment-date" dir="ltr"><span title="2014-01-25 19:12:24Z, License: CC BY-SA 3.0" class="relativetime-clean">Jan 25 '14 at 19:12</span></span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-1648612" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="1651117"></a>
<div id="answer-1651117" class="answer" data-answerid="1651117"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1651117">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="11">11</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1651117/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>I've done something similar to what paxdiablo describes, only instead of an array of state/event transitions, I set up a 2-dimensional array of function pointers, with the event value as the index of one axis and the current state value as the other. Then I just call <code>state = state_table[event][state](params)</code> and the right thing happens. Cells representing invalid state/event combinations get a pointer to a function that says so, of course. </p>

<p>Obviously, this only works if the state and event values are both contiguous ranges and start at 0 or close enough.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-10-30T17:06:56"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1651117"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f2.5%2f"
       data-se-share-sheet-license-name="CC BY-SA 2.5"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1651117/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1651117" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2009-10-30 17:06:56Z" class="relativetime">Oct 30 '09 at 17:06</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/8130/ceo"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/209df0fed6f7a397cfdb2156902fb74a?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/8130/ceo">ceo</a><span class="d-none" itemprop="name">ceo</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">1,088</span><span title="1 gold badge" aria-hidden="true"><span class="badge1"></span><span class="badgecount">1</span></span><span class="v-visible-sr">1 gold badge</span><span title="8 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">8</span></span><span class="v-visible-sr">8 silver badges</span><span title="16 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">16</span></span><span class="v-visible-sr">16 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1651117" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="1651117" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-1522299" class="comment js-comment " data-comment-id="1522299">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">1</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">Feels like this solution doesn&#39;t scale nicely: too much table filling, no?</span>
                
&ndash;&nbsp;<a href="/users/171461/jldupont"
                       title="78,686 reputation"
                       class="comment-user owner">jldupont</a>
                <span class="comment-date" dir="ltr"><span title="2009-10-30 17:19:19Z, License: CC BY-SA 2.5" class="relativetime-clean">Oct 30 '09 at 17:19</span></span>
            </div>
        </div>
    </li>
    <li id="comment-1523955" class="comment js-comment " data-comment-id="1523955">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">2</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">+1. The scaling issue here is memory - my own solution has a scaling issue re time, i.e., time taken to scan the transitions table (though you can manually optimize for the most common transitions). This one sacrifices memory for speed - it&#39;s just a trade-off. You&#39;d probably need checks for bounds but it&#39;s not a bad solution.</span>
                
&ndash;&nbsp;<a href="/users/14860/paxdiablo"
                       title="737,280 reputation"
                       class="comment-user">paxdiablo</a>
                <span class="comment-date" dir="ltr"><span title="2009-10-30 22:32:45Z, License: CC BY-SA 2.5" class="relativetime-clean">Oct 30 '09 at 22:32</span></span>
            </div>
        </div>
    </li>
    <li id="comment-1530579" class="comment js-comment " data-comment-id="1530579">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">Guys - My comment didn&#39;t come out as intended: I meant it is much more laborious and error prone. If you add a state/event, lots of editing needs to be done.</span>
                
&ndash;&nbsp;<a href="/users/171461/jldupont"
                       title="78,686 reputation"
                       class="comment-user owner">jldupont</a>
                <span class="comment-date" dir="ltr"><span title="2009-11-01 22:42:03Z, License: CC BY-SA 2.5" class="relativetime-clean">Nov 1 '09 at 22:42</span></span>
            </div>
        </div>
    </li>
    <li id="comment-1655092" class="comment js-comment " data-comment-id="1655092">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">3</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">Nobody said the 2D array was initialized by hand.  Maybe there&#39;s something that reads a configuration file and creates it (or at least there certainly could be).</span>
                
&ndash;&nbsp;<a href="/users/4323/john-zwinck"
                       title="192,961 reputation"
                       class="comment-user">John Zwinck</a>
                <span class="comment-date" dir="ltr"><span title="2009-11-20 13:48:20Z, License: CC BY-SA 2.5" class="relativetime-clean">Nov 20 '09 at 13:48</span></span>
            </div>
        </div>
    </li>
    <li id="comment-94925450" class="comment js-comment " data-comment-id="94925450">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">One way to initialize arrays like that is to make use of the preprocessor being a <i>late binder</i> (as opposed to early binding). You define a list of all the states <code>#define STATE_LIST() \STATE_LIST_ENTRY(state1)\STATE_LIST_ENTRY(state2)\...</code> (an implied newline after each <code>\ </code>) where you (re)define the entry macro when you use the STATE_LIST macro. Example - making an array of state names: <code>#define STATE_LIST_ENTRY(s) #s , \n const char *state_names[] = { STATE_LIST() };\n #undef STATE_LIST_ENTRY</code>. Some work to set up first, but this is extremely powerful. Add new state -&gt; guaranteed no misses.</span>
                
&ndash;&nbsp;<a href="/users/23118/hlovdal"
                       title="22,352 reputation"
                       class="comment-user">hlovdal</a>
                <span class="comment-date" dir="ltr"><span title="2019-01-04 19:27:10Z, License: CC BY-SA 4.0" class="relativetime-clean">Jan 4 '19 at 19:27</span></span>
                        <span title="this comment was edited 3 times">
                            <svg aria-hidden="true" class="va-text-bottom o50 svg-icon iconPencilSm" width="14" height="14" viewBox="0 0 14 14"><path d="M11.1 1.71l1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0zM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88z"/></svg>
                        </span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-1651117" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="15015969"></a>
<div id="answer-15015969" class="answer" data-answerid="15015969"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="15015969">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="9">9</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/15015969/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>A very nice template-based C++ state machine "framework" is given by Stefan Heinzmann in his <a href="http://accu.org/index.php/journals/252" rel="nofollow">article</a>.</p>

<p>Since there's no link to a complete code download in the article, I've taken the liberty to paste the code into a project and check it out. The stuff below is tested and includes the few minor but pretty much obvious missing pieces.</p>

<p>The major innovation here is that the compiler is generating very efficient code. Empty entry/exit actions have no cost. Non-empty entry/exit actions are inlined. The compiler is also verifying the completeness of the statechart. Missing actions generate linking errors. The only thing that is not caught is the missing <code>Top::init</code>.</p>

<p>This is a very nice alternative to Miro Samek's implementation, if you can live without what's missing -- this is far from a complete UML Statechart implementation, although it correctly implements the UML semantics, whereas Samek's code by design doesn't handle exit/transition/entry actions in correct order.</p>

<p>If this code works for what you need to do, and you have a decent C++ compiler for your system, it will probably perform better than Miro's C/C++ implementation. The compiler generates a flattened, O(1) transition state machine implementation for you. If the audit of assembly output confirms that the optimizations work as desired, you get close to theoretical performance. Best part: it's relatively tiny, easy to understand code.</p>

<pre><code>#ifndef HSM_HPP
#define HSM_HPP

// This code is from:
// Yet Another Hierarchical State Machine
// by Stefan Heinzmann
// Overload issue 64 december 2004
// http://accu.org/index.php/journals/252

/* This is a basic implementation of UML Statecharts.
 * The key observation is that the machine can only
 * be in a leaf state at any given time. The composite
 * states are only traversed, never final.
 * Only the leaf states are ever instantiated. The composite
 * states are only mechanisms used to generate code. They are
 * never instantiated.
 */

// Helpers

// A gadget from Herb Sutter's GotW #71 -- depends on SFINAE
template&lt;class D, class B&gt;
class IsDerivedFrom {
    class Yes { char a[1]; };
    class No  { char a[10]; };
    static Yes Test(B*); // undefined
    static No Test(...); // undefined
public:
    enum { Res = sizeof(Test(static_cast&lt;D*&gt;(0))) == sizeof(Yes) ? 1 : 0 };
};

template&lt;bool&gt; class Bool {};

// Top State, Composite State and Leaf State

template &lt;typename H&gt;
struct TopState {
    typedef H Host;
    typedef void Base;
    virtual void handler(Host&amp;) const = 0;
    virtual unsigned getId() const = 0;
};

template &lt;typename H, unsigned id, typename B&gt;
struct CompState;

template &lt;typename H, unsigned id, typename B = CompState&lt;H, 0, TopState&lt;H&gt; &gt; &gt;
struct CompState : B {
    typedef B Base;
    typedef CompState&lt;H, id, Base&gt; This;
    template &lt;typename X&gt; void handle(H&amp; h, const X&amp; x) const { Base::handle(h, x); }
    static void init(H&amp;); // no implementation
    static void entry(H&amp;) {}
    static void exit(H&amp;) {}
};

template &lt;typename H&gt;
struct CompState&lt;H, 0, TopState&lt;H&gt; &gt; : TopState&lt;H&gt; {
    typedef TopState&lt;H&gt; Base;
    typedef CompState&lt;H, 0, Base&gt; This;
    template &lt;typename X&gt; void handle(H&amp;, const X&amp;) const {}
    static void init(H&amp;); // no implementation
    static void entry(H&amp;) {}
    static void exit(H&amp;) {}
};

template &lt;typename H, unsigned id, typename B = CompState&lt;H, 0, TopState&lt;H&gt; &gt; &gt;
struct LeafState : B {
    typedef H Host;
    typedef B Base;
    typedef LeafState&lt;H, id, Base&gt; This;
    template &lt;typename X&gt; void handle(H&amp; h, const X&amp; x) const { Base::handle(h, x); }
    virtual void handler(H&amp; h) const { handle(h, *this); }
    virtual unsigned getId() const { return id; }
    static void init(H&amp; h) { h.next(obj); } // don't specialize this
    static void entry(H&amp;) {}
    static void exit(H&amp;) {}
    static const LeafState obj; // only the leaf states have instances
};

template &lt;typename H, unsigned id, typename B&gt;
const LeafState&lt;H, id, B&gt; LeafState&lt;H, id, B&gt;::obj;

// Transition Object

template &lt;typename C, typename S, typename T&gt;
// Current, Source, Target
struct Tran {
    typedef typename C::Host Host;
    typedef typename C::Base CurrentBase;
    typedef typename S::Base SourceBase;
    typedef typename T::Base TargetBase;
    enum { // work out when to terminate template recursion
        eTB_CB = IsDerivedFrom&lt;TargetBase, CurrentBase&gt;::Res,
        eS_CB = IsDerivedFrom&lt;S, CurrentBase&gt;::Res,
        eS_C = IsDerivedFrom&lt;S, C&gt;::Res,
        eC_S = IsDerivedFrom&lt;C, S&gt;::Res,
        exitStop = eTB_CB &amp;&amp; eS_C,
        entryStop = eS_C || eS_CB &amp;&amp; !eC_S
    };
    // We use overloading to stop recursion.
    // The more natural template specialization
    // method would require to specialize the inner
    // template without specializing the outer one,
    // which is forbidden.
    static void exitActions(Host&amp;, Bool&lt;true&gt;) {}
    static void exitActions(Host&amp;h, Bool&lt;false&gt;) {
        C::exit(h);
        Tran&lt;CurrentBase, S, T&gt;::exitActions(h, Bool&lt;exitStop&gt;());
    }
    static void entryActions(Host&amp;, Bool&lt;true&gt;) {}
    static void entryActions(Host&amp; h, Bool&lt;false&gt;) {
        Tran&lt;CurrentBase, S, T&gt;::entryActions(h, Bool&lt;entryStop&gt;());
        C::entry(h);
    }
    Tran(Host &amp; h) : host_(h) {
        exitActions(host_, Bool&lt;false&gt;());
    }
    ~Tran() {
        Tran&lt;T, S, T&gt;::entryActions(host_, Bool&lt;false&gt;());
        T::init(host_);
    }
    Host&amp; host_;
};

// Initializer for Compound States

template &lt;typename T&gt;
struct Init {
    typedef typename T::Host Host;
    Init(Host&amp; h) : host_(h) {}
    ~Init() {
        T::entry(host_);
        T::init(host_);
    }
    Host&amp; host_;
};

#endif // HSM_HPP
</code></pre>

<p>Test code follows.</p>

<pre><code>#include &lt;cstdio&gt;
#include "hsm.hpp"
#include "hsmtest.hpp"

/* Implements the following state machine from Miro Samek's
 * Practical Statecharts in C/C++
 *
 * |-init-----------------------------------------------------|
 * |                           s0                             |
 * |----------------------------------------------------------|
 * |                                                          |
 * |    |-init-----------|        |-------------------------| |
 * |    |       s1       |---c---&gt;|            s2           | |
 * |    |----------------|&lt;--c----|-------------------------| |
 * |    |                |        |                         | |
 * |&lt;-d-| |-init-------| |        | |-init----------------| | |
 * |    | |     s11    |&lt;----f----| |          s21        | | |
 * | /--| |------------| |        | |---------------------| | |
 * | a  | |            | |        | |                     | | |
 * | \-&gt;| |            |------g---------&gt;|-init------|    | | |
 * |    | |____________| |        | |-b-&gt;|    s211   |---g---&gt;|
 * |    |----b---^       |------f-------&gt;|           |    | | |
 * |    |________________|        | |&lt;-d-|___________|&lt;--e----|
 * |                              | |_____________________| | |
 * |                              |_________________________| |
 * |__________________________________________________________|
 */

class TestHSM;

typedef CompState&lt;TestHSM,0&gt;     Top;
typedef CompState&lt;TestHSM,1,Top&gt;   S0;
typedef CompState&lt;TestHSM,2,S0&gt;      S1;
typedef LeafState&lt;TestHSM,3,S1&gt;        S11;
typedef CompState&lt;TestHSM,4,S0&gt;      S2;
typedef CompState&lt;TestHSM,5,S2&gt;        S21;
typedef LeafState&lt;TestHSM,6,S21&gt;         S211;

enum Signal { A_SIG, B_SIG, C_SIG, D_SIG, E_SIG, F_SIG, G_SIG, H_SIG };

class TestHSM {
public:
    TestHSM() { Top::init(*this); }
    ~TestHSM() {}
    void next(const TopState&lt;TestHSM&gt;&amp; state) {
        state_ = &amp;state;
    }
    Signal getSig() const { return sig_; }
    void dispatch(Signal sig) {
        sig_ = sig;
        state_-&gt;handler(*this);
    }
    void foo(int i) {
        foo_ = i;
    }
    int foo() const {
        return foo_;
    }
private:
    const TopState&lt;TestHSM&gt;* state_;
    Signal sig_;
    int foo_;
};

bool testDispatch(char c) {
    static TestHSM test;
    if (c&lt;'a' || 'h'&lt;c) {
        return false;
    }
    printf("Signal&lt;-%c", c);
    test.dispatch((Signal)(c-'a'));
    printf("\n");
    return true;
}

int main(int, char**) {
    testDispatch('a');
    testDispatch('e');
    testDispatch('e');
    testDispatch('a');
    testDispatch('h');
    testDispatch('h');
    return 0;
}

#define HSMHANDLER(State) \
    template&lt;&gt; template&lt;typename X&gt; inline void State::handle(TestHSM&amp; h, const X&amp; x) const

HSMHANDLER(S0) {
    switch (h.getSig()) {
    case E_SIG: { Tran&lt;X, This, S211&gt; t(h);
        printf("s0-E;");
        return; }
    default:
        break;
    }
    return Base::handle(h, x);
}

HSMHANDLER(S1) {
    switch (h.getSig()) {
    case A_SIG: { Tran&lt;X, This, S1&gt; t(h);
        printf("s1-A;"); return; }
    case B_SIG: { Tran&lt;X, This, S11&gt; t(h);
        printf("s1-B;"); return; }
    case C_SIG: { Tran&lt;X, This, S2&gt; t(h);
        printf("s1-C;"); return; }
    case D_SIG: { Tran&lt;X, This, S0&gt; t(h);
        printf("s1-D;"); return; }
    case F_SIG: { Tran&lt;X, This, S211&gt; t(h);
        printf("s1-F;"); return; }
    default: break;
    }
    return Base::handle(h, x);
}

HSMHANDLER(S11) {
    switch (h.getSig()) {
    case G_SIG: { Tran&lt;X, This, S211&gt; t(h);
        printf("s11-G;"); return; }
    case H_SIG: if (h.foo()) {
            printf("s11-H");
            h.foo(0); return;
        } break;
    default: break;
    }
    return Base::handle(h, x);
}

HSMHANDLER(S2) {
    switch (h.getSig()) {
    case C_SIG: { Tran&lt;X, This, S1&gt; t(h);
        printf("s2-C"); return; }
    case F_SIG: { Tran&lt;X, This, S11&gt; t(h);
        printf("s2-F"); return; }
    default: break;
    }
    return Base::handle(h, x);
}

HSMHANDLER(S21) {
    switch (h.getSig()) {
    case B_SIG: { Tran&lt;X, This, S211&gt; t(h);
        printf("s21-B;"); return; }
    case H_SIG: if (!h.foo()) {
            Tran&lt;X, This, S21&gt; t(h);
            printf("s21-H;"); h.foo(1);
            return;
        } break;
    default: break;
    }
    return Base::handle(h, x);
}

HSMHANDLER(S211) {
    switch (h.getSig()) {
    case D_SIG: { Tran&lt;X, This, S21&gt; t(h);
        printf("s211-D;"); return; }
    case G_SIG: { Tran&lt;X, This, S0&gt; t(h);
        printf("s211-G;"); return; }
    }
    return Base::handle(h, x);
}

#define HSMENTRY(State) \
    template&lt;&gt; inline void State::entry(TestHSM&amp;) { \
        printf(#State "-ENTRY;"); \
    }

HSMENTRY(S0)
HSMENTRY(S1)
HSMENTRY(S11)
HSMENTRY(S2)
HSMENTRY(S21)
HSMENTRY(S211)

#define HSMEXIT(State) \
    template&lt;&gt; inline void State::exit(TestHSM&amp;) { \
        printf(#State "-EXIT;"); \
    }

HSMEXIT(S0)
HSMEXIT(S1)
HSMEXIT(S11)
HSMEXIT(S2)
HSMEXIT(S21)
HSMEXIT(S211)

#define HSMINIT(State, InitState) \
    template&lt;&gt; inline void State::init(TestHSM&amp; h) { \
       Init&lt;InitState&gt; i(h); \
       printf(#State "-INIT;"); \
    }

HSMINIT(Top, S0)
HSMINIT(S0, S1)
HSMINIT(S1, S11)
HSMINIT(S2, S21)
HSMINIT(S21, S211)
</code></pre>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2013-02-22T02:40:36"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/15015969"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f3.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 3.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/15015969/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-15015969" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>
            <div class="post-signature grid--cell fl0">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/15015969/revisions" title="show all edits to this post"
                         class="js-gps-track"
                         data-gps-track="post.click({ item: 4, priv: 0, post_type: 2 })">edited <span title="2016-04-29 12:29:32Z" class="relativetime">Apr 29 '16 at 12:29</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        
        <div class="-flair">
            
        </div>
    </div>
</div>            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info">
    <div class="user-details">
        <span class="community-wiki" title="This post is community owned as of Feb 22 &#39;13 at 2:40. Votes do not generate reputation, and it can be edited by users with 100 rep">
            community wiki
        </span>
    </div><br>
    <div class="user-details">
        <a id="history-15015969" href="/posts/15015969/revisions" title="show revision history for this post">
        5 revs<br><a href="/users/1329652">Kuba Ober</a>
        </a>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-15015969" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="15015969" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-22121573" class="comment js-comment " data-comment-id="22121573">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">Hmm... sth is missing in your code. First of all you include two headers, but provide only the first one. When I just comment the &quot;include&quot; statement I get this error when compiling:  d:\1\hsm&gt;g++ test.cpp test.cpp:195:1: error: specialization of &#39;static void CompState&lt;H, id, B&gt;::init( H&amp;) [with H = TestHSM; unsigned int id = 0u; B = CompState&lt;TestHSM, 0u, TopState &lt;TestHSM&gt; &gt;]&#39; after instantiation</span>
                
&ndash;&nbsp;<a href="/users/157344/freddie-chopin"
                       title="6,950 reputation"
                       class="comment-user">Freddie Chopin</a>
                <span class="comment-date" dir="ltr"><span title="2013-03-24 14:51:48Z, License: CC BY-SA 3.0" class="relativetime-clean">Mar 24 '13 at 14:51</span></span>
                        <span title="this comment was edited 1 time">
                            <svg aria-hidden="true" class="va-text-bottom o50 svg-icon iconPencilSm" width="14" height="14" viewBox="0 0 14 14"><path d="M11.1 1.71l1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0zM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88z"/></svg>
                        </span>
            </div>
        </div>
    </li>
    <li id="comment-22121808" class="comment js-comment " data-comment-id="22121808">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">I had to move definitions of all HSMINIT() to be above TestHSM class and it compiles and works fine (; The only thing that is wrong is the fact that all transitions are &quot;external&quot;, while they should be &quot;internal&quot; - there was some debate about it in the article and the author decided that &quot;extrenal&quot; was right, but the arrows used suggest &quot;internal&quot;.</span>
                
&ndash;&nbsp;<a href="/users/157344/freddie-chopin"
                       title="6,950 reputation"
                       class="comment-user">Freddie Chopin</a>
                <span class="comment-date" dir="ltr"><span title="2013-03-24 15:04:15Z, License: CC BY-SA 3.0" class="relativetime-clean">Mar 24 '13 at 15:04</span></span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-15015969" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="1780649"></a>
<div id="answer-1780649" class="answer" data-answerid="1780649"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1780649">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="5">5</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1780649/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>The technique I like for state machines (at least ones for program control) is to use function pointers.  Each state is represented by a different function.  The function takes an input symbol and returns the function pointer for the next state.  The central dispatch loop monitors takes the next input, feeds it to the current state, and processes the result.</p>

<p>The typing on it gets a little odd, since C doesn't have a way to indicate types of function pointers returning themselves, so the state functions return <code>void*</code>.  But you can do something like this:</p>

<pre><code>typedef void* (*state_handler)(input_symbol_t);
void dispatch_fsm()
{
    state_handler current = initial_handler;
    /* Let's assume returning null indicates end-of-machine */
    while (current) {
        current = current(get_input);
    }
 }
</code></pre>

<p>Then your individual state functions can switch on their input to process and return the appropriate value.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-11-23T01:07:55"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1780649"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f2.5%2f"
       data-se-share-sheet-license-name="CC BY-SA 2.5"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1780649/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1780649" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-11-23 01:07:55Z" class="relativetime">Nov 23 '09 at 1:07</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/1385039/michael-ekstrand"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/0acb8a6c848d39aa53d94bd81239b034?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/1385039/michael-ekstrand">Michael Ekstrand</a><span class="d-none" itemprop="name">Michael Ekstrand</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 25,409" dir="ltr">25.4k</span><span title="8 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">8</span></span><span class="v-visible-sr">8 gold badges</span><span title="54 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">54</span></span><span class="v-visible-sr">54 silver badges</span><span title="86 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">86</span></span><span class="v-visible-sr">86 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1780649" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="1780649" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-5729863" class="comment js-comment " data-comment-id="5729863">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">+1 that&#39;s really nice, and provides nice places to hand functionality inside the transition functions</span>
                
&ndash;&nbsp;<a href="/users/80479/fire-crow"
                       title="6,601 reputation"
                       class="comment-user">Fire Crow</a>
                <span class="comment-date" dir="ltr"><span title="2011-02-24 21:05:27Z, License: CC BY-SA 2.5" class="relativetime-clean">Feb 24 '11 at 21:05</span></span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-1780649" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="1959842"></a>
<div id="answer-1959842" class="answer" data-answerid="1959842"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1959842">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="5">5</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1959842/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p><strong>Simplest case</strong></p>

<pre><code>enum event_type { ET_THIS, ET_THAT };
union event_parm { uint8_t this; uint16_t that; }
static void handle_event(enum event_type event, union event_parm parm)
{
  static enum { THIS, THAT } state;
  switch (state)
  {
    case THIS:
    switch (event)
    {
      case ET_THIS:
      // Handle event.
      break;

      default:
      // Unhandled events in this state.
      break;
    }
    break;

    case THAT:
    // Handle state.
    break;
  }
}
</code></pre>

<p>Points:
State is private, not only to the compilation unit but also to the event_handler.
Special cases may be handled separately from the main switch using whatever construct deemed necessary.</p>

<p><strong>More complex case</strong></p>

<p>When the switch gets bigger than a couple of screens full, split it into functions that handle each state, using a state table to look up the function directly. The state is still private to the event handler. The state handler functions return the next state. If needed some events can still receive special treatment in the main event handler. I like to throw in pseudo-events for state entry and exit and perhaps state machine start:</p>

<pre><code>enum state_type { THIS, THAT, FOO, NA };
enum event_type { ET_START, ET_ENTER, ET_EXIT, ET_THIS, ET_THAT, ET_WHATEVER, ET_TIMEOUT };
union event_parm { uint8_t this; uint16_t that; };
static void handle_event(enum event_type event, union event_parm parm)
{
  static enum state_type state;
  static void (* const state_handler[])(enum event_type event, union event_parm parm) = { handle_this, handle_that };
  enum state_type next_state = state_handler[state](event, parm);
  if (NA != next_state &amp;&amp; state != next_state)
  {
    (void)state_handler[state](ET_EXIT, 0);
    state = next_state;
    (void)state_handler[state](ET_ENTER, 0);
  }
}
</code></pre>

<p>I am not sure if I nailed the syntax, especially regarding the array of function pointers. I have not run any of this through a compiler. Upon review, I noticed that I forgot to explicitly discard the next state when handling the pseudo events (the (void) parenthesis before the call to state_handler()). This is something that I like to do even if compilers accept the omission silently. It tells readers of the code that "yes, I did indeed mean to call the function without using the return value", and it may stop static analysis tools from warning about it. It may be idiosyncratic because I do not recall having seen anybody else doing this.</p>

<p>Points: adding a tiny bit of complexity (checking if the next state is different from the current), can avoid duplicated code elsewhere, because the state handler functions can enjoy the pseudo events that occur when a state is entered and left. Remember that state cannot change when handling the pseudo events, because the result of the state handler is discarded after these events. You may of course choose to modify the behaviour. </p>

<p>A state handler would look like so:</p>

<pre><code>static enum state_type handle_this(enum event_type event, union event_parm parm)
{
  enum state_type next_state = NA;
  switch (event)
  {
    case ET_ENTER:
    // Start a timer to do whatever.
    // Do other stuff necessary when entering this state.
    break;

    case ET_WHATEVER:
    // Switch state.
    next_state = THAT;
    break;

    case ET_TIMEOUT:
    // Switch state.
    next_state = FOO;
    break;

    case ET_EXIT:
    // Stop the timer.
    // Generally clean up this state.
    break;
  }
  return next_state;
}
</code></pre>

<p><strong>More complexity</strong></p>

<p>When the compilation unit becomes too large (whatever you feel that is, I should say around 1000 lines), put each state handler in a separate file. When each state handler becomes longer than a couple of screens, split each event out in a separate function, similar to the way that the state switch was split. You may do this in a number of ways, separately from the state or by using a common table, or combining various schemes. Some of them have been covered here by others. Sort your tables and use binary search if speed is a requirement.</p>

<p><strong>Generic programming</strong></p>

<p>I should like the preprocessor to deal with issues such as sorting tables or even generating state machines from descriptions, allowing you to "write programs about programs". I believe this is what the Boost people are exploiting C++ templates for, but I find the syntax cryptic.</p>

<p><strong>Two-dimensional tables</strong></p>

<p>I have used state/event tables in the past but I have to say that for the simplest cases I do not find them necessary and I prefer the clarity and readability of the switch statement even if it does extend past one screen full. For more complex cases the tables quickly get out of hand as others have noted. The idioms I present here allow you to add a slew of events and states when you feel like it, without having to maintain a memory consuming table (even if it may be program memory). </p>

<p><strong>Disclaimer</strong></p>

<p>Special needs may render these idioms less useful, but I have found them to be very clear and maintainable.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-12-24T21:45:49"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1959842"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f2.5%2f"
       data-se-share-sheet-license-name="CC BY-SA 2.5"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1959842/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1959842" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>
            <div class="post-signature grid--cell fl0">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/1959842/revisions" title="show all edits to this post"
                         class="js-gps-track"
                         data-gps-track="post.click({ item: 4, priv: 0, post_type: 2 })">edited <span title="2009-12-25 07:07:14Z" class="relativetime">Dec 25 '09 at 7:07</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        
        <div class="-flair">
            
        </div>
    </div>
</div>            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2009-12-24 21:45:49Z" class="relativetime">Dec 24 '09 at 21:45</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/238391/joe-the-hamster"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/ca11c3867a80d98e728247ca29273352?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/238391/joe-the-hamster">Joe the Hamster</a><span class="d-none" itemprop="name">Joe the Hamster</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">51</span><span title="2 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">2</span></span><span class="v-visible-sr">2 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1959842" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="1959842" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-10892308" class="comment js-comment " data-comment-id="10892308">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">I would avoid &#39;this&#39; as a variable name or symbol just for the association, even if it isn&#39;t actually a reserved word.</span>
                
&ndash;&nbsp;<a href="/users/387660/xtl"
                       title="793 reputation"
                       class="comment-user">XTL</a>
                <span class="comment-date" dir="ltr"><span title="2012-01-05 14:41:43Z, License: CC BY-SA 3.0" class="relativetime-clean">Jan 5 '12 at 14:41</span></span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-1959842" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="1652667"></a>
<div id="answer-1652667" class="answer" data-answerid="1652667"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1652667">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="4">4</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1652667/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>Extremely untested, but fun to code, now in a more refined version than my original answer; up-to-date versions can be found at <a href="http://mercurial.intuxication.org/hg/cstuff/raw-file/tip/sm.h" rel="nofollow noreferrer">mercurial.intuxication.org</a>:</p>

<p><strong>sm.h</strong></p>

<pre><code>#ifndef SM_ARGS
#error "SM_ARGS undefined: " \
    "use '#define SM_ARGS (void)' to get an empty argument list"
#endif

#ifndef SM_STATES
#error "SM_STATES undefined: " \
    "you must provide a list of comma-separated states"
#endif

typedef void (*sm_state) SM_ARGS;
static const sm_state SM_STATES;

#define sm_transit(STATE) ((sm_state (*) SM_ARGS)STATE)

#define sm_def(NAME) \
    static sm_state NAME ## _fn SM_ARGS; \
    static const sm_state NAME = (sm_state)NAME ## _fn; \
    static sm_state NAME ## _fn SM_ARGS
</code></pre>

<p><strong>example.c</strong></p>

<pre><code>#include &lt;stdio.h&gt;

#define SM_ARGS (int i)
#define SM_STATES EVEN, ODD
#include "sm.h"

sm_def(EVEN)
{
    printf("even %i\n", i);
    return ODD;
}

sm_def(ODD)
{
    printf("odd  %i\n", i);
    return EVEN;
}

int main(void)
{
    int i = 0;
    sm_state state = EVEN;

    for(; i &lt; 10; ++i)
        state = sm_transit(state)(i);

    return 0;
}
</code></pre>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-10-30T22:35:59"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1652667"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f2.5%2f"
       data-se-share-sheet-license-name="CC BY-SA 2.5"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1652667/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1652667" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>
            <div class="post-signature grid--cell fl0">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/1652667/revisions" title="show all edits to this post"
                         class="js-gps-track"
                         data-gps-track="post.click({ item: 4, priv: 0, post_type: 2 })">edited <span title="2010-02-16 13:22:58Z" class="relativetime">Feb 16 '10 at 13:22</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        
        <div class="-flair">
            
        </div>
    </div>
</div>            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2009-10-30 22:35:59Z" class="relativetime">Oct 30 '09 at 22:35</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/48015/christoph"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/48015/christoph">Christoph</a><span class="d-none" itemprop="name">Christoph</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 144,402" dir="ltr">144k</span><span title="34 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">34</span></span><span class="v-visible-sr">34 gold badges</span><span title="171 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">171</span></span><span class="v-visible-sr">171 silver badges</span><span title="226 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">226</span></span><span class="v-visible-sr">226 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1652667" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="1652667" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-1531793" class="comment js-comment " data-comment-id="1531793">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="warm">14</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">I love the &quot;extremely untested&quot; comment. Seems to indicate that there are degrees of untestedness and that you put quite a bit of effort into not testing it :-)</span>
                
&ndash;&nbsp;<a href="/users/14860/paxdiablo"
                       title="737,280 reputation"
                       class="comment-user">paxdiablo</a>
                <span class="comment-date" dir="ltr"><span title="2009-11-02 05:46:01Z, License: CC BY-SA 2.5" class="relativetime-clean">Nov 2 '09 at 5:46</span></span>
            </div>
        </div>
    </li>
    <li id="comment-70036339" class="comment js-comment " data-comment-id="70036339">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">@Christoph the link in this answer is broken. Also, have you tested this code or not? If it has been tested and works you should remove that from the answer. Also maybe show an example of what code this results in once the macros have been expanded. I like the general idea.</span>
                
&ndash;&nbsp;<a href="/users/16432/joakim"
                       title="9,293 reputation"
                       class="comment-user">Joakim</a>
                <span class="comment-date" dir="ltr"><span title="2017-01-01 14:09:37Z, License: CC BY-SA 3.0" class="relativetime-clean">Jan 1 '17 at 14:09</span></span>
                        <span title="this comment was edited 1 time">
                            <svg aria-hidden="true" class="va-text-bottom o50 svg-icon iconPencilSm" width="14" height="14" viewBox="0 0 14 14"><path d="M11.1 1.71l1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0zM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88z"/></svg>
                        </span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-1652667" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="14300013"></a>
<div id="answer-14300013" class="answer" data-answerid="14300013"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="14300013">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="4">4</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/14300013/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>I really liked paxdiable's answer and decided to implement all the missing features for my application like guard variables and state machine specific data. </p>

<p>I uploaded my implementation to this site to share with the community. It has been tested using IAR Embedded Workbench for ARM.</p>

<p><a href="https://sourceforge.net/projects/compactfsm/" rel="nofollow">https://sourceforge.net/projects/compactfsm/</a></p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2013-01-13T02:15:50"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/14300013"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f3.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 3.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/14300013/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-14300013" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2013-01-13 02:15:50Z" class="relativetime">Jan 13 '13 at 2:15</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/108570/user108570"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/573aae5c5bf4633db2659419b3e2e054?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/108570/user108570">user108570</a><span class="d-none" itemprop="name">user108570</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">129</span><span title="1 silver badge" aria-hidden="true"><span class="badge2"></span><span class="badgecount">1</span></span><span class="v-visible-sr">1 silver badge</span><span title="3 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">3</span></span><span class="v-visible-sr">3 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-14300013" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="14300013" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-88888194" class="comment js-comment " data-comment-id="88888194">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">Finding this in 2018 and that it is still applicable. I was reading @paxdiablo answer, and I have successfully used that type of implementation in embedded systems before.   This solution adds the missing things from paxdiablos answer :)</span>
                
&ndash;&nbsp;<a href="/users/2115405/kristoffer"
                       title="336 reputation"
                       class="comment-user">Kristoffer</a>
                <span class="comment-date" dir="ltr"><span title="2018-06-20 09:59:10Z, License: CC BY-SA 4.0" class="relativetime-clean">Jun 20 '18 at 9:59</span></span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-14300013" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="29841749"></a>
<div id="answer-29841749" class="answer" data-answerid="29841749"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="29841749">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="4">4</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/29841749/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>Another interesting open source tool is <a href="http://statecharts.org" rel="nofollow">Yakindu Statechart Tools on statecharts.org</a>. It makes use of Harel statecharts and thus provides hierarchical and parallel states and generates C and C++ (as well as Java) code. It does not make use of libraries but follows a 'plain code' approach. The code basically applies switch-case structures. The code generators can also be customized. Additionally the tool provides many other features.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2015-04-24T07:53:08"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/29841749"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f3.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 3.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/29841749/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-29841749" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2015-04-24 07:53:08Z" class="relativetime">Apr 24 '15 at 7:53</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/2767869/axel-t"><div class="gravatar-wrapper-32"><img src="https://i.stack.imgur.com/MQGX1.jpg?s=32&amp;g=1" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/2767869/axel-t">Axel T.</a><span class="d-none" itemprop="name">Axel T.</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">141</span><span title="5 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">5</span></span><span class="v-visible-sr">5 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-29841749" class="comments js-comments-container bt bc-black-2 mt12  dno" data-post-id="29841749" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

            </ul>
	    </div>

        <div id="comments-link-29841749" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="1780720"></a>
<div id="answer-1780720" class="answer" data-answerid="1780720"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1780720">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="3">3</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1780720/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>Coming to this late (as usual) but scanning the answers to date I thinks something important is missing;</p>

<p>I have found in my own projects that it can be very helpful to <em>not</em> have a function for every valid state/event combination. I do like the idea of effectively having a 2D table of states/events. But I like the table elements to be more than a simple function pointer. Instead I try to organize my design so at it's heart it comprises a bunch of simple atomic elements or actions. That way I can list those simple atomic elements at each intersection of my state/event table. The idea is that you <em>don't</em> have to define a mass of N squared (typically very simple) functions. Why have something so error-prone, time consuming, hard to write, hard to read, you name it ?</p>

<p>I also include an optional new state, and an optional function pointer for each cell in the table. The function pointer is there for those exceptional cases where you don't want to just fire off a list of atomic actions.</p>

<p>You know you are doing it right when you can express a lot of different functionality, just by editing your table, with no new code to write.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-11-23T01:38:54"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1780720"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f2.5%2f"
       data-se-share-sheet-license-name="CC BY-SA 2.5"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1780720/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1780720" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-11-23 01:38:54Z" class="relativetime">Nov 23 '09 at 1:38</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/3955/bill-forster"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/348097a1dc53af54e64b29a5fd1e09aa?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/3955/bill-forster">Bill Forster</a><span class="d-none" itemprop="name">Bill Forster</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">5,695</span><span title="3 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">3</span></span><span class="v-visible-sr">3 gold badges</span><span title="24 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">24</span></span><span class="v-visible-sr">24 silver badges</span><span title="25 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">25</span></span><span class="v-visible-sr">25 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1780720" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="1780720" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-1667161" class="comment js-comment " data-comment-id="1667161">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">2</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">Maybe an example would be nice, no?</span>
                
&ndash;&nbsp;<a href="/users/171461/jldupont"
                       title="78,686 reputation"
                       class="comment-user owner">jldupont</a>
                <span class="comment-date" dir="ltr"><span title="2009-11-23 01:40:33Z, License: CC BY-SA 2.5" class="relativetime-clean">Nov 23 '09 at 1:40</span></span>
            </div>
        </div>
    </li>
    <li id="comment-1667221" class="comment js-comment " data-comment-id="1667221">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">1</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">A realistic example that can be presented in isolation is a challenging task that would require more time than I am prepared to give just at the moment. Is there anything in my post that is particularly hard to understand ? Maybe I can express it more clearly. The idea is very simple; Don&#39;t define a state mechanism that requires a separate function for every event/state combination, you get way too many functions that way. Instead find another way to describe the functionality you want for that event/state combination, at least in the majority of cases.</span>
                
&ndash;&nbsp;<a href="/users/3955/bill-forster"
                       title="5,695 reputation"
                       class="comment-user">Bill Forster</a>
                <span class="comment-date" dir="ltr"><span title="2009-11-23 02:04:32Z, License: CC BY-SA 2.5" class="relativetime-clean">Nov 23 '09 at 2:04</span></span>
            </div>
        </div>
    </li>
    <li id="comment-1667233" class="comment js-comment " data-comment-id="1667233">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">2</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">Understood: a pseudo-code example would have been good but your point is clear.</span>
                
&ndash;&nbsp;<a href="/users/171461/jldupont"
                       title="78,686 reputation"
                       class="comment-user owner">jldupont</a>
                <span class="comment-date" dir="ltr"><span title="2009-11-23 02:08:58Z, License: CC BY-SA 2.5" class="relativetime-clean">Nov 23 '09 at 2:08</span></span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-1780720" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="6758622"></a>
<div id="answer-6758622" class="answer" data-answerid="6758622"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="6758622">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="3">3</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/6758622/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>Alrght, I think mine's just a little different from everybody else's. A little more separation of code and data than I see in the other answers. I really read up on the theory to write this, which implements a full Regular-language (without regular expressions, sadly). Ullman, Minsky, Chomsky. Can't say I understood it all, but I've drawn from the old masters as directly as possible: through their words.</p>

<p>I use a function pointer to a predicate that determines the transition to a 'yes' state or a 'no' state. This facilitates the creation of a finite state acceptor for a regular language that you program in a more assembly-language-like manner. 
Please don't be put-off by my silly name choices. 'czek' == 'check'. 'grok' == [go look it up in the Hacker Dictionary].</p>

<p>So for each iteration, czek calls a predicate function with the current character as argument. If the predicate returns true, the character is consumed (the pointer advanced) and we follow the 'y' transition to select the next state. If the predicate returns false, the character is NOT consumed and we follow the 'n' transition. So every instruction is a two-way branch! I must have been reading The Story of Mel at the time.</p>

<p>This code comes straight from <a href="http://code.google.com/p/xpost" rel="nofollow">my postscript interpreter</a>, and evolved into its current form with much guidance from the fellows on comp.lang.c. Since postscript basically has no syntax (only requiring balanced brackets), a Regular Language Accepter like this functions as the parser as well. </p>

<pre><code>/* currentstr is set to the start of string by czek
   and used by setrad (called by israd) to set currentrad
   which is used by israddig to determine if the character
   in question is valid for the specified radix
   --
   a little semantic checking in the syntax!
 */
char *currentstr;
int currentrad;
void setrad(void) {
    char *end;
    currentrad = strtol(currentstr, &amp;end, 10);
    if (*end != '#' /* just a sanity check,
                       the automaton should already have determined this */
    ||  currentrad &gt; 36
    ||  currentrad &lt; 2)
        fatal("bad radix"); /* should probably be a simple syntaxerror */
}

/*
   character classes
   used as tests by automatons under control of czek
 */
char *alpha = "0123456789" "ABCDE" "FGHIJ" "KLMNO" "PQRST" "UVWXYZ";
#define EQ(a,b) a==b
#define WITHIN(a,b) strchr(a,b)!=NULL
int israd  (int c) {
    if (EQ('#',c)) { setrad(); return true; }
    return false;
}
int israddig(int c) {
    return strchrnul(alpha,toupper(c))-alpha &lt;= currentrad;
}
int isdot  (int c) {return EQ('.',c);}
int ise    (int c) {return WITHIN("eE",c);}
int issign (int c) {return WITHIN("+-",c);}
int isdel  (int c) {return WITHIN("()&lt;&gt;[]{}/%",c);}
int isreg  (int c) {return c!=EOF &amp;&amp; !isspace(c) &amp;&amp; !isdel(c);}
#undef WITHIN
#undef EQ

/*
   the automaton type
 */
typedef struct { int (*pred)(int); int y, n; } test;

/*
   automaton to match a simple decimal number
 */
/* /^[+-]?[0-9]+$/ */
test fsm_dec[] = {
/* 0*/ { issign,  1,  1 },
/* 1*/ { isdigit, 2, -1 },
/* 2*/ { isdigit, 2, -1 },
};
int acc_dec(int i) { return i==2; }

/*
   automaton to match a radix number
 */
/* /^[0-9]+[#][a-Z0-9]+$/ */
test fsm_rad[] = {
/* 0*/ { isdigit,  1, -1 },
/* 1*/ { isdigit,  1,  2 },
/* 2*/ { israd,    3, -1 },
/* 3*/ { israddig, 4, -1 },
/* 4*/ { israddig, 4, -1 },
};
int acc_rad(int i) { return i==4; }

/*
   automaton to match a real number
 */
/* /^[+-]?(d+(.d*)?)|(d*.d+)([eE][+-]?d+)?$/ */
/* represents the merge of these (simpler) expressions
   [+-]?[0-9]+\.[0-9]*([eE][+-]?[0-9]+)?
   [+-]?[0-9]*\.[0-9]+([eE][+-]?[0-9]+)?
   The complexity comes from ensuring at least one
   digit in the integer or the fraction with optional
   sign and optional optionally-signed exponent.
   So passing isdot in state 3 means at least one integer digit has been found
   but passing isdot in state 4 means we must find at least one fraction digit
   via state 5 or the whole thing is a bust.
 */
test fsm_real[] = {
/* 0*/ { issign,  1,   1 },
/* 1*/ { isdigit, 2,   4 },
/* 2*/ { isdigit, 2,   3 },
/* 3*/ { isdot,   6,   7 },
/* 4*/ { isdot,   5,  -1 },
/* 5*/ { isdigit, 6,  -1 },
/* 6*/ { isdigit, 6,   7 },
/* 7*/ { ise,     8,  -1 },
/* 8*/ { issign,  9,   9 },
/* 9*/ { isdigit, 10, -1 },
/*10*/ { isdigit, 10, -1 },
};
int acc_real(int i) {
    switch(i) {
        case 2: /* integer */
        case 6: /* real */
        case 10: /* real with exponent */
            return true;
    }
    return false;
}

/*
   Helper function for grok.
   Execute automaton against the buffer,
   applying test to each character:
       on success, consume character and follow 'y' transition.
       on failure, do not consume but follow 'n' transition.
   Call yes function to determine if the ending state
   is considered an acceptable final state.
   A transition to -1 represents rejection by the automaton
 */
int czek (char *s, test *fsm, int (*yes)(int)) {
    int sta = 0;
    currentstr = s;
    while (sta!=-1 &amp;&amp; *s) {
        if (fsm[sta].pred((int)*s)) {
            sta=fsm[sta].y;
            s++;
        } else {
            sta=fsm[sta].n;
        }
    }
    return yes(sta);
}

/*
   Helper function for toke.
   Interpret the contents of the buffer,
   trying automatons to match number formats;
   and falling through to a switch for special characters.
   Any token consisting of all regular characters
   that cannot be interpreted as a number is an executable name
 */
object grok (state *st, char *s, int ns,
    object *src,
    int (*next)(state *,object *),
    void (*back)(state *,int, object *)) {

    if (czek(s, fsm_dec, acc_dec)) {
        long num;
        num = strtol(s,NULL,10);
        if ((num==LONG_MAX || num==LONG_MIN) &amp;&amp; errno==ERANGE) {
            error(st,limitcheck);
/*       } else if (num &gt; INT_MAX || num &lt; INT_MIN) { */
/*           error(limitcheck, OP_token); */
        } else {
            return consint(num);
        }
    }

    else if (czek(s, fsm_rad, acc_rad)) {
        long ra,num;
        ra = (int)strtol(s,NULL,10);
        if (ra &gt; 36 || ra &lt; 2) {
            error(st,limitcheck);
        }
        num = strtol(strchr(s,'#')+1, NULL, (int)ra);
        if ((num==LONG_MAX || num==LONG_MIN) &amp;&amp; errno==ERANGE) {
            error(st,limitcheck);
/*       } else if (num &gt; INT_MAX || num &lt; INT_MAX) { */
/*           error(limitcheck, OP_token); */
        } else {
            return consint(num);
        }
    }

    else if (czek(s, fsm_real, acc_real)) {
        double num;
        num = strtod(s,NULL);
        if ((num==HUGE_VAL || num==-HUGE_VAL) &amp;&amp; errno==ERANGE) {
            error(st,limitcheck);
        } else {
            return consreal(num);
        }
    }

    else switch(*s) {
        case '(': {
            int c, defer=1;
            char *sp = s;

            while (defer &amp;&amp; (c=next(st,src)) != EOF ) {
                switch(c) {
                    case '(': defer++; break;
                    case ')': defer--;
                        if (!defer) goto endstring;
                        break;
                    case '\\': c=next(st,src);
                        switch(c) {
                            case '\n': continue;
                            case 'a': c = '\a'; break;
                            case 'b': c = '\b'; break;
                            case 'f': c = '\f'; break;
                            case 'n': c = '\n'; break;
                            case 'r': c = '\r'; break;
                            case 't': c = '\t'; break;
                            case 'v': c = '\v'; break;
                            case '\'': case '\"':
                            case '(': case ')':
                            default: break;
                        }
                }
                if (sp-s&gt;ns) error(st,limitcheck);
                else *sp++ = c;
            }
endstring:  *sp=0;
            return cvlit(consstring(st,s,sp-s));
        }

        case '&lt;': {
            int c;
            char d, *x = "0123456789abcdef", *sp = s;
            while (c=next(st,src), c!='&gt;' &amp;&amp; c!=EOF) {
                if (isspace(c)) continue;
                if (isxdigit(c)) c = strchr(x,tolower(c)) - x;
                else error(st,syntaxerror);
                d = (char)c &lt;&lt; 4;
                while (isspace(c=next(st,src))) /*loop*/;
                if (isxdigit(c)) c = strchr(x,tolower(c)) - x;
                else error(st,syntaxerror);
                d |= (char)c;
                if (sp-s&gt;ns) error(st,limitcheck);
                *sp++ = d;
            }
            *sp = 0;
            return cvlit(consstring(st,s,sp-s));
        }

        case '{': {
            object *a;
            size_t na = 100;
            size_t i;
            object proc;
            object fin;

            fin = consname(st,"}");
            (a = malloc(na * sizeof(object))) || (fatal("failure to malloc"),0);
            for (i=0 ; objcmp(st,a[i]=toke(st,src,next,back),fin) != 0; i++) {
                if (i == na-1)
                (a = realloc(a, (na+=100) * sizeof(object))) || (fatal("failure to malloc"),0);
            }
            proc = consarray(st,i);
            { size_t j;
                for (j=0; j&lt;i; j++) {
                    a_put(st, proc, j, a[j]);
                }
            }
            free(a);
            return proc;
        }

        case '/': {
            s[1] = (char)next(st,src);
            puff(st, s+2, ns-2, src, next, back);
            if (s[1] == '/') {
                push(consname(st,s+2));
                opexec(st, op_cuts.load);
                return pop();
            }
            return cvlit(consname(st,s+1));
        }

        default: return consname(st,s);
    }
    return null; /* should be unreachable */
}

/*
   Helper function for toke.
   Read into buffer any regular characters.
   If we read one too many characters, put it back
   unless it's whitespace.
 */
int puff (state *st, char *buf, int nbuf,
    object *src,
    int (*next)(state *,object *),
    void (*back)(state *,int, object *)) {
    int c;
    char *s = buf;
    while (isreg(c=next(st,src))) {
        if (s-buf &gt;= nbuf-1) return false;
        *s++ = c;
    }
    *s = 0;
    if (!isspace(c) &amp;&amp; c != EOF) back(st,c,src); /* eat interstice */
    return true;
}

/*
   Helper function for Stoken Ftoken.
   Read a token from src using next and back.
   Loop until having read a bona-fide non-whitespace non-comment character.
   Call puff to read into buffer up to next delimiter or space.
   Call grok to figure out what it is.
 */
#define NBUF MAXLINE
object toke (state *st, object *src,
        int (*next)(state *, object *),
        void (*back)(state *, int, object *)) {
    char buf[NBUF] = "", *s=buf;
    int c,sta = 1;
    object o;

    do {
        c=next(st,src);
        //if (c==EOF) return null;
        if (c=='%') {
            if (DUMPCOMMENTS) fputc(c, stdout);
            do {
                c=next(st,src);
                if (DUMPCOMMENTS) fputc(c, stdout);
            } while (c!='\n' &amp;&amp; c!='\f' &amp;&amp; c!=EOF);
        }
    } while (c!=EOF &amp;&amp; isspace(c));
    if (c==EOF) return null;
    *s++ = c;
    *s = 0;
    if (!isdel(c)) sta=puff(st, s,NBUF-1,src,next,back);

    if (sta) {
        o=grok(st,buf,NBUF-1,src,next,back);
        return o;
    } else {
        return null;
    }
}
</code></pre>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2011-07-20T07:44:49"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/6758622"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f3.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 3.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/6758622/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-6758622" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>
            <div class="post-signature grid--cell fl0">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/6758622/revisions" title="show all edits to this post"
                         class="js-gps-track"
                         data-gps-track="post.click({ item: 4, priv: 0, post_type: 2 })">edited <span title="2012-09-17 03:32:01Z" class="relativetime">Sep 17 '12 at 3:32</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        
        <div class="-flair">
            
        </div>
    </div>
</div>            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2011-07-20 07:44:49Z" class="relativetime">Jul 20 '11 at 7:44</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/733077/luser-droog"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/db1bf62fae51d5bafb8f1db7fb677176?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/733077/luser-droog">luser droog</a><span class="d-none" itemprop="name">luser droog</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 17,244" dir="ltr">17.2k</span><span title="3 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">3</span></span><span class="v-visible-sr">3 gold badges</span><span title="48 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">48</span></span><span class="v-visible-sr">48 silver badges</span><span title="95 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">95</span></span><span class="v-visible-sr">95 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-6758622" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="6758622" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-27380799" class="comment js-comment " data-comment-id="27380799">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">2</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">This is what any parser or lexer generator will gladly emit for you. Uncannily so. Whether you want to code it up by hand is questionable. It has pedagogical merit, of course.</span>
                
&ndash;&nbsp;<a href="/users/1329652/unslander-monica"
                       title="82,649 reputation"
                       class="comment-user">Unslander Monica</a>
                <span class="comment-date" dir="ltr"><span title="2013-09-03 23:39:37Z, License: CC BY-SA 3.0" class="relativetime-clean">Sep 3 '13 at 23:39</span></span>
                        <span title="this comment was edited 1 time">
                            <svg aria-hidden="true" class="va-text-bottom o50 svg-icon iconPencilSm" width="14" height="14" viewBox="0 0 14 14"><path d="M11.1 1.71l1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0zM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88z"/></svg>
                        </span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-6758622" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="8869608"></a>
<div id="answer-8869608" class="answer" data-answerid="8869608"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="8869608">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="3">3</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/8869608/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>boost.org comes with 2 different state chart implementations:</p>

<ul>
<li><a href="http://www.boost.org/doc/libs/release/libs/msm/" rel="nofollow noreferrer">Meta State Machine</a> </li>
<li><a href="http://www.boost.org/doc/libs/release/libs/statechart/" rel="nofollow noreferrer">Statechart</a></li>
</ul>

<p>As always, boost will beam you into template hell.</p>

<p>The first library is for more performance-critical state machines. The second library gives you a direct transition path from a UML Statechart to code.</p>

<p>Here's the <a href="https://stackoverflow.com/questions/4275602/boost-statechart-vs-meta-state-machine">SO question asking for a comparison between the two</a> where both of the authors respond.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2012-01-15T12:27:38"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/8869608"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f3.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 3.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/8869608/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-8869608" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>
            <div class="post-signature grid--cell fl0">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="/posts/8869608/revisions" title="show all edits to this post"
                         class="js-gps-track"
                         data-gps-track="post.click({ item: 4, priv: 0, post_type: 2 })">edited <span title="2017-05-23 11:55:19Z" class="relativetime">May 23 '17 at 11:55</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="/users/-1/community"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/-1/community">Community</a><span class="mod-flair " title="moderator">&#9830;</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">1</span><span title="1 silver badge" aria-hidden="true"><span class="badge2"></span><span class="badgecount">1</span></span><span class="v-visible-sr">1 silver badge</span>
        </div>
    </div>
</div>            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2012-01-15 12:27:38Z" class="relativetime">Jan 15 '12 at 12:27</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/1150342/roland-wolf"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/cbf0414edfb9e6f5d706ea85ed837d62?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/1150342/roland-wolf">Roland Wolf</a><span class="d-none" itemprop="name">Roland Wolf</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">31</span><span title="1 bronze badge" aria-hidden="true"><span class="badge3"></span><span class="badgecount">1</span></span><span class="v-visible-sr">1 bronze badge</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-8869608" class="comments js-comments-container bt bc-black-2 mt12  dno" data-post-id="8869608" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

            </ul>
	    </div>

        <div id="comments-link-8869608" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="55691474"></a>
<div id="answer-55691474" class="answer" data-answerid="55691474"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="55691474">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="3">3</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/55691474/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>Here is an example of a Finite State Machine for Linux that uses message queues as the events.  The events are put on the queue and handled in order.  The state changes depending on what happens for each event.</p>

<p>This is an example for a data connection with states like:</p>

<ul>
<li>Uninitialized</li>
<li>Initialized</li>
<li>Connected</li>
<li>MTU Negotiated</li>
<li>Authenticated</li>
</ul>

<p>One little extra feature I added was a timestamp for each message/event.  The event handler will ignore events that are too old (they have expired).  This can happen a lot in the real world where you might get stuck in a state unexpectedly.</p>

<p>This example runs on Linux, use the Makefile below to compile it and play around with it.</p>

<p><code>state_machine.c</code></p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdint.h&gt;
#include &lt;assert.h&gt;
#include &lt;unistd.h&gt;   // sysconf()
#include &lt;errno.h&gt;    // errno
#include &lt;string.h&gt;   // strerror()
#include &lt;sys/time.h&gt; // gettimeofday()
#include &lt;fcntl.h&gt;    // For O_* constants
#include &lt;sys/stat.h&gt; // For mode constants

#include &lt;mqueue.h&gt;
#include &lt;poll.h&gt;

//------------------------------------------------
// States
//------------------------------------------------
typedef enum
{
    ST_UNKNOWN = 0,
    ST_UNINIT,
    ST_INIT,
    ST_CONNECTED,
    ST_MTU_NEGOTIATED,
    ST_AUTHENTICATED,
    ST_ERROR,
    ST_DONT_CHANGE,
    ST_TERM,
} fsmState_t;

//------------------------------------------------
// Events
//------------------------------------------------
typedef enum
{
    EV_UNKNOWN = 0,
    EV_INIT_SUCCESS,
    EV_INIT_FAIL,
    EV_MASTER_CMD_MSG,
    EV_CONNECT_SUCCESS,
    EV_CONNECT_FAIL,
    EV_MTU_SUCCESS,
    EV_MTU_FAIL,
    EV_AUTH_SUCCESS,
    EV_AUTH_FAIL,
    EV_TX_SUCCESS,
    EV_TX_FAIL,
    EV_DISCONNECTED,
    EV_DISCON_FAILED,
    EV_LAST_ENTRY,
} fsmEvName_t;

typedef struct fsmEvent_type
{
    fsmEvName_t name;
    struct timeval genTime; // Time the event was generated.
                            // This allows us to see how old the event is.
} fsmEvent_t;

// Finite State Machine Data Members
typedef struct fsmData_type
{
    int  connectTries;
    int  MTUtries;
    int  authTries;
    int  txTries;
} fsmData_t;

// Each row of the state table
typedef struct stateTable_type {
    fsmState_t  st;             // Current state
    fsmEvName_t evName;         // Got this event
    int (*conditionfn)(void *);  // If this condition func returns TRUE
    fsmState_t nextState;       // Change to this state and
    void (*fn)(void *);          // Run this function
} stateTable_t;

// Finite State Machine state structure
typedef struct fsm_type
{
    const stateTable_t *pStateTable; // Pointer to state table
    int        numStates;            // Number of entries in the table
    fsmState_t currentState;         // Current state
    fsmEvent_t currentEvent;         // Current event
    fsmData_t *fsmData;              // Pointer to the data attributes
    mqd_t      mqdes;                // Message Queue descriptor
    mqd_t      master_cmd_mqdes;     // Master command message queue
} fsm_t;

// Wildcard events and wildcard state
#define   EV_ANY    -1
#define   ST_ANY    -1
#define   TRUE     (1)
#define   FALSE    (0)

// Maximum priority for message queues (see "man mq_overview")
#define FSM_PRIO  (sysconf(_SC_MQ_PRIO_MAX) - 1)

static void addev                              (fsm_t *fsm, fsmEvName_t ev);
static void doNothing                          (void *fsm) {addev(fsm, EV_MASTER_CMD_MSG);}
static void doInit                             (void *fsm) {addev(fsm, EV_INIT_SUCCESS);}
static void doConnect                          (void *fsm) {addev(fsm, EV_CONNECT_SUCCESS);}
static void doMTU                              (void *fsm) {addev(fsm, EV_MTU_SUCCESS);}
static void reportFailConnect                  (void *fsm) {addev(fsm, EV_ANY);}
static void doAuth                             (void *fsm) {addev(fsm, EV_AUTH_SUCCESS);}
static void reportDisConnect                   (void *fsm) {addev(fsm, EV_ANY);}
static void doDisconnect                       (void *fsm) {addev(fsm, EV_ANY);}
static void doTransaction                      (void *fsm) {addev(fsm, EV_TX_FAIL);}
static void fsmError                           (void *fsm) {addev(fsm, EV_ANY);}

static int currentlyLessThanMaxConnectTries    (void *fsm) {
    fsm_t *l = (fsm_t *)fsm;
    return (l-&gt;fsmData-&gt;connectTries &lt; 5 ? TRUE : FALSE);
}
static int        isMoreThanMaxConnectTries    (void *fsm) {return TRUE;}
static int currentlyLessThanMaxMTUtries        (void *fsm) {return TRUE;}
static int        isMoreThanMaxMTUtries        (void *fsm) {return TRUE;}
static int currentyLessThanMaxAuthTries        (void *fsm) {return TRUE;}
static int       isMoreThanMaxAuthTries        (void *fsm) {return TRUE;}
static int currentlyLessThanMaxTXtries         (void *fsm) {return FALSE;}
static int        isMoreThanMaxTXtries         (void *fsm) {return TRUE;}
static int didNotSelfDisconnect                (void *fsm) {return TRUE;}

static int  waitForEvent                       (fsm_t *fsm);
static void runEvent                           (fsm_t *fsm);
static void runStateMachine(fsm_t *fsm);
static int newEventIsValid(fsmEvent_t *event);
static void getTime(struct timeval *time);
void printState(fsmState_t st);
void printEvent(fsmEvName_t ev);

// Global State Table
const stateTable_t GST[] = {
    // Current state         Got this event          If this condition func returns TRUE     Change to this state and    Run this function
    { ST_UNINIT,             EV_INIT_SUCCESS,        NULL,                                   ST_INIT,                    &amp;doNothing              },
    { ST_UNINIT,             EV_INIT_FAIL,           NULL,                                   ST_UNINIT,                  &amp;doInit                 },
    { ST_INIT,               EV_MASTER_CMD_MSG,      NULL,                                   ST_INIT,                    &amp;doConnect              },
    { ST_INIT,               EV_CONNECT_SUCCESS,     NULL,                                   ST_CONNECTED,               &amp;doMTU                  },
    { ST_INIT,               EV_CONNECT_FAIL,        &amp;currentlyLessThanMaxConnectTries,      ST_INIT,                    &amp;doConnect              },
    { ST_INIT,               EV_CONNECT_FAIL,        &amp;isMoreThanMaxConnectTries,             ST_INIT,                    &amp;reportFailConnect      },
    { ST_CONNECTED,          EV_MTU_SUCCESS,         NULL,                                   ST_MTU_NEGOTIATED,          &amp;doAuth                 },
    { ST_CONNECTED,          EV_MTU_FAIL,            &amp;currentlyLessThanMaxMTUtries,          ST_CONNECTED,               &amp;doMTU                  },
    { ST_CONNECTED,          EV_MTU_FAIL,            &amp;isMoreThanMaxMTUtries,                 ST_CONNECTED,               &amp;doDisconnect           },
    { ST_CONNECTED,          EV_DISCONNECTED,        &amp;didNotSelfDisconnect,                  ST_INIT,                    &amp;reportDisConnect       },
    { ST_MTU_NEGOTIATED,     EV_AUTH_SUCCESS,        NULL,                                   ST_AUTHENTICATED,           &amp;doTransaction          },
    { ST_MTU_NEGOTIATED,     EV_AUTH_FAIL,           &amp;currentyLessThanMaxAuthTries,          ST_MTU_NEGOTIATED,          &amp;doAuth                 },
    { ST_MTU_NEGOTIATED,     EV_AUTH_FAIL,           &amp;isMoreThanMaxAuthTries,                ST_MTU_NEGOTIATED,          &amp;doDisconnect           },
    { ST_MTU_NEGOTIATED,     EV_DISCONNECTED,        &amp;didNotSelfDisconnect,                  ST_INIT,                    &amp;reportDisConnect       },
    { ST_AUTHENTICATED,      EV_TX_SUCCESS,          NULL,                                   ST_AUTHENTICATED,           &amp;doDisconnect           },
    { ST_AUTHENTICATED,      EV_TX_FAIL,             &amp;currentlyLessThanMaxTXtries,           ST_AUTHENTICATED,           &amp;doTransaction          },
    { ST_AUTHENTICATED,      EV_TX_FAIL,             &amp;isMoreThanMaxTXtries,                  ST_AUTHENTICATED,           &amp;doDisconnect           },
    { ST_AUTHENTICATED,      EV_DISCONNECTED,        &amp;didNotSelfDisconnect,                  ST_INIT,                    &amp;reportDisConnect       },
    { ST_ANY,                EV_DISCON_FAILED,       NULL,                                   ST_DONT_CHANGE,             &amp;doDisconnect           },
    { ST_ANY,                EV_ANY,                 NULL,                                   ST_UNINIT,                  &amp;fsmError               }    // Wildcard state for errors
};

#define GST_COUNT (sizeof(GST)/sizeof(stateTable_t))

int main()
{
    int ret = 0;
    fsmData_t dataAttr;
    dataAttr.connectTries = 0;
    dataAttr.MTUtries     = 0;
    dataAttr.authTries    = 0;
    dataAttr.txTries      = 0;

    fsm_t lfsm;
    memset(&amp;lfsm, 0, sizeof(fsm_t));
    lfsm.pStateTable       = GST;
    lfsm.numStates         = GST_COUNT;
    lfsm.currentState      = ST_UNINIT;
    lfsm.currentEvent.name = EV_ANY;
    lfsm.fsmData           = &amp;dataAttr;

    struct mq_attr attr;
    attr.mq_maxmsg = 30;
    attr.mq_msgsize = sizeof(fsmEvent_t);

    // Dev info
    //printf("Size of fsmEvent_t [%ld]\n", sizeof(fsmEvent_t));

    ret = mq_unlink("/abcmq");
    if (ret == -1) {
        fprintf(stderr, "Error on mq_unlink(), errno[%d] strerror[%s]\n",
                errno, strerror(errno));
    }

    lfsm.mqdes = mq_open("/abcmq", O_CREAT | O_RDWR, S_IWUSR | S_IRUSR, &amp;attr);
    if (lfsm.mqdes == (mqd_t)-1) {
        fprintf(stderr, "Error on mq_open(), errno[%d] strerror[%s]\n",
                errno, strerror(errno));
        return -1;
    }

    doInit(&amp;lfsm);  // This will generate the first event
    runStateMachine(&amp;lfsm);

    return 0;
}


static void runStateMachine(fsm_t *fsm)
{
    int ret = 0;

    if (fsm == NULL) {
        fprintf(stderr, "[%s] NULL argument\n", __func__);
        return;
    }

    // Cycle through the state machine
    while (fsm-&gt;currentState != ST_TERM) {
        printf("current state [");
        printState(fsm-&gt;currentState);
        printf("]\n");

        ret = waitForEvent(fsm);
        if (ret == 0) {
            printf("got event [");
            printEvent(fsm-&gt;currentEvent.name);
            printf("]\n");

            runEvent(fsm);
        }
        sleep(2);
    }
}


static int waitForEvent(fsm_t *fsm)
{
    //const int numFds = 2;
    const int numFds = 1;
    struct pollfd fds[numFds];
    int timeout_msecs = -1; // -1 is forever
    int ret = 0;
    int i = 0;
    ssize_t num = 0;
    fsmEvent_t newEv;

    if (fsm == NULL) {
        fprintf(stderr, "[%s] NULL argument\n", __func__);
        return -1;
    }

    fsm-&gt;currentEvent.name = EV_ANY;

    fds[0].fd     = fsm-&gt;mqdes;
    fds[0].events = POLLIN;
    //fds[1].fd     = fsm-&gt;master_cmd_mqdes;
    //fds[1].events = POLLIN;
    ret = poll(fds, numFds, timeout_msecs);

    if (ret &gt; 0) {
        // An event on one of the fds has occurred
        for (i = 0; i &lt; numFds; i++) {
            if (fds[i].revents &amp; POLLIN) {
                // Data may be read on device number i
                num = mq_receive(fds[i].fd, (void *)(&amp;newEv),
                                 sizeof(fsmEvent_t), NULL);
                if (num == -1) {
                    fprintf(stderr, "Error on mq_receive(), errno[%d] "
                            "strerror[%s]\n", errno, strerror(errno));
                    return -1;
                }

                if (newEventIsValid(&amp;newEv)) {
                    fsm-&gt;currentEvent = newEv;
                } else {
                    return -1;
                }
            }
        }
    } else {
        fprintf(stderr, "Error on poll(), ret[%d] errno[%d] strerror[%s]\n",
                ret, errno, strerror(errno));
        return -1;
    }

    return 0;
}


static int newEventIsValid(fsmEvent_t *event)
{
    if (event == NULL) {
        fprintf(stderr, "[%s] NULL argument\n", __func__);
        return FALSE;
    }

    printf("[%s]\n", __func__);

    struct timeval now;
    getTime(&amp;now);

    if ( (event-&gt;name &lt; EV_LAST_ENTRY) &amp;&amp;
         ((now.tv_sec - event-&gt;genTime.tv_sec) &lt; (60*5))
       )
    {
        return TRUE;
    } else {
        return FALSE;
    }
}


//------------------------------------------------
// Performs event handling on the FSM (finite state machine).
// Make sure there is a wildcard state at the end of
// your table, otherwise; the event will be ignored.
//------------------------------------------------
static void runEvent(fsm_t *fsm)
{
    int i;
    int condRet = 0;

    if (fsm == NULL) {
        fprintf(stderr, "[%s] NULL argument\n", __func__);
        return;
    }

    printf("[%s]\n", __func__);

    // Find a relevant entry for this state and event
    for (i = 0; i &lt; fsm-&gt;numStates; i++) {
        // Look in the table for our current state or ST_ANY
        if (  (fsm-&gt;pStateTable[i].st == fsm-&gt;currentState) ||
              (fsm-&gt;pStateTable[i].st == ST_ANY)
           )
        {
            // Is this the event we are looking for?
            if ( (fsm-&gt;pStateTable[i].evName == fsm-&gt;currentEvent.name) ||
                 (fsm-&gt;pStateTable[i].evName == EV_ANY)
               )
            {
                if (fsm-&gt;pStateTable[i].conditionfn != NULL) {
                    condRet = fsm-&gt;pStateTable[i].conditionfn(fsm-&gt;fsmData);
                }

                // See if there is a condition associated
                // or we are not looking for any condition
                //
                if ( (condRet != 0) || (fsm-&gt;pStateTable[i].conditionfn == NULL))
                {
                    // Set the next state (if applicable)
                    if (fsm-&gt;pStateTable[i].nextState != ST_DONT_CHANGE) {
                        fsm-&gt;currentState = fsm-&gt;pStateTable[i].nextState;
                        printf("new state [");
                        printState(fsm-&gt;currentState);
                        printf("]\n");
                    }

                    // Call the state callback function
                    fsm-&gt;pStateTable[i].fn(fsm);
                    break;
                }
            }
        }
    }
}


//------------------------------------------------
//               EVENT HANDLERS
//------------------------------------------------
static void getTime(struct timeval *time)
{
    if (time == NULL) {
        fprintf(stderr, "[%s] NULL argument\n", __func__);
        return;
    }

    printf("[%s]\n", __func__);

    int ret = gettimeofday(time, NULL);
    if (ret != 0) {
        fprintf(stderr, "gettimeofday() failed: errno [%d], strerror [%s]\n",
                errno, strerror(errno));
        memset(time, 0, sizeof(struct timeval));
    }
}


static void addev (fsm_t *fsm, fsmEvName_t ev)
{
    int ret = 0;

    if (fsm == NULL) {
        fprintf(stderr, "[%s] NULL argument\n", __func__);
        return;
    }

    printf("[%s] ev[%d]\n", __func__, ev);

    if (ev == EV_ANY) {
        // Don't generate a new event, just return...
        return;
    }

    fsmEvent_t newev;
    getTime(&amp;(newev.genTime));
    newev.name = ev;

    ret = mq_send(fsm-&gt;mqdes, (void *)(&amp;newev), sizeof(fsmEvent_t), FSM_PRIO);
    if (ret == -1) {
        fprintf(stderr, "[%s] mq_send() failed: errno [%d], strerror [%s]\n",
                __func__, errno, strerror(errno));
    }
}
//------------------------------------------------
//           end EVENT HANDLERS
//------------------------------------------------

void printState(fsmState_t st)
{
    switch(st) {
        case    ST_UNKNOWN:
        printf("ST_UNKNOWN");
            break;
        case    ST_UNINIT:
        printf("ST_UNINIT");
            break;
        case    ST_INIT:
        printf("ST_INIT");
            break;
        case    ST_CONNECTED:
        printf("ST_CONNECTED");
            break;
        case    ST_MTU_NEGOTIATED:
        printf("ST_MTU_NEGOTIATED");
            break;
        case    ST_AUTHENTICATED:
        printf("ST_AUTHENTICATED");
            break;
        case    ST_ERROR:
        printf("ST_ERROR");
            break;
        case    ST_TERM:
        printf("ST_TERM");
            break;
        default:
        printf("unknown state");
            break;
    }
}

void printEvent(fsmEvName_t ev)
{
    switch (ev) {
        case    EV_UNKNOWN:
        printf("EV_UNKNOWN");
            break;
        case    EV_INIT_SUCCESS:
        printf("EV_INIT_SUCCESS");
            break;
        case    EV_INIT_FAIL:
        printf("EV_INIT_FAIL");
            break;
        case    EV_MASTER_CMD_MSG:
        printf("EV_MASTER_CMD_MSG");
            break;
        case    EV_CONNECT_SUCCESS:
        printf("EV_CONNECT_SUCCESS");
            break;
        case    EV_CONNECT_FAIL:
        printf("EV_CONNECT_FAIL");
            break;
        case    EV_MTU_SUCCESS:
        printf("EV_MTU_SUCCESS");
            break;
        case    EV_MTU_FAIL:
        printf("EV_MTU_FAIL");
            break;
        case    EV_AUTH_SUCCESS:
        printf("EV_AUTH_SUCCESS");
            break;
        case    EV_AUTH_FAIL:
        printf("EV_AUTH_FAIL");
            break;
        case    EV_TX_SUCCESS:
        printf("EV_TX_SUCCESS");
            break;
        case    EV_TX_FAIL:
        printf("EV_TX_FAIL");
            break;
        case    EV_DISCONNECTED:
        printf("EV_DISCONNECTED");
            break;
        case    EV_LAST_ENTRY:
        printf("EV_LAST_ENTRY");
            break;
        default:
        printf("unknown event");
            break;
    }
}
</code></pre>

<p><code>Makefile</code></p>

<pre><code>CXX = gcc
COMPFLAGS = -c -Wall -g

state_machine: state_machine.o
    $(CXX) -lrt state_machine.o -o state_machine

state_machine.o: state_machine.c
    $(CXX) $(COMPFLAGS) state_machine.c

clean:
    rm state_machine state_machine.o
</code></pre>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2019-04-15T14:31:06"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/55691474"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f4.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 4.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/55691474/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-55691474" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2019-04-15 14:31:06Z" class="relativetime">Apr 15 '19 at 14:31</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/1760405/brad-grissom"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/02d79f5d94f5f8e25e4893b217e3baca?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/1760405/brad-grissom">Brad Grissom</a><span class="d-none" itemprop="name">Brad Grissom</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">2,413</span><span title="3 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">3</span></span><span class="v-visible-sr">3 gold badges</span><span title="17 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">17</span></span><span class="v-visible-sr">17 silver badges</span><span title="19 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">19</span></span><span class="v-visible-sr">19 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-55691474" class="comments js-comments-container bt bc-black-2 mt12  dno" data-post-id="55691474" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

            </ul>
	    </div>

        <div id="comments-link-55691474" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="1647677"></a>
<div id="answer-1647677" class="answer" data-answerid="1647677"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1647677">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="2">2</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1647677/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>This <a href="http://episteme.arstechnica.com/eve/forums/a/tpc/f/6330927813/m/4050935335?r=8550906335#8550906335" rel="nofollow noreferrer">series of Ars OpenForum posts</a> about a somewhat complicated bit of control logic includes a very easy-to-follow implementation as a state machine in C.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-10-30T02:23:50"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1647677"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f2.5%2f"
       data-se-share-sheet-license-name="CC BY-SA 2.5"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1647677/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1647677" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-10-30 02:23:50Z" class="relativetime">Oct 30 '09 at 2:23</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/28604/steven-huwig"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/ef9f9b5ee62af05729340ad931114c54?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/28604/steven-huwig">Steven Huwig</a><span class="d-none" itemprop="name">Steven Huwig</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 17,291" dir="ltr">17.3k</span><span title="8 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">8</span></span><span class="v-visible-sr">8 gold badges</span><span title="51 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">51</span></span><span class="v-visible-sr">51 silver badges</span><span title="77 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">77</span></span><span class="v-visible-sr">77 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1647677" class="comments js-comments-container bt bc-black-2 mt12  dno" data-post-id="1647677" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

            </ul>
	    </div>

        <div id="comments-link-1647677" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="1652677"></a>
<div id="answer-1652677" class="answer" data-answerid="1652677"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1652677">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="2">2</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1652677/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>Saw this somewhere</p>

<pre><code>#define FSM
#define STATE(x)      s_##x :
#define NEXTSTATE(x)  goto s_##x

FSM {
  STATE(x) {
    ...
    NEXTSTATE(y);
  }

  STATE(y) {
    ...
    if (x == 0)
      NEXTSTATE(y);
    else
      NEXTSTATE(x);
  }
}
</code></pre>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-10-30T22:40:47"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1652677"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f2.5%2f"
       data-se-share-sheet-license-name="CC BY-SA 2.5"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1652677/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1652677" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-10-30 22:40:47Z" class="relativetime">Oct 30 '09 at 22:40</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/4421/pixelbeat"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/0d4eae4d8a759deacb031139c09b7a9c?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/4421/pixelbeat">pixelbeat</a><span class="d-none" itemprop="name">pixelbeat</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 26,709" dir="ltr">26.7k</span><span title="9 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">9</span></span><span class="v-visible-sr">9 gold badges</span><span title="47 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">47</span></span><span class="v-visible-sr">47 silver badges</span><span title="56 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">56</span></span><span class="v-visible-sr">56 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1652677" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="1652677" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-1524039" class="comment js-comment " data-comment-id="1524039">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">1</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">It is interesting, but no upvote until you give an example or two (and perhaps de-macro&#39;ed result) or some discussion on why this may be more practical than another.  Interesting use of orphaned brackets and macros.  I imagine something similar could be done on a language that does some sort of tail recursion optimization; you could use straight up function calls and not worry about overloading the stack space with function call garbage (which I think is what the macros are essentially overcoming here)</span>
                
&ndash;&nbsp;<a href="/users/42082/ape-inago"
                       title="1,808 reputation"
                       class="comment-user">Ape-inago</a>
                <span class="comment-date" dir="ltr"><span title="2009-10-30 22:58:39Z, License: CC BY-SA 2.5" class="relativetime-clean">Oct 30 '09 at 22:58</span></span>
            </div>
        </div>
    </li>
    <li id="comment-10644475" class="comment js-comment " data-comment-id="10644475">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">2</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">The advantages of this method are...? I see several disadvantages, such as obfuscating macros, and the use of <code>goto</code> that creates a dependency on a preemtive multitasking OS.</span>
                
&ndash;&nbsp;<a href="/users/60075/craig-mcqueen"
                       title="35,752 reputation"
                       class="comment-user">Craig McQueen</a>
                <span class="comment-date" dir="ltr"><span title="2011-12-20 22:43:55Z, License: CC BY-SA 3.0" class="relativetime-clean">Dec 20 '11 at 22:43</span></span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-1652677" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="8536569"></a>
<div id="answer-8536569" class="answer" data-answerid="8536569"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="8536569">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="2">2</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/8536569/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>Given that you imply you can use C++ and hence OO code, I would suggest evaluating the 'GoF'state pattern (GoF = Gang of Four, the guys who wrote the design patterns book which brought design patterns into the limelight).</p>

<p>It is not particularly complex and it is widely used and discussed so it is easy to see examples and explanations on line.</p>

<p>It will also quite likely be recognizable by anyone else maintaining your code at a later date.</p>

<p>If efficiency is the worry, it would be worth actually benchmarking to make sure that a non OO approach is more efficient as lots of factors affect performance and it is not always simply OO bad, functional code good. Similarly, if memory usage is a constraint for you it is again worth doing some tests or calculations to see if this will actually be an issue for your particular application if you use the state pattern. </p>

<p>The following are some links to the 'Gof' state pattern, as Craig suggests:</p>

<ul>
<li><a href="http://en.wikipedia.org/wiki/State_pattern" rel="nofollow">http://en.wikipedia.org/wiki/State_pattern</a></li>
<li><a href="http://www.vincehuston.org/dp/state.html" rel="nofollow">http://www.vincehuston.org/dp/state.html</a></li>
</ul>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2011-12-16T15:46:49"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/8536569"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f3.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 3.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/8536569/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-8536569" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>
            <div class="post-signature grid--cell fl0">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/8536569/revisions" title="show all edits to this post"
                         class="js-gps-track"
                         data-gps-track="post.click({ item: 4, priv: 0, post_type: 2 })">edited <span title="2011-12-27 20:54:12Z" class="relativetime">Dec 27 '11 at 20:54</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        
        <div class="-flair">
            
        </div>
    </div>
</div>            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2011-12-16 15:46:49Z" class="relativetime">Dec 16 '11 at 15:46</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/334402/mick"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/476b932160cd12fa0e4515a313427679?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/334402/mick">Mick</a><span class="d-none" itemprop="name">Mick</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 17,412" dir="ltr">17.4k</span><span title="1 gold badge" aria-hidden="true"><span class="badge1"></span><span class="badgecount">1</span></span><span class="v-visible-sr">1 gold badge</span><span title="36 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">36</span></span><span class="v-visible-sr">36 silver badges</span><span title="85 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">85</span></span><span class="v-visible-sr">85 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-8536569" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="8536569" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-10574614" class="comment js-comment " data-comment-id="10574614">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">looks more like a comment: could I suggest you treat it as such? i.e. not place it in the &quot;answer&quot; section.</span>
                
&ndash;&nbsp;<a href="/users/171461/jldupont"
                       title="78,686 reputation"
                       class="comment-user owner">jldupont</a>
                <span class="comment-date" dir="ltr"><span title="2011-12-16 16:41:46Z, License: CC BY-SA 3.0" class="relativetime-clean">Dec 16 '11 at 16:41</span></span>
            </div>
        </div>
    </li>
    <li id="comment-10644543" class="comment js-comment " data-comment-id="10644543">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">It would be good if you could provide a good URL link for the &quot;GoF state pattern&quot;, for those not familiar with it.</span>
                
&ndash;&nbsp;<a href="/users/60075/craig-mcqueen"
                       title="35,752 reputation"
                       class="comment-user">Craig McQueen</a>
                <span class="comment-date" dir="ltr"><span title="2011-12-20 22:47:43Z, License: CC BY-SA 3.0" class="relativetime-clean">Dec 20 '11 at 22:47</span></span>
            </div>
        </div>
    </li>
    <li id="comment-10745047" class="comment js-comment " data-comment-id="10745047">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
                    <span title="number of &#x27;useful comment&#x27; votes received"
                            class="cool">1</span>
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">@jldupont - fair comment. I changed the text to make it a proper answer as I feel based on personal experience that, unless there are specific performance issues, the GoF approach works fine and will have a relatively large &#39;user base&#39;</span>
                
&ndash;&nbsp;<a href="/users/334402/mick"
                       title="17,412 reputation"
                       class="comment-user">Mick</a>
                <span class="comment-date" dir="ltr"><span title="2011-12-27 21:04:11Z, License: CC BY-SA 3.0" class="relativetime-clean">Dec 27 '11 at 21:04</span></span>
            </div>
        </div>
    </li>
    <li id="comment-10745067" class="comment js-comment " data-comment-id="10745067">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">@Craig - added some links. Both looked accurate and clear at the time I added them.</span>
                
&ndash;&nbsp;<a href="/users/334402/mick"
                       title="17,412 reputation"
                       class="comment-user">Mick</a>
                <span class="comment-date" dir="ltr"><span title="2011-12-27 21:05:43Z, License: CC BY-SA 3.0" class="relativetime-clean">Dec 27 '11 at 21:05</span></span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-8536569" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="1647662"></a>
<div id="answer-1647662" class="answer" data-answerid="1647662"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1647662">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="1">1</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1647662/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>Your question is quite generic,<br>
Here are two reference articles that might be useful,  </p>

<ol>
<li><p><a href="http://www.embedded.com/2000/0012/0012feat1.htm" rel="nofollow noreferrer">Embedded State Machine Implementation</a> </p>

<blockquote>
  <p>This article describes a simple approach to implementing a state machine for an embedded system. For purposes of this article, a state machine is defined as an algorithm that can be in one of a small number of states. A state is a condition that causes a prescribed relationship of inputs to outputs, and of inputs to next states.<br>
  A savvy reader will quickly note that the state machines described in this article are Mealy machines. A Mealy machine is a state machine where the outputs are a function of both present state and input, as opposed to a Moore machine, in which the outputs are a function only of state.</p>
</blockquote>

<ul>
<li><a href="http://www.netrino.com/Embedded-Systems/How-To/Coding-State-Machines" rel="nofollow noreferrer">Coding State Machines in C and C++</a>  

<blockquote>
  <p>My preoccupation in this article is with state-machine fundamentals and some straightforward programming guidelines for coding state machines in C or C++. I hope that these simple techniques can become more common, so that you (and others) can readily see the state-machine structure right from the source code. </p>
</blockquote></li>
</ul></li>
</ol>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-10-30T02:18:11"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1647662"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f2.5%2f"
       data-se-share-sheet-license-name="CC BY-SA 2.5"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1647662/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1647662" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-10-30 02:18:11Z" class="relativetime">Oct 30 '09 at 2:18</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/70482/nik"><div class="gravatar-wrapper-32"><img src="https://i.stack.imgur.com/DdGHY.jpg?s=32&amp;g=1" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/70482/nik">nik</a><span class="d-none" itemprop="name">nik</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 12,226" dir="ltr">12.2k</span><span title="3 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">3</span></span><span class="v-visible-sr">3 gold badges</span><span title="34 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">34</span></span><span class="v-visible-sr">34 silver badges</span><span title="53 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">53</span></span><span class="v-visible-sr">53 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1647662" class="comments js-comments-container bt bc-black-2 mt12  dno" data-post-id="1647662" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

            </ul>
	    </div>

        <div id="comments-link-1647662" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="1936573"></a>
<div id="answer-1936573" class="answer" data-answerid="1936573"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="1936573">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="1">1</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/1936573/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>I have used <a href="http://smc.sourceforge.net/" rel="nofollow noreferrer">State Machine Compiler</a> in Java and Python projects to with success.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2009-12-20T18:41:14"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/1936573"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f2.5%2f"
       data-se-share-sheet-license-name="CC BY-SA 2.5"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/1936573/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-1936573" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2009-12-20 18:41:14Z" class="relativetime">Dec 20 '09 at 18:41</span>
    </div>
    <div class="user-gravatar32">
        <span class="anonymous-gravatar"></span>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        user177800<span class="d-none" itemprop="name">user177800</span>
        <div class="-flair">
            
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-1936573" class="comments js-comments-container bt bc-black-2 mt12  dno" data-post-id="1936573" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

            </ul>
	    </div>

        <div id="comments-link-1936573" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="31665273"></a>
<div id="answer-31665273" class="answer" data-answerid="31665273"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="31665273">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="1">1</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/31665273/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>This is an old post with lots of answers, but I thought I'd add my own approach to the finite state machine in C. I made a Python script to produce the skeleton C code for any number of states. That script is documented on GituHub at <a href="https://github.com/ChisholmKyle/FsmTemplateC" rel="nofollow">FsmTemplateC</a></p>

<p>This example is based on other approaches I've read about. It doesn't use goto or switch statements but instead has transition functions in a pointer matrix (look-up table). The code relies on a big multi-line initializer macro and C99 features (designated initializers and compound literals) so if you don't like these things, you might not like this approach. </p>

<p>Here is a Python script of a <a href="https://en.wikipedia.org/wiki/Finite-state_machine#Example:_coin-operated_turnstile" rel="nofollow">turnstile example</a> which generates skeleton C-code using <a href="https://github.com/ChisholmKyle/FsmTemplateC" rel="nofollow">FsmTemplateC</a>:</p>

<pre><code># dict parameter for generating FSM
fsm_param = {
    # main FSM struct type string
    'type': 'FsmTurnstile',
    # struct type and name for passing data to state machine functions
    # by pointer (these custom names are optional)
    'fopts': {
        'type': 'FsmTurnstileFopts',
        'name': 'fopts'
    },
    # list of states
    'states': ['locked', 'unlocked'],
    # list of inputs (can be any length &gt; 0)
    'inputs': ['coin', 'push'],
    # map inputs to commands (next desired state) using a transition table
    # index of array corresponds to 'inputs' array
    # for this example, index 0 is 'coin', index 1 is 'push'
    'transitiontable': {
        # current state |  'coin'  |  'push'  |
        'locked':       ['unlocked',        ''],
        'unlocked':     [        '',  'locked']
    }
}

# folder to contain generated code
folder = 'turnstile_example'
# function prefix
prefix = 'fsm_turnstile'

# generate FSM code
code = fsm.Fsm(fsm_param).genccode(folder, prefix)
</code></pre>

<p>The generated output header contains the typedefs:</p>

<pre><code>/* function options (EDIT) */
typedef struct FsmTurnstileFopts {
    /* define your options struct here */
} FsmTurnstileFopts;

/* transition check */
typedef enum eFsmTurnstileCheck {
    EFSM_TURNSTILE_TR_RETREAT,
    EFSM_TURNSTILE_TR_ADVANCE,
    EFSM_TURNSTILE_TR_CONTINUE,
    EFSM_TURNSTILE_TR_BADINPUT
} eFsmTurnstileCheck;

/* states (enum) */
typedef enum eFsmTurnstileState {
    EFSM_TURNSTILE_ST_LOCKED,
    EFSM_TURNSTILE_ST_UNLOCKED,
    EFSM_TURNSTILE_NUM_STATES
} eFsmTurnstileState;

/* inputs (enum) */
typedef enum eFsmTurnstileInput {
    EFSM_TURNSTILE_IN_COIN,
    EFSM_TURNSTILE_IN_PUSH,
    EFSM_TURNSTILE_NUM_INPUTS,
    EFSM_TURNSTILE_NOINPUT
} eFsmTurnstileInput;

/* finite state machine struct */
typedef struct FsmTurnstile {
    eFsmTurnstileInput input;
    eFsmTurnstileCheck check;
    eFsmTurnstileState cur;
    eFsmTurnstileState cmd;
    eFsmTurnstileState **transition_table;
    void (***state_transitions)(struct FsmTurnstile *, FsmTurnstileFopts *);
    void (*run)(struct FsmTurnstile *, FsmTurnstileFopts *, const eFsmTurnstileInput);
} FsmTurnstile;

/* transition functions */
typedef void (*pFsmTurnstileStateTransitions)(struct FsmTurnstile *, FsmTurnstileFopts *);
</code></pre>

<ul>
<li>enum <code>eFsmTurnstileCheck</code> is used to determine whether a transition was blocked with <code>EFSM_TURNSTILE_TR_RETREAT</code>, allowed to progress with <code>EFSM_TURNSTILE_TR_ADVANCE</code>, or the function call was not preceded by a transition with <code>EFSM_TURNSTILE_TR_CONTINUE</code>.</li>
<li>enum <code>eFsmTurnstileState</code> is simply the list of states.</li>
<li>enum <code>eFsmTurnstileInput</code> is simply the list of inputs.</li>
<li>The <code>FsmTurnstile</code> struct is the heart of the state machine with the transition check, function lookup table, current state, commanded state, and an alias to the primary function that runs the machine.</li>
<li>Every function pointer (alias) in <code>FsmTurnstile</code> should only be called from the struct and has to have its first input as a pointer to itself so as to maintain a persistent state, object-oriented style.</li>
</ul>

<p>Now for the function declarations in the header:</p>

<pre><code>/* fsm declarations */
void fsm_turnstile_locked_locked (FsmTurnstile *fsm, FsmTurnstileFopts *fopts);
void fsm_turnstile_locked_unlocked (FsmTurnstile *fsm, FsmTurnstileFopts *fopts);
void fsm_turnstile_unlocked_locked (FsmTurnstile *fsm, FsmTurnstileFopts *fopts);
void fsm_turnstile_unlocked_unlocked (FsmTurnstile *fsm, FsmTurnstileFopts *fopts);
void fsm_turnstile_run (FsmTurnstile *fsm, FsmTurnstileFopts *fopts, const eFsmTurnstileInput input);
</code></pre>

<p>Function names are in the format <code>{prefix}_{from}_{to}</code>, where <code>{from}</code> is the previous (current) state and <code>{to}</code> is the next state. Note that if the transition table does not allow for certain transitions, a NULL pointer instead of a function pointer will be set. Finally, the magic happens with a macro. Here we build the transition table (matrix of state enums) and the state transition functions look up table (a matrix of function pointers):</p>

<pre><code>/* creation macro */
#define FSM_TURNSTILE_CREATE() \
{ \
    .input = EFSM_TURNSTILE_NOINPUT, \
    .check = EFSM_TURNSTILE_TR_CONTINUE, \
    .cur = EFSM_TURNSTILE_ST_LOCKED, \
    .cmd = EFSM_TURNSTILE_ST_LOCKED, \
    .transition_table = (eFsmTurnstileState * [EFSM_TURNSTILE_NUM_STATES]) { \
        (eFsmTurnstileState [EFSM_TURNSTILE_NUM_INPUTS]) { \
            EFSM_TURNSTILE_ST_UNLOCKED, \
            EFSM_TURNSTILE_ST_LOCKED \
        }, \
        (eFsmTurnstileState [EFSM_TURNSTILE_NUM_INPUTS]) { \
            EFSM_TURNSTILE_ST_UNLOCKED, \
            EFSM_TURNSTILE_ST_LOCKED \
        } \
    }, \
    .state_transitions = (pFsmTurnstileStateTransitions * [EFSM_TURNSTILE_NUM_STATES]) { \
        (pFsmTurnstileStateTransitions [EFSM_TURNSTILE_NUM_STATES]) { \
            fsm_turnstile_locked_locked, \
            fsm_turnstile_locked_unlocked \
        }, \
        (pFsmTurnstileStateTransitions [EFSM_TURNSTILE_NUM_STATES]) { \
            fsm_turnstile_unlocked_locked, \
            fsm_turnstile_unlocked_unlocked \
        } \
    }, \
    .run = fsm_turnstile_run \
}
</code></pre>

<p>When creating the FSM, the macro <code>FSM_EXAMPLE_CREATE()</code> has to be used. </p>

<p>Now, in the source code every state transition function declared above should be populated. The <code>FsmTurnstileFopts</code> struct can be used to pass data to/from the state machine. Every transition must set <code>fsm-&gt;check</code> to be equal to either <code>EFSM_EXAMPLE_TR_RETREAT</code> to block it from transitioning or <code>EFSM_EXAMPLE_TR_ADVANCE</code> to allow it to transition to the commanded state. 
A working example can be found at (FsmTemplateC)[<a href="https://github.com/ChisholmKyle/FsmTemplateC]" rel="nofollow">https://github.com/ChisholmKyle/FsmTemplateC]</a>.</p>

<p>Here is the very simple actual usage in your code: </p>

<pre><code>/* create fsm */
FsmTurnstile fsm = FSM_TURNSTILE_CREATE();
/* create fopts */
FsmTurnstileFopts fopts = {
    .msg = ""
};
/* initialize input */
eFsmTurnstileInput input = EFSM_TURNSTILE_NOINPUT;

/* main loop */
for (;;) {
    /* wait for timer signal, inputs, interrupts, whatever */
    /* optionally set the input (my_input = EFSM_TURNSTILE_IN_PUSH for example) */
    /* run state machine */
    my_fsm.run(&amp;my_fsm, &amp;my_fopts, my_input);
}
</code></pre>

<p>All that header business and all those functions just to have a simple and fast interface is worth it in my mind.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2015-07-27T23:51:30"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/31665273"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f3.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 3.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/31665273/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-31665273" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>
            <div class="post-signature grid--cell fl0">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/31665273/revisions" title="show all edits to this post"
                         class="js-gps-track"
                         data-gps-track="post.click({ item: 4, priv: 0, post_type: 2 })">edited <span title="2016-09-05 17:58:04Z" class="relativetime">Sep 5 '16 at 17:58</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        
        <div class="-flair">
            
        </div>
    </div>
</div>            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2015-07-27 23:51:30Z" class="relativetime">Jul 27 '15 at 23:51</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/3183836/chisholmkyle"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/8be0fbea4cd36221aea7406b62434b17?s=32&amp;d=identicon&amp;r=PG&amp;f=1" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/3183836/chisholmkyle">ChisholmKyle</a><span class="d-none" itemprop="name">ChisholmKyle</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">359</span><span title="1 silver badge" aria-hidden="true"><span class="badge2"></span><span class="badgecount">1</span></span><span class="v-visible-sr">1 silver badge</span><span title="9 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">9</span></span><span class="v-visible-sr">9 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-31665273" class="comments js-comments-container bt bc-black-2 mt12  dno" data-post-id="31665273" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

            </ul>
	    </div>

        <div id="comments-link-31665273" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="59475349"></a>
<div id="answer-59475349" class="answer" data-answerid="59475349"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="59475349">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="1">1</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/59475349/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>You can consider <a href="https://github.com/kiishor/UML-State-Machine-in-C" rel="nofollow noreferrer">UML-state-machine-in-c</a>, a &quot;lightweight&quot; state machine framework in C. I have written this framework to support both <strong>Finite state machine</strong> and <strong>Hierarchical state machine</strong>. Compare to state tables or simple switch cases, a framework approach is more scalable. It can be used for simple finite state machines to complex hierarchical state machines.</p>
<p>State machine is represented by <code>state_machine_t</code> structure. It contains only two members &quot;Event&quot; and a pointer to the &quot;state_t&quot;.</p>
<pre><code>struct state_machine_t
{
   uint32_t Event;          //!&lt; Pending Event for state machine
   const state_t* State;    //!&lt; State of state machine.
};
</code></pre>
<p><code>state_machine_t</code> must be the first member of your state machine structure. e.g.</p>
<pre><code>struct user_state_machine
{
  state_machine_t Machine;    // Base state machine. Must be the first member of user derived state machine.

  // User specific state machine members
  uint32_t param1;
  uint32_t param2;
  ...
};
</code></pre>
<p><code>state_t</code> contains a handler for the state and also optional handlers for entry and exit action.</p>
<pre><code>//! finite state structure
struct finite_state{
  state_handler Handler;      //!&lt; State handler to handle event of the state
  state_handler Entry;        //!&lt; Entry action for state
  state_handler Exit;          //!&lt; Exit action for state.
};
</code></pre>
<p>If the framework is configured for a hierarchical state machine then the <code>state_t</code> contains a pointer to parent and child state.</p>
<p>Framework provides an API <code>dispatch_event</code> to dispatch the event to the state machine and <code>switch_state</code> to trigger state transition.</p>
<p>For further details on how to implement a hierarchical state machine refer to the <a href="https://github.com/kiishor/UML-State-Machine-in-C" rel="nofollow noreferrer">GitHub</a> repository.</p>
<p>code examples,</p>
<p><a href="https://github.com/kiishor/UML-State-Machine-in-C/blob/master/demo/simple_state_machine/readme.md" rel="nofollow noreferrer">https://github.com/kiishor/UML-State-Machine-in-C/blob/master/demo/simple_state_machine/readme.md</a>
<a href="https://github.com/kiishor/UML-State-Machine-in-C/blob/master/demo/simple_state_machine_enhanced/readme.md" rel="nofollow noreferrer">https://github.com/kiishor/UML-State-Machine-in-C/blob/master/demo/simple_state_machine_enhanced/readme.md</a></p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2019-12-25T04:55:12"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/59475349"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f4.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 4.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/59475349/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-59475349" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>
            <div class="post-signature grid--cell fl0">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="/posts/59475349/revisions" title="show all edits to this post"
                         class="js-gps-track"
                         data-gps-track="post.click({ item: 4, priv: 0, post_type: 2 })">edited <span title="2020-06-20 09:12:55Z" class="relativetime">Jun 20 at 9:12</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="/users/-1/community"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/-1/community">Community</a><span class="mod-flair " title="moderator">&#9830;</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">1</span><span title="1 silver badge" aria-hidden="true"><span class="badge2"></span><span class="badgecount">1</span></span><span class="v-visible-sr">1 silver badge</span>
        </div>
    </div>
</div>            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2019-12-25 04:55:12Z" class="relativetime">Dec 25 '19 at 4:55</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/2857369/nandkishor-biradar"><div class="gravatar-wrapper-32"><img src="https://i.stack.imgur.com/yawmk.jpg?s=32&amp;g=1" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/2857369/nandkishor-biradar">Nandkishor Biradar</a><span class="d-none" itemprop="name">Nandkishor Biradar</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">57</span><span title="6 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">6</span></span><span class="v-visible-sr">6 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-59475349" class="comments js-comments-container bt bc-black-2 mt12  dno" data-post-id="59475349" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

            </ul>
	    </div>

        <div id="comments-link-59475349" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="8979040"></a>
<div id="answer-8979040" class="answer" data-answerid="8979040"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="8979040">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="0">0</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/8979040/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>You could use the open source library <a href="http://www.openfst.org" rel="nofollow">OpenFST</a>.</p>

<blockquote>
  <p>OpenFst is a library for constructing, combining, optimizing, and searching weighted finite-state transducers (FSTs). Weighted finite-state transducers are automata where each transition has an input label, an output label, and a weight. The more familiar finite-state acceptor is represented as a transducer with each transition's input and output label equal. Finite-state acceptors are used to represent sets of strings (specifically, regular or rational sets); finite-state transducers are used to represent binary relations between pairs of strings (specifically, rational transductions). The weights can be used to represent the cost of taking a particular transition.</p>
</blockquote>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2012-01-23T21:44:19"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/8979040"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f3.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 3.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/8979040/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-8979040" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2012-01-23 21:44:19Z" class="relativetime">Jan 23 '12 at 21:44</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/504611/vicky-chijwani"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/c0a367b5cf1f103490f0e967886dc221?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/504611/vicky-chijwani">Vicky Chijwani</a><span class="d-none" itemprop="name">Vicky Chijwani</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">9,306</span><span title="6 gold badges" aria-hidden="true"><span class="badge1"></span><span class="badgecount">6</span></span><span class="v-visible-sr">6 gold badges</span><span title="52 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">52</span></span><span class="v-visible-sr">52 silver badges</span><span title="78 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">78</span></span><span class="v-visible-sr">78 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-8979040" class="comments js-comments-container bt bc-black-2 mt12  dno" data-post-id="8979040" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

            </ul>
	    </div>

        <div id="comments-link-8979040" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="35100160"></a>
<div id="answer-35100160" class="answer" data-answerid="35100160"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="35100160">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="0">0</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/35100160/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<pre><code>void (* StateController)(void); 
void state1(void);
void state2(void);

void main()
{
 StateController=&amp;state1;
 while(1)
 {
  (* StateController)();
 }
}

void state1(void)
{
 //do something in state1
 StateController=&amp;state2;
}

void state2(void)
{
 //do something in state2
 //Keep changing function direction based on state transition
 StateController=&amp;state1;
}
</code></pre>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2016-01-30T09:36:39"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/35100160"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f3.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 3.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/35100160/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-35100160" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2016-01-30 09:36:39Z" class="relativetime">Jan 30 '16 at 9:36</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/5753034/alphagoku"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/813d3a6cdf75243a4f5fac45207848a2?s=32&amp;d=identicon&amp;r=PG&amp;f=1" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/5753034/alphagoku">AlphaGoku</a><span class="d-none" itemprop="name">AlphaGoku</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">812</span><span title="1 gold badge" aria-hidden="true"><span class="badge1"></span><span class="badgecount">1</span></span><span class="v-visible-sr">1 gold badge</span><span title="7 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">7</span></span><span class="v-visible-sr">7 silver badges</span><span title="21 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">21</span></span><span class="v-visible-sr">21 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-35100160" class="comments js-comments-container bt bc-black-2 mt12 " data-post-id="35100160" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

                        <li id="comment-58105408" class="comment js-comment " data-comment-id="58105408">
        <div class="js-comment-actions comment-actions">
            <div class="comment-score js-comment-edit-hide">
            </div>
        </div>
        <div class="comment-text js-comment-text-and-form">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">You can further optimize it for safety by using an array of constant function pointers to functions</span>
                
&ndash;&nbsp;<a href="/users/5753034/alphagoku"
                       title="812 reputation"
                       class="comment-user">AlphaGoku</a>
                <span class="comment-date" dir="ltr"><span title="2016-02-04 06:53:46Z, License: CC BY-SA 3.0" class="relativetime-clean">Feb 4 '16 at 6:53</span></span>
            </div>
        </div>
    </li>

            </ul>
	    </div>

        <div id="comments-link-35100160" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="41118097"></a>
<div id="answer-41118097" class="answer" data-answerid="41118097"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="41118097">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="0">0</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/41118097/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>I personally use self referencing structs in combination with pointer arrays.
I uploaded a tutorial on github a while back, link: </p>

<p><a href="https://github.com/mmelchger/polling_state_machine_c" rel="nofollow noreferrer">https://github.com/mmelchger/polling_state_machine_c</a></p>

<p>Note: I do realise that this thread is quite old, but I hope to get input and thoughts on the design of the state-machine as well as being able to provide an example for a possible state-machine design in C.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2016-12-13T09:55:03"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/41118097"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f3.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 3.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/41118097/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-41118097" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2016-12-13 09:55:03Z" class="relativetime">Dec 13 '16 at 9:55</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/727120/mmoment"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/1bbab671c238e654ba432c838664ee8d?s=32&amp;d=identicon&amp;r=PG" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/727120/mmoment">mmoment</a><span class="d-none" itemprop="name">mmoment</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">1,249</span><span title="14 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">14</span></span><span class="v-visible-sr">14 silver badges</span><span title="27 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">27</span></span><span class="v-visible-sr">27 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-41118097" class="comments js-comments-container bt bc-black-2 mt12  dno" data-post-id="41118097" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

            </ul>
	    </div>

        <div id="comments-link-41118097" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>

                                          
<a name="60787818"></a>
<div id="answer-60787818" class="answer" data-answerid="60787818"  itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer">
    <div class="post-layout">
        <div class="votecell post-layout--left">
            <div class="js-voting-container grid fd-column ai-stretch gs4 fc-black-200" data-post-id="60787818">
        <button class="js-vote-up-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is useful" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div class="js-vote-count grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount" data-value="-1">-1</div>
        <button class="js-vote-down-btn grid--cell s-btn s-btn__unset c-pointer" data-controller="s-tooltip" data-s-tooltip-placement="right" title="This answer is not useful" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>

    
            <div class="js-accepted-answer-indicator grid--cell fc-green-500 ta-center py4 d-none" data-s-tooltip-placement="right" title="Loading when this answer was accepted&#x2026;" tabindex="0" role="note" aria-label="Accepted">
                <svg aria-hidden="true" class="svg-icon iconCheckmarkLg" width="36" height="36" viewBox="0 0 36 36"><path d="M6 14l8 8L30 6v8L14 30l-8-8v-8z"/></svg>
            </div>

    
        <a class="js-post-issue grid--cell s-btn s-btn__unset c-pointer py6 mx-auto" href="/posts/60787818/timeline" data-shortcut="T" data-controller="s-tooltip" data-s-tooltip-placement="right" title="Show activity on this post." aria-label="Timeline"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 113.73 6.77L8.2 14.3A6 6 0 105 9l3.01-.01-4 4-4-4h3L3 9zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5z"/></svg></a>

</div>

        </div>

        

<div class="answercell post-layout--right">
    
    <div class="s-prose js-post-body" itemprop="text">
<p>Here is a method for a state machine that uses macros such that each function can have its own set of states: <a href="https://www.codeproject.com/Articles/37037/Macros-to-simulate-multi-tasking-blocking-code-at" rel="nofollow noreferrer">https://www.codeproject.com/Articles/37037/Macros-to-simulate-multi-tasking-blocking-code-at</a></p>

<p>It is titled "simulate multi tasking" but that is not the only use.</p>

<p>This method uses callbacks to pickup in each function where it left off. Each function contains a list of states unique to each function. A central "idle loop" is used to run the state machines. The "idle loop" has no idea how the state machines work, it is the individual functions that "know what to do". In order to write code for the functions, one just creates a list of states and uses the macros to "suspend" and "resume". I used these macros at Cisco when I wrote the Transceiver Library for the Nexus 7000 switch.</p>
    </div>
    <div class="mt24">
        <div class="grid fw-wrap ai-start jc-end gs8 gsy">
            <time itemprop="dateCreated" datetime="2020-03-21T12:33:35"></time>
            <div class="grid--cell mr16" style="flex: 1 1 100px;">
                

<div class="post-menu">
    <a href="/a/60787818"
       rel="nofollow"
       itemprop="url"
       class="js-share-link js-gps-track"
       title="short permalink to this answer"
       data-gps-track="post.click({ item: 2, priv: 0, post_type: 2 })"
       data-controller="se-share-sheet"
       data-se-share-sheet-title="Share a link to this answer"
       data-se-share-sheet-subtitle=""
       data-se-share-sheet-post-type="answer"
       data-se-share-sheet-social="facebook twitter devto"
       data-se-share-sheet-location="2"
       data-se-share-sheet-license-url="https%3a%2f%2fcreativecommons.org%2flicenses%2fby-sa%2f4.0%2f"
       data-se-share-sheet-license-name="CC BY-SA 4.0"
       data-s-popover-placement="bottom-start">share</a>
        <span class="lsep">|</span>
                <a href="/posts/60787818/edit" class="suggest-edit-post js-gps-track" data-gps-track="post.click({ item: 6, priv: 0, post_type: 2 })" title="">improve this answer</a>
        <span class="lsep">|</span>
    <button id="btnFollowPost-60787818" class="s-btn s-btn__link fc-black-400 h:fc-black-700 pb2 js-follow-post js-follow-answer js-gps-track" role="button"
            data-gps-track="post.click({ item: 14, priv: 0, post_type: 2 })"
            data-controller="s-tooltip " data-s-tooltip-placement="bottom"
            data-s-popover-placement="bottom" aria-controls=""
            title="Follow this answer to receive notifications">
        follow
    </button>
        <span class="lsep">|</span>
</div>

            </div>


            <div class="post-signature grid--cell fl0">
                <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2020-03-21 12:33:35Z" class="relativetime">Mar 21 at 12:33</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/215779/eddyq"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/d3bd6e8f48c598795c657ead05318a5d?s=32&amp;d=identicon&amp;r=PG&amp;f=1" alt="" width="32" height="32" class="bar-sm"></div></a>
    </div>
    <div class="user-details" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <a href="/users/215779/eddyq">eddyq</a><span class="d-none" itemprop="name">eddyq</span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">725</span><span title="1 gold badge" aria-hidden="true"><span class="badge1"></span><span class="badgecount">1</span></span><span class="v-visible-sr">1 gold badge</span><span title="8 silver badges" aria-hidden="true"><span class="badge2"></span><span class="badgecount">8</span></span><span class="v-visible-sr">8 silver badges</span><span title="22 bronze badges" aria-hidden="true"><span class="badge3"></span><span class="badgecount">22</span></span><span class="v-visible-sr">22 bronze badges</span>
        </div>
    </div>
</div>

            </div>
        </div>
    </div>
    
</div>




                <div class="post-layout--right">
        <div id="comments-60787818" class="comments js-comments-container bt bc-black-2 mt12  dno" data-post-id="60787818" data-min-length="15">
            <ul class="comments-list js-comments-list"
                    data-remaining-comments-count="0"
                    data-canpost="false"
                    data-cansee="true"
                    data-comments-unavailable="false"
                    data-addlink-disabled="true">

            </ul>
	    </div>

        <div id="comments-link-60787818" data-rep=50 data-anon=true>
                    <a class="js-add-link comments-link disabled-link" title="Use comments to ask for more information or suggest improvements. Avoid comments like &#x201C;&#x2B;1&#x201D; or &#x201C;thanks&#x201D;."  href="#" role="button">add a comment</a>
                <span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href=# onclick="" role="button"></a>
        </div>         
    </div>
    </div>
</div>


                                    <aside class="s-notice s-notice__info js-post-notice mb16" role="status">
        <div class="grid fd-column fw-nowrap">
            <div class="grid fw-nowrap">
                    <div class="grid--cell mr8">
                        <svg aria-hidden="true" class="svg-icon iconFire" width="18" height="18" viewBox="0 0 18 18"><path opacity=".6" d="M13.18 9c-.8.33-1.46.6-1.97 1.3A9.21 9.21 0 0010 13.89a10 10 0 001.32-.8 2.53 2.53 0 01-.63 2.91h.78a3 3 0 001.66-.5 4.15 4.15 0 001.26-1.61c.4-.96.47-1.7.55-2.73.05-1.24-.1-2.49-.46-3.68a2 2 0 01-.4.91 2.1 2.1 0 01-.9.62z" fill="#FF6700"/><path d="M10.4 12.11a7.1 7.1 0 01.78-1.76c.3-.47.81-.8 1.37-1.08 0 0-.05-3.27-1.55-5.27-1.5-2-3.37-2.75-4.95-2.61 0 0 3.73 2.42.72 5.15C4.63 8.45 3.59 10.87 4.13 13a4.14 4.14 0 003.1 3 4.05 4.05 0 011.08-3.89C9.42 10.92 8 9.79 8 9.79c.67.02 1.3.28 1.81.72a2 2 0 01.58 1.6z" fill="#EF2E2E"/></svg>
                    </div>
                <div class="grid--cell fl1 lh-lg">
                    <div class="grid--cell fl1 lh-lg">
                        <b><a href="/help/privileges/protect-questions">Highly active question</a></b>. Earn 10 reputation in order to answer this question. The reputation requirement helps protect this question from spam and non-answer activity.
                        
                    </div>
                </div>
            </div>
        </div>
</aside>




                            <h2 class="bottom-notice" data-loc="1">
Not the answer you&#x27;re looking for? Browse other questions tagged <a href="/questions/tagged/c%2b%2b" class="post-tag" title="show questions tagged &#39;c++&#39;" rel="tag">c++</a> <a href="/questions/tagged/c" class="post-tag" title="show questions tagged &#39;c&#39;" rel="tag">c</a> <a href="/questions/tagged/architecture" class="post-tag" title="show questions tagged &#39;architecture&#39;" rel="tag">architecture</a> <a href="/questions/tagged/state-machine" class="post-tag" title="show questions tagged &#39;state-machine&#39;" rel="tag">state-machine</a>  or <a href="/questions/ask">ask your own question</a>.                            </h2>
                </div>
            </div>
            <div id="sidebar" class="show-votes" role="complementary" aria-label="sidebar">
                
<div class="s-sidebarwidget s-sidebarwidget__yellow s-anchors s-anchors__grayscale mb16" data-tracker="cb=1">
    <ul class="d-block p0 m0">
                    <div class="s-sidebarwidget--header s-sidebarwidget__small-bold-text fc-light d:fc-black-900 bb bbw1">
                        The Overflow Blog
                    </div>
        <li class="s-sidebarwidget--item grid px16">
            <div class="grid--cell1 fl-shrink0">
<svg aria-hidden="true" class="va-text-top svg-icon iconPencilSm" width="14" height="14" viewBox="0 0 14 14"><path d="M11.1 1.71l1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0zM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88z"/></svg>            </div>
            <div class="grid--cell">
                <a href="https://stackoverflow.blog/2020/09/28/migration-wiki-documentation-articles/" class="js-gps-track" data-ga="[&quot;community bulletin board&quot;,&quot;The Overflow Blog&quot;,&quot;https://stackoverflow.blog/2020/09/28/migration-wiki-documentation-articles/&quot;,null,null]" data-gps-track="communitybulletin.click({ priority: 1, position: 0 })">How Stackers ditched the wiki and migrated to Articles</a>
            </div>
        </li>
        <li class="s-sidebarwidget--item grid px16">
            <div class="grid--cell1 fl-shrink0">
<svg aria-hidden="true" class="va-text-top svg-icon iconPencilSm" width="14" height="14" viewBox="0 0 14 14"><path d="M11.1 1.71l1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0zM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88z"/></svg>            </div>
            <div class="grid--cell">
                <a href="https://stackoverflow.blog/2020/09/30/the-loop-september-2020-summer-bridge-to-tech-for-kids/" class="js-gps-track" data-ga="[&quot;community bulletin board&quot;,&quot;The Overflow Blog&quot;,&quot;https://stackoverflow.blog/2020/09/30/the-loop-september-2020-summer-bridge-to-tech-for-kids/&quot;,null,null]" data-gps-track="communitybulletin.click({ priority: 1, position: 1 })">The Loop- September 2020: Summer Bridge to Tech for Kids</a>
            </div>
        </li>
                    <div class="s-sidebarwidget--header s-sidebarwidget__small-bold-text fc-light d:fc-black-900 bb bbw1">
                        Featured on Meta
                    </div>
        <li class="s-sidebarwidget--item grid px16">
            <div class="grid--cell1 fl-shrink0">
<div class="favicon favicon-stackexchangemeta" title="Meta Stack Exchange"></div>            </div>
            <div class="grid--cell">
                <a href="https://meta.stackexchange.com/questions/353492/hot-meta-posts-allow-for-removal-by-moderators-and-thoughts-about-future-impro" class="js-gps-track" title="Hot Meta Posts: Allow for removal by moderators, and thoughts about future improvements" data-ga="[&quot;community bulletin board&quot;,&quot;Featured on Meta&quot;,&quot;https://meta.stackexchange.com/questions/353492/hot-meta-posts-allow-for-removal-by-moderators-and-thoughts-about-future-impro&quot;,null,null]" data-gps-track="communitybulletin.click({ priority: 3, position: 2 })">Hot Meta Posts: Allow for removal by moderators, and thoughts about future&hellip;</a>
            </div>
        </li>
        <li class="s-sidebarwidget--item grid px16">
            <div class="grid--cell1 fl-shrink0">
<div class="favicon favicon-stackexchangemeta" title="Meta Stack Exchange"></div>            </div>
            <div class="grid--cell">
                <a href="https://meta.stackexchange.com/questions/353983/goodbye-prettify-hello-highlight-js-swapping-out-our-syntax-highlighter" class="js-gps-track" data-ga="[&quot;community bulletin board&quot;,&quot;Featured on Meta&quot;,&quot;https://meta.stackexchange.com/questions/353983/goodbye-prettify-hello-highlight-js-swapping-out-our-syntax-highlighter&quot;,null,null]" data-gps-track="communitybulletin.click({ priority: 3, position: 3 })">Goodbye, Prettify. Hello highlight.js! Swapping out our Syntax Highlighter</a>
            </div>
        </li>
        <li class="s-sidebarwidget--item grid px16">
            <div class="grid--cell1 fl-shrink0">
<div class="favicon favicon-stackoverflowmeta" title="Meta Stack Overflow"></div>            </div>
            <div class="grid--cell">
                <a href="https://meta.stackoverflow.com/questions/401031/how-does-the-highlight-js-change-affect-stack-overflow-specifically" class="js-gps-track" data-ga="[&quot;community bulletin board&quot;,&quot;Featured on Meta&quot;,&quot;https://meta.stackoverflow.com/questions/401031/how-does-the-highlight-js-change-affect-stack-overflow-specifically&quot;,null,null]" data-gps-track="communitybulletin.click({ priority: 6, position: 4 })">How does the highlight.js change affect Stack Overflow specifically?</a>
            </div>
        </li>
    </ul>
</div>


                    <div class="js-sidebar-zone" style="min-height: 735px;">
                        <div class="js-zone-container zone-container-sidebar">
    <div id="dfp-tsb" class="everyonelovesstackoverflow everyoneloves__top-sidebar"></div>
    <div class="js-report-ad-button-container " style="width: 300px"></div>
</div>

                        <div class="js-zone-container zone-container-sidebar">
    <div id="dfp-msb" class="everyonelovesstackoverflow everyoneloves__mid-sidebar"></div>
    <div class="js-report-ad-button-container " style="width: 300px"></div>
</div>

                        <div id="hireme"></div>
                    </div>
    
<div class="s-sidebarwidget mb16 module">
    <div class="s-sidebarwidget--header grid ai-center">
        <a href="https://chat.stackoverflow.com/" class="js-chat-ad-link">Visit chat</a>
    </div>
        <div class="s-sidebarwidget--content s-sidebarwidget__items d-none js-chat-ad-rooms"></div>
</div>


    <script>
    // <!--
        StackExchange.ready(function () {
            var options = {
                chatUrl: 'https://chat.stackoverflow.com/',
                reloadUrl: '/api/recent-chat',
                preloadedData: null,
                tagBased: true,
            };

            StackExchange.chatAd.init(options);
        });
    // -->
    </script>


                    <div class="module sidebar-linked">
	<h4 id="h-linked">Linked</h4>
	<div class="linked" data-tracker="lq=1">
            <div class="spacer js-gps-track" data-gps-track="linkedquestion.click({ source_post_id: 1647631, target_question_id: 7492272, position: 0 })">
				<a href="/q/7492272" title="Vote score (upvotes - downvotes)">
					<div class="answer-votes  default">3</div>
				</a>
				<a href="/questions/7492272/design-pattern-suggestion-for-ussd?noredirect=1" class="question-hyperlink">design pattern suggestion for ussd</a>
			</div>
            <div class="spacer js-gps-track" data-gps-track="linkedquestion.click({ source_post_id: 1647631, target_question_id: 133214, position: 1 })">
				<a href="/q/133214" title="Vote score (upvotes - downvotes)">
					<div class="answer-votes answered-accepted large">118</div>
				</a>
				<a href="/questions/133214/is-there-a-typical-state-machine-implementation-pattern?noredirect=1" class="question-hyperlink">Is there a typical state machine implementation pattern?</a>
			</div>
            <div class="spacer js-gps-track" data-gps-track="linkedquestion.click({ source_post_id: 1647631, target_question_id: 4275602, position: 2 })">
				<a href="/q/4275602" title="Vote score (upvotes - downvotes)">
					<div class="answer-votes answered-accepted large">144</div>
				</a>
				<a href="/questions/4275602/boost-statechart-vs-meta-state-machine?noredirect=1" class="question-hyperlink">Boost Statechart vs. Meta State Machine</a>
			</div>
            <div class="spacer js-gps-track" data-gps-track="linkedquestion.click({ source_post_id: 1647631, target_question_id: 1371460, position: 3 })">
				<a href="/q/1371460" title="Vote score (upvotes - downvotes)">
					<div class="answer-votes answered-accepted default">72</div>
				</a>
				<a href="/questions/1371460/state-machines-tutorials?noredirect=1" class="question-hyperlink">state machines tutorials</a>
			</div>
            <div class="spacer js-gps-track" data-gps-track="linkedquestion.click({ source_post_id: 1647631, target_question_id: 2101961, position: 4 })">
				<a href="/q/2101961" title="Vote score (upvotes - downvotes)">
					<div class="answer-votes answered-accepted default">49</div>
				</a>
				<a href="/questions/2101961/python-state-machine-design?noredirect=1" class="question-hyperlink">Python state-machine design</a>
			</div>
            <div class="spacer js-gps-track" data-gps-track="linkedquestion.click({ source_post_id: 1647631, target_question_id: 2057752, position: 5 })">
				<a href="/q/2057752" title="Vote score (upvotes - downvotes)">
					<div class="answer-votes answered-accepted default">20</div>
				</a>
				<a href="/questions/2057752/design-pattern-problem-involving-n-states-and-transitions-between-them?noredirect=1" class="question-hyperlink">Design Pattern problem involving N states and transitions between them</a>
			</div>
            <div class="spacer js-gps-track" data-gps-track="linkedquestion.click({ source_post_id: 1647631, target_question_id: 2271073, position: 6 })">
				<a href="/q/2271073" title="Vote score (upvotes - downvotes)">
					<div class="answer-votes answered-accepted default">16</div>
				</a>
				<a href="/questions/2271073/state-machines-in-c?noredirect=1" class="question-hyperlink">State machines in C</a>
			</div>
            <div class="spacer js-gps-track" data-gps-track="linkedquestion.click({ source_post_id: 1647631, target_question_id: 2181135, position: 7 })">
				<a href="/q/2181135" title="Vote score (upvotes - downvotes)">
					<div class="answer-votes answered-accepted default">7</div>
				</a>
				<a href="/questions/2181135/finite-state-machine-bad-design?noredirect=1" class="question-hyperlink">Finite State Machine : Bad design?</a>
			</div>
            <div class="spacer js-gps-track" data-gps-track="linkedquestion.click({ source_post_id: 1647631, target_question_id: 1890555, position: 8 })">
				<a href="/q/1890555" title="Vote score (upvotes - downvotes)">
					<div class="answer-votes answered-accepted default">7</div>
				</a>
				<a href="/questions/1890555/how-can-i-obfuscate-a-test-in-code-to-prevent-tampering-with-response-processing?noredirect=1" class="question-hyperlink">How can I obfuscate a test in code to prevent tampering with response processing?</a>
			</div>
            <div class="spacer js-gps-track" data-gps-track="linkedquestion.click({ source_post_id: 1647631, target_question_id: 3085070, position: 9 })">
				<a href="/q/3085070" title="Vote score (upvotes - downvotes)">
					<div class="answer-votes answered-accepted default">5</div>
				</a>
				<a href="/questions/3085070/finite-state-machine-parser?noredirect=1" class="question-hyperlink">Finite State Machine parser</a>
			</div>
		    <div class="spacer more ml32 pl16 pt8">
                <a href="/questions/linked/1647631">See more linked questions</a>
            </div>
	</div>
</div>


                    <div class="module sidebar-related">
                        <h4 id="h-related">Related</h4>
                        <div class="related js-gps-related-questions" data-tracker="rq=1">
                                <div class="spacer">
                                    <a href="/q/150355" title="Vote score (upvotes - downvotes)">
                                        <div class="answer-votes answered-accepted large">477</div>
                                    </a>
                                    <a href="/questions/150355/programmatically-find-the-number-of-cores-on-a-machine" class="question-hyperlink">Programmatically find the number of cores on a machine</a>
                                </div>
                                <div class="spacer">
                                    <a href="/q/589575" title="Vote score (upvotes - downvotes)">
                                        <div class="answer-votes large">706</div>
                                    </a>
                                    <a href="/questions/589575/what-does-the-c-standard-state-the-size-of-int-long-type-to-be" class="question-hyperlink">What does the C++ standard state the size of int, long type to be?</a>
                                </div>
                                <div class="spacer">
                                    <a href="/q/1008019" title="Vote score (upvotes - downvotes)">
                                        <div class="answer-votes answered-accepted large">757</div>
                                    </a>
                                    <a href="/questions/1008019/c-singleton-design-pattern" class="question-hyperlink">C++ Singleton design pattern</a>
                                </div>
                                <div class="spacer">
                                    <a href="/q/1711631" title="Vote score (upvotes - downvotes)">
                                        <div class="answer-votes answered-accepted extra-large">3032</div>
                                    </a>
                                    <a href="/questions/1711631/improve-insert-per-second-performance-of-sqlite" class="question-hyperlink">Improve INSERT-per-second performance of SQLite</a>
                                </div>
                                <div class="spacer">
                                    <a href="/q/5923767" title="Vote score (upvotes - downvotes)">
                                        <div class="answer-votes large">264</div>
                                    </a>
                                    <a href="/questions/5923767/simple-state-machine-example-in-c" class="question-hyperlink">Simple state machine example in C#?</a>
                                </div>
                                <div class="spacer">
                                    <a href="/q/15820308" title="Vote score (upvotes - downvotes)">
                                        <div class="answer-votes default">1</div>
                                    </a>
                                    <a href="/questions/15820308/state-machine-event-generation-in-multi-processor-architecture" class="question-hyperlink">State machine event generation in multi-processor architecture</a>
                                </div>
                                <div class="spacer">
                                    <a href="/q/22707129" title="Vote score (upvotes - downvotes)">
                                        <div class="answer-votes answered-accepted default">1</div>
                                    </a>
                                    <a href="/questions/22707129/the-states-in-this-fsm-machine-are-changing-too-quickly-due-to-an-issue-with-the" class="question-hyperlink">The states in this FSM machine are changing too quickly due to an issue with the clock updating the present state</a>
                                </div>
                                <div class="spacer">
                                    <a href="/q/53795864" title="Vote score (upvotes - downvotes)">
                                        <div class="answer-votes default">2</div>
                                    </a>
                                    <a href="/questions/53795864/state-machine-design-handling-data-input" class="question-hyperlink">State Machine design handling data input</a>
                                </div>
                        </div>
                    </div>

                <div id="hot-network-questions" class="module tex2jax_ignore">
    <h4>
        <a href="https://stackexchange.com/questions?tab=hot"
           class="js-gps-track s-link s-link__inherit" 
           data-gps-track="posts_hot_network.click({ item_type:1, location:11 })">
            Hot Network Questions
        </a>
    </h4>
    <ul>
            <li >
                <div class="favicon favicon-music" title="Music: Practice &amp; Theory Stack Exchange"></div><a href="https://music.stackexchange.com/questions/105359/how-do-i-count-note-durations-in-these-bars" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:240 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How Do I Count Note Durations In These Bars?
                </a>

            </li>
            <li >
                <div class="favicon favicon-retrocomputing" title="Retrocomputing Stack Exchange"></div><a href="https://retrocomputing.stackexchange.com/questions/16408/which-system-was-the-first-which-was-capable-of-running-graphics-programs-remote" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:648 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Which system was the first which was capable of running graphics programs remotely?
                </a>

            </li>
            <li >
                <div class="favicon favicon-money" title="Personal Finance &amp; Money Stack Exchange"></div><a href="https://money.stackexchange.com/questions/131446/how-do-you-take-profit-from-stock-trading-while-keeping-capital-invested" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:93 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How do you take profit from stock trading while keeping capital invested?
                </a>

            </li>
            <li >
                <div class="favicon favicon-workplace" title="The Workplace Stack Exchange"></div><a href="https://workplace.stackexchange.com/questions/164583/recommending-someone-while-being-newly-hired-myself" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:423 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Recommending someone while being newly-hired myself
                </a>

            </li>
            <li >
                <div class="favicon favicon-physics" title="Physics Stack Exchange"></div><a href="https://physics.stackexchange.com/questions/583176/what-is-the-fundamental-reason-for-existence-of-negative-temperature-in-a-given" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:151 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What is the fundamental reason for existence of negative temperature in a given specific system?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-puzzling" title="Puzzling Stack Exchange"></div><a href="https://puzzling.stackexchange.com/questions/102510/density-in-den-sitting" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:559 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Density in Den Sitting
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-latin" title="Latin Language Stack Exchange"></div><a href="https://latin.stackexchange.com/questions/14639/causa-est-in-this-sentence" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:644 }); posts_hot_network.click({ item_type:2, location:11 })">
                    &quot;Causa est&quot; in this sentence
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-travel" title="Travel Stack Exchange"></div><a href="https://travel.stackexchange.com/questions/159623/can-i-bring-computer-parts-to-australia" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:273 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Can I bring computer parts to Australia?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-physics" title="Physics Stack Exchange"></div><a href="https://physics.stackexchange.com/questions/583007/why-is-the-centre-of-mass-of-a-semicircular-wire-outside-the-body" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:151 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Why is the centre of mass of a semicircular wire outside the body?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-pets" title="Pets Stack Exchange"></div><a href="https://pets.stackexchange.com/questions/28740/my-fish-are-disappearing" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:518 }); posts_hot_network.click({ item_type:2, location:11 })">
                    My fish are disappearing :(
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-diy" title="Home Improvement Stack Exchange"></div><a href="https://diy.stackexchange.com/questions/204541/leaving-basement-forms-on-permanently" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:73 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Leaving basement forms on permanently
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-physics" title="Physics Stack Exchange"></div><a href="https://physics.stackexchange.com/questions/583111/if-we-repeatedly-divide-a-solid-in-half-at-what-point-does-it-stop-being-a-soli" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:151 }); posts_hot_network.click({ item_type:2, location:11 })">
                    If we repeatedly divide a solid in half, at what point does it stop being a solid?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-retrocomputing" title="Retrocomputing Stack Exchange"></div><a href="https://retrocomputing.stackexchange.com/questions/16351/when-if-ever-was-the-c-language-int-size-altered-from-the-host-machine-word-r" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:648 }); posts_hot_network.click({ item_type:2, location:11 })">
                    When if ever was the C language &#x27;int&#x27; size altered from the host machine word (register) size into a literal 32 bit size?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-ell" title="English Language Learners Stack Exchange"></div><a href="https://ell.stackexchange.com/questions/261455/why-is-help-you-save-money-wrong-if-the-subject-was-plural" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:481 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Why is &quot;help you save money&quot; wrong if the subject was plural?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-boardgames" title="Board &amp; Card Games Stack Exchange"></div><a href="https://boardgames.stackexchange.com/questions/53193/carcassonne-rivers-abbey-tile-question" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:147 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Carcassonne Rivers Abbey Tile Question
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-askubuntu" title="Ask Ubuntu"></div><a href="https://askubuntu.com/questions/1279266/is-there-a-way-to-get-mouse-cursors-bigger-than-64x64" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:89 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Is there a way to get mouse cursors bigger than 64x64?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-worldbuilding" title="Worldbuilding Stack Exchange"></div><a href="https://worldbuilding.stackexchange.com/questions/186520/how-could-immunity-to-a-lie-detection-ability-work" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:579 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How could immunity to a lie detection ability work?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-stackoverflow" title="Stack Overflow"></div><a href="https://stackoverflow.com/questions/64136641/how-to-reverse-a-string-that-contains-complicated-emojis" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:1 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How to reverse a string that contains complicated emojis?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-mathoverflow" title="MathOverflow"></div><a href="https://mathoverflow.net/questions/373043/can-american-math-monthly-be-used-to-publish-hard-research" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:504 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Can American Math. Monthly be used to publish hard research?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-skeptics" title="Skeptics Stack Exchange"></div><a href="https://skeptics.stackexchange.com/questions/48586/did-the-danish-justice-ministry-survey-veterinarians-about-bestiality" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:212 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Did the Danish Justice Ministry survey veterinarians about bestiality?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-math" title="Mathematics Stack Exchange"></div><a href="https://math.stackexchange.com/questions/3848028/a-categorization-of-abelian-groups" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:69 }); posts_hot_network.click({ item_type:2, location:11 })">
                    A categorization of abelian groups
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-electronics" title="Electrical Engineering Stack Exchange"></div><a href="https://electronics.stackexchange.com/questions/524174/how-slowly-can-a-brushless-dc-motor-spin" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:135 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How slowly can a brushless DC motor spin?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-space" title="Space Exploration Stack Exchange"></div><a href="https://space.stackexchange.com/questions/46794/what-are-the-most-delayed-missions-that-eventually-launched-successfully" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:508 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What are the most-delayed missions that eventually launched successfully?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-puzzling" title="Puzzling Stack Exchange"></div><a href="https://puzzling.stackexchange.com/questions/102527/what-kind-of-car-do-i-have" class="js-gps-track question-hyperlink mb0" data-gps-track="site.switch({ item_type:11, target_site:559 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What kind of car do I have?
                </a>

            </li>
    </ul>

        <a href="#" 
           class="show-more js-show-more js-gps-track" 
           data-gps-track="posts_hot_network.click({ item_type:3, location:11 })">
            more hot questions
        </a>
</div>

            </div>
    </div>
<script>StackExchange.ready(function(){$.get('/posts/1647631/ivc/4bb3');});</script>
<noscript><div><img src="/posts/1647631/ivc/4bb3" class="dno" alt="" width="0" height="0"></div></noscript><div style="display:none" id="js-codeblock-lang">default</div></div>


        </div>
    </div>
        
<script>;try{(function(a){function b(a){return'string'==typeof a?document.getElementById(a):a}function c(a){return a=b(a),!!a&&'none'===getComputedStyle(a).display}function d(a){return!c(a)}function e(a){return!!a}function f(a){return /^\s*$/.test(b(a).innerHTML)}function g(a){var b=a.style;b.height=b.maxHeight=b.minHeight='auto',b.display='none'}function h(a){var b=a.style;b.height=b.maxHeight=b.minHeight='auto',b.display='none',[].forEach.call(a.children,h)}function i(a){var b=a.style;b.height=b.maxHeight=b.minHeight='auto',b.removeProperty('display')}function j(a,b){var c;return function(){return a&&(c=a.call(b||this,arguments),a=null),c}}function k(a){var b=document.createElement('script');b.src=a,document.body.appendChild(b)}function l(a){return m([],a)}function m(a,b){return a.push=function(a){return b(),delete this.push,this.push(a)},a}function n(){try{return!new Function('return async()=>{};')}catch(a){return!0}}function o(){return'undefined'!=typeof googletag&&!!googletag.apiReady}function p(){o()||(googletag={cmd:l(B)})}function q(){var a=document.createElement('div');a.className='adsbox',a.id='clc-abd',a.style.position='absolute',a.style.pointerEvents='none',a.innerHTML='&nbsp;',document.body.appendChild(a)}function r(){return Object.keys(F.ids)}function s(a){var b=F.ids[a],c=F.slots[b];'function'==typeof c&&(c=c(a));return{path:'/'+C+'/'+E+'/'+b+'/'+D,sizes:c,zone:b}}function t(a){try{Array.isArray(clc.dfp.slotsRenderedEvents)||(clc.dfp.slotsRenderedEvents=[]),clc.dfp.slotsRenderedEvents.push(a);var b=a.slot.getSlotElementId(),c=[];b||c.push('id=0');var d=document.getElementById(b);if(!b||d?d.hasAttribute('data-clc-stalled')&&c.push('st=1'):c.push('el=0'),0!==c.length)return void G(c.join('&'));var e=s(b),f=e.zone;if(clc.collapse&&clc.collapse[f]&&a.isEmpty)return h(d),void d.setAttribute('data-clc-ready','true');if(-1!==y.dh.indexOf(a.lineItemId))h(d);else if(a.lineItemId){d.setAttribute('data-clc-prefilled','true');var j=d.parentElement;if(j.classList.contains('js-zone-container')){g(j);var k=j.querySelectorAll('.js-report-ad-button-container'),l=k[0];switch(l.style.height='24px',b){case'dfp-tlb':case'dfp-tag':{j.classList.add('mb8');break}case'dfp-mlb':case'dfp-smlb':case'dfp-bmlb':{j.classList.add('my8');break}case'dfp-isb':{j.classList.add('mt24');break}case'dfp-m-aq':{j.classList.add('my12'),j.classList.add('mx-auto');break}default:}i(j),i(d)}else i(d);if('dfp-msb'==b){var m=document.getElementById('hireme');h(m)}}d.setAttribute('data-clc-ready','true')}catch(a){var n=document.querySelector('#dfp-tsb, #dfp-isb, #clc-tsb');n&&n.setAttribute('data-clc-ready','true'),G('e=1')}}function u(a,b){'dfp-isb'===a&&b.setTargeting('Sidebar',['Inline']),'dfp-tsb'===a&&b.setTargeting('Sidebar',['Right']);var c=s(a),d=c.path,e=c.sizes,f=c.zone,g=googletag.defineSlot(d,e,a);g.addService(b),!1}function v(b){var c=a.dfp&&a.dfp.targeting||{};'SystemDefault'===c.ProductVariant&&(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches?c.ProductVariant='Dark':c.ProductVariant='Light'),Object.keys(c).forEach(function(a){b.setTargeting(a,c[a])})}function w(a){var g=a.map(b).filter(e);return{eligible:g.filter(f).filter(d),ineligible:g.filter(c)}}function x(b){void 0===b&&(b=r());var c=['dfp-mlb','dfp-smlb'];if(!o())return p(),void googletag.cmd.push(function(){return x(b)});var d=w(b),e=d.eligible,f=d.ineligible;if(e.forEach(function(a){g(a)}),f.forEach(h),0!==e.length){y.abd&&q(),googletag.destroySlots();var i=googletag.pubads();y.sf&&(i.setForceSafeFrame(!0),i.setSafeFrameConfig({allowOverlayExpansion:!0,allowPushExpansion:!0,sandbox:!0})),y.ll||i.enableSingleRequest(),a.sreEvent||(i.addEventListener('slotRenderEnded',t),a.sreEvent=!0),v(i);var j=e.filter(function(a){return!y.ll||0>c.indexOf(a.id)}),k=e.filter(function(a){return!!y.ll&&0<=c.indexOf(a.id)});j.forEach(function(a){u(a.id,i),a.setAttribute('data-dfp-zone','true')}),googletag.enableServices(),j.forEach(function(a){googletag.display(a.id)}),y.ll&&(i.enableLazyLoad({fetchMarginPercent:0,renderMarginPercent:0}),k.forEach(function(a){u(a.id,i),a.setAttribute('data-clc-prefilled','true')}),k.forEach(function(a){googletag.display(a.id)}))}}var y=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d,e=0,f=b;e<f.length;e++)for(var g in d=f[e],d)a[g]=d[g];return a}({"lib":"https://cdn.sstatic.net/clc/clc.min.js?v=d7c7e62bd2f5","style":"https://cdn.sstatic.net/clc/styles/clc.min.css?v=83419f27e8fa","u":"https://clc.stackoverflow.com/markup.js","wa":true,"kt":2000,"tto":true,"h":"clc.stackoverflow.com","allowed":"^(((talent\\.)?stackoverflow)|(blog\\.codinghorror)|(serverfault|askubuntu)|([^\\.]+\\.stackexchange))\\.com$","wv":true,"al":false,"dh":[5171832659],"abd":true},a.options||{}),z=j(function(){var a=y.lib;n()&&(a=a.replace(/(\.min)?\.js(\?v=[0-9a-fA-F]+)?$/,'.ie$1.js$2')),k(a)}),A=a.cmd||[];Array.isArray(A)&&(0<A.length?z():m(A,z));var B=j(function(){k('https://www.googletagservices.com/tag/js/gpt.js')}),C='248424177',D=/^\/tags\//.test(location.pathname)||/^\/questions\/tagged\//.test(location.pathname)?'tag-pages':/^\/$/.test(location.pathname)||/^\/home/.test(location.pathname)?'home-page':'question-pages',E=location.hostname;var F={slots:{lb:[[728,90]],mlb:[[728,90]],smlb:[[728,90]],bmlb:[[728,90]],sb:function(a){return'dfp-tsb'===a?[[300,250],[300,600]]:[[300,250]]},"tag-sponsorship":[[730,135]],"mobile-below-question":[[320,50],[300,250]],msb:[[300,250],[300,600]]},ids:{"dfp-tlb":'lb',"dfp-mlb":'mlb',"dfp-smlb":'smlb',"dfp-bmlb":'bmlb',"dfp-tsb":'sb',"dfp-isb":'sb',"dfp-tag":'tag-sponsorship',"dfp-msb":'msb',"dfp-m-aq":'mobile-below-question',"clc-tlb":'lb',"clc-mlb":'mlb',"clc-tsb":'sb'}},G=function(a){new Image().src='https://'+y.h+'/stalled.gif?'+a};(function(){var b=y.al;b&&A.push(function(){return a.load()})})(),p(),a.dfp={load:x},a.options=y,a.cmd=A})(this.clc=this.clc||{})}catch(a){window.console.error(a)}</script>    <script>
        var clc = clc || {};
        clc.collapse = { sb: !0, 'tag-sponsorship': !0, lb: !0, mlb: !0, smlb: !0, bmlb: !0, 'mobile-below-question': !0 };
        clc.options = clc.options || {};
        clc.options.sf = !0;
        clc.options.hb = !1;
        clc.options.ll = !0;
        clc.cmd = clc.cmd || [];
        clc.cmd.push(function () { window.clc_request='Ahhmqt2YZtgIAAAAAA8kGQACAAAAAgAAAAAiAAAAfGMrK3xjfGFyY2hpdGVjdHVyZXxzdGF0ZS1tYWNoaW5lfADea8ONDE_3NILF'; clc.load(); });
        clc.dfp = clc.dfp || {};
        clc.dfp.targeting = {Registered:['false'],'so-tag':['c_plus_plus','c','architecture','state-machine'],'tag-reportable':['c_plus_plus','c','architecture','state-machine'],'tag-non-reportable':['c_plus_plus','c','architecture','state-machine'],NumberOfAnswers:['20-plus']};
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
        googletag.cmd.push(function () { clc.dfp.load(); });

            StackExchange.ready(function () { googletag.cmd.push(function () { StackExchange.ads.init(googletag, '/ads/report-ad', 'Report this ad') }) });
    </script>

            <footer id="footer" class="site-footer js-footer" role="contentinfo">
        <div class="site-footer--container">
                <div class="site-footer--logo">
                    
                    <a href="https://stackoverflow.com"><svg aria-hidden="true" class="native svg-icon iconLogoGlyphMd" width="32" height="37" viewBox="0 0 32 37"><path d="M26 33v-9h4v13H0V24h4v9h22z" fill="#BCBBBB"/><path d="M21.5 0l-2.7 2 9.9 13.3 2.7-2L21.5 0zM26 18.4L13.3 7.8l2.1-2.5 12.7 10.6-2.1 2.5zM9.1 15.2l15 7 1.4-3-15-7-1.4 3zm14 10.79l.68-2.95-16.1-3.35L7 23l16.1 2.99zM23 30H7v-3h16v3z" fill="#F48024"/></svg></a>
                </div>
            <nav class="site-footer--nav">
                    <div class="site-footer--col site-footer--col__visible js-footer-col" data-name="default">
                        <h5 class="-title"><a href="https://stackoverflow.com" class="js-gps-track" data-gps-track="footer.click({ location: 2, link: 15})">Stack Overflow</a></h5>
                        <ul class="-list js-primary-footer-links">
                            <li class="-item"><a href="/questions" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 16})">Questions</a></li>
                                <li class="-item"><a href="https://stackoverflow.com/jobs" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 17})">Jobs</a></li>
                                <li class="-item"><a href="https://stackoverflow.com/jobs/directory/developer-jobs" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 11})">Developer Jobs Directory</a></li>
                                     <li class="-item"><a href="https://stackoverflow.com/jobs/salary" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 28})">Salary Calculator</a></li>
                                <li class="-item"><a href="/help" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 3 })">Help</a></li>
                                <li class="-item"><a onclick='StackExchange.switchMobile("on")' class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 12 })">Mobile</a></li>
                        </ul>
                    </div>
                    <div class="site-footer--col site-footer--col__visible js-footer-col" data-name="default">
                        <h5 class="-title"><a href="https://stackoverflowbusiness.com" class="js-gps-track" data-gps-track="footer.click({ location: 2, link: 19 })">Products</a></h5>
                        <ul class="-list">
                            <li class="-item"><a href="https://stackoverflow.com/teams" class="js-gps-track -link" 
                                                 data-ga="[&quot;teams traffic&quot;,&quot;footer - site nav&quot;,&quot;stackoverflow.com/teams&quot;,null,{&quot;dimension4&quot;:&quot;teams&quot;}]"
                                                 data-gps-track="footer.click({ location: 2, link: 29 })">Teams</a></li>
                            <li class="-item"><a href="https://stackoverflow.com/talent" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 20 })">Talent</a></li>
                            <li class="-item"><a href="https://stackoverflow.com/advertising" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 21 })">Advertising</a></li>
                            <li class="-item"><a href="https://stackoverflow.com/enterprise" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 22 })">Enterprise</a></li>
                        </ul>
                    </div>
                <div class="site-footer--col site-footer--col__visible js-footer-col" data-name="default">
                    <h5 class="-title"><a class="js-gps-track" data-gps-track="footer.click({ location: 2, link: 1 })" href="https://stackoverflow.com/company">Company</a></h5>
                    <ul class="-list">
                            <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 1 })" href="https://stackoverflow.com/company">About</a></li>
                        <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 27 })" href="https://stackoverflow.com/company/press">Press</a></li>
                            <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 9 })" href="https://stackoverflow.com/company/work-here">Work Here</a></li>
                        <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 7 })" href="https://stackoverflow.com/legal">Legal</a></li>
                        <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 8 })" href="https://stackoverflow.com/legal/privacy-policy">Privacy Policy</a></li>
                            <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 13 })" href="https://stackoverflow.com/company/contact">Contact Us</a></li>
                    </ul>
                </div>
                <div class="site-footer--col site-footer--categories-nav site-footer--col__visible">
                    <a href="#" class="site-footer--back js-footer-back"><svg aria-hidden="true" class="svg-icon iconArrowLeftAlt" width="18" height="18" viewBox="0 0 18 18"><path d="M10.58 16L12 14.59 6.4 9 12 3.41 10.57 2l-7 7 7 7z"/></svg></a>
                    <div>
                        <h5 class="-title"><a href="https://stackexchange.com" data-gps-track="footer.click({ location: 2, link: 30 })">Stack Exchange<br> Network</a></h5>
                        <ul class="-list">
                            <li class="-item"><a href="#" class="-link _expandable js-footer-category-trigger js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })" data-target="Technology">Technology</a></li>
                            <li class="-item"><a href="#" class="-link _expandable js-footer-category-trigger js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })" data-target="Life / Arts">Life / Arts</a></li>
                            <li class="-item"><a href="#" class="-link _expandable js-footer-category-trigger js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })" data-target="Culture / Recreation">Culture / Recreation</a></li>
                            <li class="-item"><a href="#" class="-link _expandable js-footer-category-trigger js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })" data-target="Science">Science</a></li>
                            <li class="-item"><a href="#" class="-link _expandable js-footer-category-trigger js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })" data-target="Other">Other</a></li>
                        </ul>
                    </div>
                </div>
                <div class="site-footer--categories">
                        <div class="site-footer--col site-footer--category js-footer-col" data-name="Technology">
        <ul class="-list">
                <li class="-item"><a href="https://stackoverflow.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="professional and enthusiast programmers">Stack Overflow</a></li>
                <li class="-item"><a href="https://serverfault.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="system and network administrators">Server Fault</a></li>
                <li class="-item"><a href="https://superuser.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="computer enthusiasts and power users">Super User</a></li>
                <li class="-item"><a href="https://webapps.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="power users of web applications">Web Applications</a></li>
                <li class="-item"><a href="https://askubuntu.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="Ubuntu users and developers">Ask Ubuntu</a></li>
                <li class="-item"><a href="https://webmasters.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="pro webmasters">Webmasters</a></li>
                <li class="-item"><a href="https://gamedev.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="professional and independent game developers">Game Development</a></li>
                    </ul></div><div class="site-footer--col site-footer--category js-footer-col" data-name="Technology"><ul class="-list">
                <li class="-item"><a href="https://tex.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="users of TeX, LaTeX, ConTeXt, and related typesetting systems">TeX - LaTeX</a></li>
                <li class="-item"><a href="https://softwareengineering.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="professionals, academics, and students working within the systems development life cycle">Software Engineering</a></li>
                <li class="-item"><a href="https://unix.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="users of Linux, FreeBSD and other Un*x-like operating systems">Unix &amp; Linux</a></li>
                <li class="-item"><a href="https://apple.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="power users of Apple hardware and software">Ask Different (Apple)</a></li>
                <li class="-item"><a href="https://wordpress.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="WordPress developers and administrators">WordPress Development</a></li>
                <li class="-item"><a href="https://gis.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="cartographers, geographers and GIS professionals">Geographic Information Systems</a></li>
                <li class="-item"><a href="https://electronics.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="electronics and electrical engineering professionals, students, and enthusiasts">Electrical Engineering</a></li>
                    </ul></div><div class="site-footer--col site-footer--category js-footer-col" data-name="Technology"><ul class="-list">
                <li class="-item"><a href="https://android.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="enthusiasts and power users of the Android operating system">Android Enthusiasts</a></li>
                <li class="-item"><a href="https://security.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="information security professionals">Information Security</a></li>
                <li class="-item"><a href="https://dba.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="database professionals who wish to improve their database skills and learn from others in the community">Database Administrators</a></li>
                <li class="-item"><a href="https://drupal.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="Drupal developers and administrators">Drupal Answers</a></li>
                <li class="-item"><a href="https://sharepoint.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="SharePoint enthusiasts">SharePoint</a></li>
                <li class="-item"><a href="https://ux.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="user experience researchers and experts">User Experience</a></li>
                <li class="-item"><a href="https://mathematica.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="users of Wolfram Mathematica">Mathematica</a></li>
                    </ul></div><div class="site-footer--col site-footer--category js-footer-col" data-name="Technology"><ul class="-list">
                <li class="-item"><a href="https://salesforce.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="Salesforce administrators, implementation experts, developers and anybody in-between">Salesforce</a></li>
                <li class="-item"><a href="https://expressionengine.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="administrators, end users, developers and designers for ExpressionEngine&#xAE; CMS">ExpressionEngine&#xAE; Answers</a></li>
                <li class="-item"><a href="https://pt.stackoverflow.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="programadores profissionais e entusiastas">Stack Overflow em Portugu&#xEA;s</a></li>
                <li class="-item"><a href="https://blender.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="people who use Blender to create 3D graphics, animations, or games">Blender</a></li>
                <li class="-item"><a href="https://networkengineering.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="network engineers">Network Engineering</a></li>
                <li class="-item"><a href="https://crypto.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="software developers, mathematicians and others interested in cryptography">Cryptography</a></li>
                <li class="-item"><a href="https://codereview.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="peer programmer code reviews">Code Review</a></li>
                    </ul></div><div class="site-footer--col site-footer--category js-footer-col" data-name="Technology"><ul class="-list">
                <li class="-item"><a href="https://magento.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="users of the Magento e-Commerce platform">Magento</a></li>
                <li class="-item"><a href="https://softwarerecs.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="people seeking specific software recommendations">Software Recommendations</a></li>
                <li class="-item"><a href="https://dsp.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="practitioners of the art and science of signal, image and video processing">Signal Processing</a></li>
                <li class="-item"><a href="https://emacs.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="those using, extending or developing Emacs">Emacs</a></li>
                <li class="-item"><a href="https://raspberrypi.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="users and developers of hardware and software for Raspberry Pi">Raspberry Pi</a></li>
                <li class="-item"><a href="https://ru.stackoverflow.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="&#x43F;&#x440;&#x43E;&#x433;&#x440;&#x430;&#x43C;&#x43C;&#x438;&#x441;&#x442;&#x43E;&#x432;">Stack Overflow &#x43D;&#x430; &#x440;&#x443;&#x441;&#x441;&#x43A;&#x43E;&#x43C;</a></li>
                <li class="-item"><a href="https://codegolf.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="programming puzzle enthusiasts and code golfers">Code Golf</a></li>
                    </ul></div><div class="site-footer--col site-footer--category js-footer-col" data-name="Technology"><ul class="-list">
                <li class="-item"><a href="https://es.stackoverflow.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="programadores y profesionales de la inform&#xE1;tica">Stack Overflow en espa&#xF1;ol</a></li>
                <li class="-item"><a href="https://ethereum.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="users of Ethereum, the decentralized application platform and smart contract enabled blockchain">Ethereum</a></li>
                <li class="-item"><a href="https://datascience.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="Data science professionals, Machine Learning specialists, and those interested in learning more about the field">Data Science</a></li>
                <li class="-item"><a href="https://arduino.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="developers of open-source hardware and software that is compatible with Arduino">Arduino</a></li>
                <li class="-item"><a href="https://bitcoin.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="Bitcoin crypto-currency enthusiasts">Bitcoin</a></li>
                <li class="-item"><a href="https://sqa.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="software quality control experts, automation engineers, and software testers">Software Quality Assurance &amp; Testing</a></li>
                <li class="-item"><a href="https://sound.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="sound engineers, producers, editors, and enthusiasts">Sound Design</a></li>
                    </ul></div><div class="site-footer--col site-footer--category js-footer-col" data-name="Technology"><ul class="-list">
                <li class="-item"><a href="https://windowsphone.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="enthusiasts and power users of Windows Phone OS">Windows Phone</a></li>
                <li class="-item">
                    <a href="https://stackexchange.com/sites#technology" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 26 })">
                        <strong>
                            more (28)
                        </strong>
                    </a>
                </li>
        </ul>
    </div>
    <div class="site-footer--col site-footer--category js-footer-col" data-name="Life / Arts">
        <ul class="-list">
                <li class="-item"><a href="https://photo.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="professional, enthusiast and amateur photographers">Photography</a></li>
                <li class="-item"><a href="https://scifi.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="science fiction and fantasy enthusiasts">Science Fiction &amp; Fantasy</a></li>
                <li class="-item"><a href="https://graphicdesign.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="Graphic Design professionals, students, and enthusiasts">Graphic Design</a></li>
                <li class="-item"><a href="https://movies.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="movie and TV enthusiasts">Movies &amp; TV</a></li>
                <li class="-item"><a href="https://music.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="musicians, students, and enthusiasts">Music: Practice &amp; Theory</a></li>
                <li class="-item"><a href="https://worldbuilding.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="writers/artists using science, geography and culture to construct imaginary worlds and settings">Worldbuilding</a></li>
                <li class="-item"><a href="https://video.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="engineers, producers, editors, and enthusiasts spanning the fields of video, and media creation">Video Production</a></li>
                    </ul></div><div class="site-footer--col site-footer--category js-footer-col" data-name="Life / Arts"><ul class="-list">
                <li class="-item"><a href="https://cooking.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="professional and amateur chefs">Seasoned Advice (cooking)</a></li>
                <li class="-item"><a href="https://diy.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="contractors and serious DIYers">Home Improvement</a></li>
                <li class="-item"><a href="https://money.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="people who want to be financially literate">Personal Finance &amp; Money</a></li>
                <li class="-item"><a href="https://academia.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="academics and those enrolled in higher education">Academia</a></li>
                <li class="-item"><a href="https://law.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="legal professionals, students, and others with experience or interest in law">Law</a></li>
                <li class="-item"><a href="https://fitness.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="physical fitness professionals, athletes, trainers, and those providing health-related needs">Physical Fitness</a></li>
                <li class="-item"><a href="https://gardening.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="gardeners and landscapers">Gardening &amp; Landscaping</a></li>
                    </ul></div><div class="site-footer--col site-footer--category js-footer-col" data-name="Life / Arts"><ul class="-list">
                <li class="-item"><a href="https://parenting.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="parents, grandparents, nannies and others with a parenting role">Parenting</a></li>
                <li class="-item">
                    <a href="https://stackexchange.com/sites#lifearts" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 26 })">
                        <strong>
                            more (10)
                        </strong>
                    </a>
                </li>
        </ul>
    </div>
    <div class="site-footer--col site-footer--category js-footer-col" data-name="Culture / Recreation">
        <ul class="-list">
                <li class="-item"><a href="https://english.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="linguists, etymologists, and serious English language enthusiasts">English Language &amp; Usage</a></li>
                <li class="-item"><a href="https://skeptics.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="scientific skepticism">Skeptics</a></li>
                <li class="-item"><a href="https://judaism.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="those who base their lives on Jewish law and tradition and anyone interested in learning more">Mi Yodeya (Judaism)</a></li>
                <li class="-item"><a href="https://travel.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="road warriors and seasoned travelers">Travel</a></li>
                <li class="-item"><a href="https://christianity.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="committed Christians, experts in Christianity and those interested in learning more">Christianity</a></li>
                <li class="-item"><a href="https://ell.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="speakers of other languages learning English">English Language Learners</a></li>
                <li class="-item"><a href="https://japanese.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="students, teachers, and linguists wanting to discuss the finer points of the Japanese language">Japanese Language</a></li>
                    </ul></div><div class="site-footer--col site-footer--category js-footer-col" data-name="Culture / Recreation"><ul class="-list">
                <li class="-item"><a href="https://chinese.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="students, teachers, and linguists wanting to discuss the finer points of the Chinese language">Chinese Language</a></li>
                <li class="-item"><a href="https://french.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="students, teachers, and linguists wanting to discuss the finer points of the French language">French Language</a></li>
                <li class="-item"><a href="https://german.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="speakers of German wanting to discuss the finer points of the language and translation">German Language</a></li>
                <li class="-item"><a href="https://hermeneutics.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="professors, theologians, and those interested in exegetical analysis of biblical texts">Biblical Hermeneutics</a></li>
                <li class="-item"><a href="https://history.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="historians and history buffs">History</a></li>
                <li class="-item"><a href="https://spanish.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="linguists, teachers, students and Spanish language enthusiasts in general wanting to discuss the finer points of the language">Spanish Language</a></li>
                <li class="-item"><a href="https://islam.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="Muslims, experts in Islam, and those interested in learning more about Islam">Islam</a></li>
                    </ul></div><div class="site-footer--col site-footer--category js-footer-col" data-name="Culture / Recreation"><ul class="-list">
                <li class="-item"><a href="https://rus.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="&#x43B;&#x438;&#x43D;&#x433;&#x432;&#x438;&#x441;&#x442;&#x43E;&#x432; &#x438; &#x44D;&#x43D;&#x442;&#x443;&#x437;&#x438;&#x430;&#x441;&#x442;&#x43E;&#x432; &#x440;&#x443;&#x441;&#x441;&#x43A;&#x43E;&#x433;&#x43E; &#x44F;&#x437;&#x44B;&#x43A;&#x430;">&#x420;&#x443;&#x441;&#x441;&#x43A;&#x438;&#x439; &#x44F;&#x437;&#x44B;&#x43A;</a></li>
                <li class="-item"><a href="https://russian.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="students, teachers, and linguists wanting to discuss the finer points of the Russian language">Russian Language</a></li>
                <li class="-item"><a href="https://gaming.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="passionate videogamers on all platforms">Arqade (gaming)</a></li>
                <li class="-item"><a href="https://bicycles.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="people who build and repair bicycles, people who train cycling, or commute on bicycles">Bicycles</a></li>
                <li class="-item"><a href="https://rpg.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="gamemasters and players of tabletop, paper-and-pencil role-playing games">Role-playing Games</a></li>
                <li class="-item"><a href="https://anime.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="anime and manga fans">Anime &amp; Manga</a></li>
                <li class="-item"><a href="https://puzzling.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="those who create, solve, and study puzzles">Puzzling</a></li>
                    </ul></div><div class="site-footer--col site-footer--category js-footer-col" data-name="Culture / Recreation"><ul class="-list">
                <li class="-item"><a href="https://mechanics.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="mechanics and DIY enthusiast owners of cars, trucks, and motorcycles">Motor Vehicle Maintenance &amp; Repair</a></li>
                <li class="-item"><a href="https://boardgames.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="people who like playing board games, designing board games or modifying the rules of existing board games">Board &amp; Card Games</a></li>
                <li class="-item"><a href="https://bricks.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="LEGO&#xAE; and building block enthusiasts">Bricks</a></li>
                <li class="-item"><a href="https://homebrew.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="dedicated home brewers and serious enthusiasts">Homebrewing</a></li>
                <li class="-item"><a href="https://martialarts.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="students and teachers of all martial arts">Martial Arts</a></li>
                <li class="-item"><a href="https://outdoors.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="people who love being outdoors enjoying nature and wilderness, and learning about the required skills and equipment">The Great Outdoors</a></li>
                <li class="-item"><a href="https://poker.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="serious players and enthusiasts of poker">Poker</a></li>
                    </ul></div><div class="site-footer--col site-footer--category js-footer-col" data-name="Culture / Recreation"><ul class="-list">
                <li class="-item"><a href="https://chess.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="serious players and enthusiasts of chess">Chess</a></li>
                <li class="-item"><a href="https://sports.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="participants in team and individual sport activities">Sports</a></li>
                <li class="-item">
                    <a href="https://stackexchange.com/sites#culturerecreation" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 26 })">
                        <strong>
                            more (16)
                        </strong>
                    </a>
                </li>
        </ul>
    </div>
    <div class="site-footer--col site-footer--category js-footer-col" data-name="Science">
        <ul class="-list">
                <li class="-item"><a href="https://mathoverflow.net" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="professional mathematicians">MathOverflow</a></li>
                <li class="-item"><a href="https://math.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="people studying math at any level and professionals in related fields">Mathematics</a></li>
                <li class="-item"><a href="https://stats.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="people interested in statistics, machine learning, data analysis, data mining, and data visualization">Cross Validated (stats)</a></li>
                <li class="-item"><a href="https://cstheory.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="theoretical computer scientists and researchers in related fields">Theoretical Computer Science</a></li>
                <li class="-item"><a href="https://physics.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="active researchers, academics and students of physics">Physics</a></li>
                <li class="-item"><a href="https://chemistry.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="scientists, academics, teachers, and students in the field of chemistry">Chemistry</a></li>
                <li class="-item"><a href="https://biology.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="biology researchers, academics, and students">Biology</a></li>
                    </ul></div><div class="site-footer--col site-footer--category js-footer-col" data-name="Science"><ul class="-list">
                <li class="-item"><a href="https://cs.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="students, researchers and practitioners of computer science">Computer Science</a></li>
                <li class="-item"><a href="https://philosophy.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="those interested in the study of the fundamental nature of knowledge, reality, and existence">Philosophy</a></li>
                <li class="-item"><a href="https://linguistics.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="professional linguists and others with an interest in linguistic research and theory">Linguistics</a></li>
                <li class="-item"><a href="https://psychology.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="practitioners, researchers, and students in cognitive science, psychology, neuroscience, and psychiatry">Psychology &amp; Neuroscience</a></li>
                <li class="-item"><a href="https://scicomp.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="scientists using computers to solve scientific problems">Computational Science</a></li>
                <li class="-item">
                    <a href="https://stackexchange.com/sites#science" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 26 })">
                        <strong>
                            more (10)
                        </strong>
                    </a>
                </li>
        </ul>
    </div>
    <div class="site-footer--col site-footer--category js-footer-col" data-name="Other">
        <ul class="-list">
                <li class="-item"><a href="https://meta.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="meta-discussion of the Stack Exchange family of Q&amp;A websites">Meta Stack Exchange</a></li>
                <li class="-item"><a href="https://stackapps.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="apps, scripts, and development with the Stack Exchange API">Stack Apps</a></li>
                <li class="-item"><a href="https://api.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="programmatic interaction with Stack Exchange sites">API</a></li>
                <li class="-item"><a href="https://data.stackexchange.com" class="-link js-gps-track" data-gps-track="footer.click({ location: 1, link: 25 })" title="querying Stack Exchange data using SQL">Data</a></li>
        </ul>
    </div>

                </div>
            </nav>
            <div class="site-footer--copyright fs-fine">
                <ul class="-list">
                    <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link:4 })" href="https://stackoverflow.blog?blb=1">Blog</a></li>
                    <li class="-item"><a href="https://www.facebook.com/officialstackoverflow/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 31 })">Facebook</a></li>
                    <li class="-item"><a href="https://twitter.com/stackoverflow" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 32 })">Twitter</a></li>
                    <li class="-item"><a href="https://linkedin.com/company/stack-overflow" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 33 })">LinkedIn</a></li>
                    <li class="-item"><a href="https://www.instagram.com/thestackoverflow" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 36 })">Instagram</a></li>
                </ul>

                <p class="mt-auto mb24">
site design / logo &#169; 2020 Stack Exchange Inc; user contributions licensed under <a href="https://stackoverflow.com/help/licensing">cc by-sa</a>.                    <span id="svnrev">rev&nbsp;2020.10.1.37720</span>
                </p>
            </div>
        </div>

    </footer>

            <script>StackExchange.ready(function () { StackExchange.responsiveness.addSwitcher(); })</script>
    <noscript>
        <div id="noscript-warning">Stack Overflow works best with JavaScript enabled
            <img src="https://pixel.quantserve.com/pixel/p-c1rF4kxgLUzNc.gif" alt="" class="dno">
        </div>
    </noscript>

            <script>
(function(i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function() { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m);
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            StackExchange.ready(function () {

                StackExchange.ga.init({
                    sendTitles: true,
                    tracker: window.ga,
                    trackingCodes: [
                        'UA-108242619-1'
                    ],
                        checkDimension: 'dimension42'
                });



                    StackExchange.ga.setDimension('dimension2', '|c&#x2B;&#x2B;|c|architecture|state-machine|');

                    StackExchange.ga.setDimension('dimension3', 'Questions/Show');


                StackExchange.ga.trackPageView();
            });
            /**/

            var _qevents = _qevents || [],
            _comscore = _comscore || [];
            (function() {
                var s = document.getElementsByTagName('script')[0],
                    qc = document.createElement('script');
 qc.async = true;
                    qc.src = 'https://secure.quantserve.com/quant.js';
                    s.parentNode.insertBefore(qc, s);
                    _qevents.push({ qacct: "p-c1rF4kxgLUzNc" });/**/
 var sc = document.createElement('script');
                    sc.async = true;
                    sc.src = 'https://sb.scorecardresearch.com/beacon.js';
                    s.parentNode.insertBefore(sc, s);
                    _comscore.push({ c1: "2", c2: "17440561" });            })();
                </script>

    
    </body>
    </html>
